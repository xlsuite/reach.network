gadgets=window.gadgets||{};shindig=window.shindig||{};osapi=window.osapi||{};gadgets.util=gadgets.util||{};
gadgets.util.makeClosure=function(d,f,e){var c=[];for(var b=2,a=arguments.length;b<a;++b){c.push(arguments[b])
}return function(){var g=c.slice();for(var k=0,h=arguments.length;k<h;++k){g.push(arguments[k])}return f.apply(d,g)
}};gadgets.util.makeEnum=function(b){var c,a,d={};for(c=0;(a=b[c]);++c){d[a]=a}return d};gadgets.util.shouldPollXhrReadyStateChange=function(){if(document.all&&!document.querySelector){return true
}return false};gadgets.util=gadgets.util||{};(function(){var a={0:false,10:true,13:true,34:true,39:true,60:true,62:true,92:true,8232:true,8233:true,65282:true,65287:true,65308:true,65310:true,65340:true};
function b(c,d){return String.fromCharCode(d)}gadgets.util.escape=function(c,g){if(!c){return c}else{if(typeof c==="string"){return gadgets.util.escapeString(c)
}else{if(typeof c==="array"){for(var f=0,d=c.length;f<d;++f){c[f]=gadgets.util.escape(c[f])}}else{if(typeof c==="object"&&g){var e={};
for(var h in c){if(c.hasOwnProperty(h)){e[gadgets.util.escapeString(h)]=gadgets.util.escape(c[h],true)
}}return e}}}}return c};gadgets.util.escapeString=function(g){if(!g){return g}var d=[],f,h;for(var e=0,c=g.length;
e<c;++e){f=g.charCodeAt(e);h=a[f];if(h===true){d.push("&#",f,";")}else{if(h!==false){d.push(g.charAt(e))
}}}return d.join("")};gadgets.util.unescapeString=function(c){if(!c){return c}return c.replace(/&#([0-9]+);/g,b)
}})();gadgets.util=gadgets.util||{};(function(){var a=null;function b(e){var f;var c=e.indexOf("?");var d=e.indexOf("#");
if(d===-1){f=e.substr(c+1)}else{f=[e.substr(c+1,d-c-1),"&",e.substr(d+1)].join("")}return f.split("&")
}gadgets.util.getUrlParameters=function(p){var d=typeof p==="undefined";if(a!==null&&d){return a}var l={};
var f=b(p||document.location.href);var n=window.decodeURIComponent?decodeURIComponent:unescape;for(var h=0,g=f.length;
h<g;++h){var m=f[h].indexOf("=");if(m===-1){continue}var c=f[h].substring(0,m);var o=f[h].substring(m+1);
o=o.replace(/\+/g," ");try{l[c]=n(o)}catch(k){}}if(d){a=l}return l}})();gadgets.util.getUrlParameters();
if(!window.gadgets["config"]){gadgets.config=function(){var h;var i={};var b={};var d=false;function c(k,m){for(var l in m){if(!m.hasOwnProperty(l)){continue
}if(typeof k[l]==="object"&&typeof m[l]==="object"){c(k[l],m[l])}else{k[l]=m[l]}}}function j(){var q=(b["core.io"]||{})["jsPath"]||null,p=[],s=0;
var l=document.scripts||document.getElementsByTagName("script");if(!l||l.length==0){return p}for(var m=0;
m<l.length;++m){var r=l[m].src,o=q!=null&&r&&r.indexOf(q)||-1;if(o!=-1&&/.*[.]js.*[?&]c=[01](#|&|$).*/.test(r.substring(o+q.length))){p[s++]=l[m]
}}if(!p.length){var k=l[l.length-1];if(k.src){p[0]=k}}return p}function a(k){var l="";if(k.nodeType==3||k.nodeType==4){l=k.nodeValue
}else{if(k.innerText){l=k.innerText}else{if(k.innerHTML){l=k.innerHTML}else{if(k.firstChild){var m=[];
for(var n=k.firstChild;n;n=n.nextSibling){m.push(a(n))}l=m.join("")}}}}return l}function f(l){var k;try{k=(new Function("return ("+l+"\n)"))()
}catch(m){}if(typeof k==="object"){return k}try{k=(new Function("return ({"+l+"\n})"))()}catch(m){}return typeof k==="object"?k:{}
}function g(q){var k=j();if(!k.length){return}for(var p=0;p<k.length;p++){var m=a(k[p]);var l=f(m);if(h.f&&h.f.length==1){var o=h.f[0];
if(!l[o]){var n={};n[h.f[0]]=l;l=n}}c(q,l);var r=window.___cfg;if(r){c(q,r)}}}function e(o){for(var l in i){if(i.hasOwnProperty(l)){var n=i[l];
for(var m=0,k=n.length;m<k;++m){o(l,n[m])}}}}return{register:function(m,l,k,n){var o=i[m];if(!o){o=[];
i[m]=o}o.push({validators:l||{},callback:k,callOnUpdate:n});if(d&&k){k(b)}},get:function(k){if(k){return b[k]||{}
}return b},init:function(l,k){h=window.___jsl||{};c(b,l);g(b);var m=window.___config||{};c(b,m);e(function(r,q){var p=b[r];
if(p&&!k){var n=q.validators;for(var o in n){if(n.hasOwnProperty(o)){if(!n[o](p[o])){throw new Error('Invalid config value "'+p[o]+'" for parameter "'+o+'" in component "'+r+'"')
}}}}if(q.callback){q.callback(b)}});d=true},update:function(k,o){var n=[];e(function(q,p){if(k.hasOwnProperty(q)||(o&&b&&b[q])){if(p.callback&&p.callOnUpdate){n.push(p.callback)
}}});b=o?{}:b||{};c(b,k);for(var m=0,l=n.length;m<l;++m){n[m](b)}},clear:function(){gadgets.warn("This method is for testing.");
var k;h=k;b={};d=false}}}()}shindig.Auth=function(){var authToken=null;var trusted=null;function addParamsToToken(urlParams){var args=authToken.split("&");
for(var i=0;i<args.length;i++){var nameAndValue=args[i].split("=");if(nameAndValue.length===2){var name=nameAndValue[0];
var value=nameAndValue[1];if(value==="$"){value=encodeURIComponent(urlParams[name]);args[i]=name+"="+value
}}}authToken=args.join("&")}function init(configuration){var urlParams=gadgets.util.getUrlParameters();
var config=configuration["shindig.auth"]||{};if(config.authToken){authToken=config.authToken}else{if(urlParams.st){authToken=urlParams.st
}}if(authToken!==null){addParamsToToken(urlParams)}if(config.trustedJson){trusted=eval("("+config.trustedJson+")")
}}gadgets.config.register("shindig.auth",null,init);return{getSecurityToken:function(){return authToken
},updateSecurityToken:function(newToken){authToken=newToken},getTrustedData:function(){return trusted
}}};shindig.auth=new shindig.Auth();if(window.JSON&&window.JSON.parse&&window.JSON.stringify){gadgets.json=(function(){var a=/___$/;
function b(d,e){var c=this[d];return c}return{parse:function(d){try{return window.JSON.parse(d)}catch(c){return false
}},stringify:function(d){var h=window.JSON.stringify;function f(e){return h.call(this,e,b)}var g=(Array.prototype.toJSON&&h([{x:1}])==='"[{\\"x\\": 1}]"')?f:h;
try{return g(d,function(i,e){return !a.test(i)?e:void 0})}catch(c){return null}}}})()}gadgets.io=function(){var ioTransactionId=0;
var ajaxPollQ={};var config={};var oauthState;function makeXhr(){var x;if(typeof shindig!="undefined"&&shindig.xhrwrapper&&shindig.xhrwrapper.createXHR){return shindig.xhrwrapper.createXHR()
}else{if(typeof ActiveXObject!="undefined"){try{x=new ActiveXObject("Msxml2.XMLHTTP");if(!x){x=new ActiveXObject("Microsoft.XMLHTTP")
}return x}catch(e){}}}if(typeof XMLHttpRequest!="undefined"||window.XMLHttpRequest){return new window.XMLHttpRequest()
}else{throw ("no xhr available")}}function hadError(xobj,callback){if(xobj.readyState!==4){return true
}try{if(xobj.status!==200){var error=(""+xobj.status);if(xobj.responseText){error=error+" "+xobj.responseText
}callback({errors:[error],rc:xobj.status,text:xobj.responseText});return true}}catch(e){callback({errors:[e.number+" Error not specified"],rc:e.number,text:e.description});
return true}return false}function processNonProxiedResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return
}var data={body:xobj.responseText};callback(transformResponseData(params,data))}function processResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return
}var txt=xobj.responseText;var UNPARSEABLE_CRUFT="throw 1; < don't be evil' >";var offset=txt.indexOf(UNPARSEABLE_CRUFT)+UNPARSEABLE_CRUFT.length;
if(offset<UNPARSEABLE_CRUFT.length){return}txt=txt.substr(offset);var data=eval("("+txt+")");data=data[url];
if(data.oauthState){oauthState=data.oauthState}if(data.st){shindig.auth.updateSecurityToken(data.st)}callback(transformResponseData(params,data))
}function transformResponseData(params,data){var resp={text:data.body,rc:data.rc||200,headers:data.headers,oauthApprovalUrl:data.oauthApprovalUrl,oauthError:data.oauthError,oauthErrorText:data.oauthErrorText,oauthErrorTrace:data.oauthErrorTrace,oauthErrorUri:data.oauthErrorUri,oauthErrorExplanation:data.oauthErrorExplanation,errors:[]};
if(resp.rc<200||resp.rc>=400){resp.errors=[resp.rc+" Error"]}else{if(resp.text){if(resp.rc>=300&&resp.rc<400){params.CONTENT_TYPE="TEXT"
}processResponseData(params,resp)}}return resp}function processResponseData(params,resp){switch(params.CONTENT_TYPE){case"JSON":case"FEED":resp.data=gadgets.json.parse(resp.text);
if(!resp.data){resp.errors.push("500 Failed to parse JSON");resp.rc=500;resp.data=null}break;case"DOM":var dom;
if(typeof DOMParser!="undefined"){var parser=new DOMParser();dom=parser.parseFromString(resp.text,"text/xml");
if("parsererror"===dom.documentElement.nodeName){resp.errors.push("500 Failed to parse XML");resp.rc=500
}else{resp.data=dom}}else{if(typeof ActiveXObject!="undefined"){dom=new ActiveXObject("Microsoft.XMLDOM");
dom.async=false;dom.validateOnParse=false;dom.resolveExternals=false;if(!dom.loadXML(resp.text)){resp.errors.push("500 Failed to parse XML");
resp.rc=500}else{resp.data=dom}}else{resp.errors.push("500 Failed to parse XML because no DOM parser was available");
resp.rc=500}}break;default:resp.data=resp.text;break}}function makeXhrRequest(realUrl,proxyUrl,callback,paramData,method,params,processResponseFunction,opt_headers){var xhr=makeXhr();
if(proxyUrl.indexOf("//")==0){proxyUrl=document.location.protocol+proxyUrl}xhr.open(method,proxyUrl,true);
if(callback){var closureCallback=gadgets.util.makeClosure(null,processResponseFunction,realUrl,callback,params,xhr);
var shouldPoll=gadgets.util.shouldPollXhrReadyStateChange();if(shouldPoll){handleReadyState(xhr,closureCallback)
}else{xhr.onreadystatechange=closureCallback}}if(typeof opt_headers==="string"){contentType=opt_headers;
opt_headers={}}var headers=opt_headers||{};if(paramData!==null){var contentTypeHeader="Content-Type";
var contentType="application/x-www-form-urlencoded";if(!headers[contentTypeHeader]){headers[contentTypeHeader]=contentType
}}for(var headerName in headers){xhr.setRequestHeader(headerName,headers[headerName])}xhr.send(paramData)
}function handleReadyState(xhr,callback){var tempTid=ioTransactionId;var pollInterval=config.xhrPollIntervalMs||50;
ajaxPollQ[tempTid]=window.setInterval(function(){if(xhr&&xhr.readyState===4){window.clearInterval(ajaxPollQ[tempTid]);
delete ajaxPollQ[tempTid];if(callback){callback()}}},pollInterval);ioTransactionId++}function respondWithPreload(postData,params,callback){if(gadgets.io.preloaded_&&postData.httpMethod==="GET"){for(var i=0;
i<gadgets.io.preloaded_.length;i++){var preload=gadgets.io.preloaded_[i];if(preload&&(preload.id===postData.url)){delete gadgets.io.preloaded_[i];
if(preload.rc!==200){callback({rc:preload.rc,errors:[preload.rc+" Error"]})}else{if(preload.oauthState){oauthState=preload.oauthState
}var resp={body:preload.body,rc:preload.rc,headers:preload.headers,oauthApprovalUrl:preload.oauthApprovalUrl,oauthError:preload.oauthError,oauthErrorText:preload.oauthErrorText,oauthErrorTrace:preload.oauthErrorTrace,oauthErrorUri:preload.oauthErrorUri,oauthErrorExplanation:preload.oauthErrorExplanation,errors:[]};
callback(transformResponseData(params,resp))}return true}}}return false}function init(configuration){config=configuration["core.io"]||{}
}gadgets.config.register("core.io",null,init);return{makeRequest:function(url,callback,opt_params){var urlParams=gadgets.util.getUrlParameters();
if(urlParams.parent){var prefs=new gadgets.Prefs();var callbackName="rsmakeRequest_set_"+prefs.getString("id")+"_"+new Date().getTime();
gadgets.rpc.register(callbackName,function(data){if(callback){processResponseData(opt_params,data);callback(data)
}});gadgets.rpc.call("","rsmakeRequest_get",null,prefs.getString("id"),callbackName,url,opt_params);return
}var params=opt_params||{};var httpMethod=params.METHOD||"GET";var refreshInterval=params.REFRESH_INTERVAL;
var auth,st;if(params.AUTHORIZATION&&params.AUTHORIZATION!=="NONE"){auth=params.AUTHORIZATION.toLowerCase();
st=shindig.auth.getSecurityToken()}var signOwner=true;if(typeof params.SIGN_OWNER!=="undefined"){signOwner=params.SIGN_OWNER
}var signViewer=true;if(typeof params.SIGN_VIEWER!=="undefined"){signViewer=params.SIGN_VIEWER}var headers=params.HEADERS||{};
if(httpMethod==="POST"&&!headers["Content-Type"]){headers["Content-Type"]="application/x-www-form-urlencoded"
}var paramData={url:url,httpMethod:httpMethod,headers:gadgets.io.encodeValues(headers,false),postData:params.POST_DATA||"",authz:auth||"",st:st||"",contentType:params.CONTENT_TYPE||"TEXT",numEntries:params.NUM_ENTRIES||"3",getSummaries:!!params.GET_SUMMARIES,signOwner:signOwner,signViewer:signViewer,gadget:urlParams.url,container:urlParams.container||urlParams.synd||"default",bypassSpecCache:gadgets.util.getUrlParameters()["nocache"]||"",getFullHeaders:!!params.GET_FULL_HEADERS};
if(auth==="oauth"||auth==="signed"||auth==="oauth2"){if(gadgets.io.oauthReceivedCallbackUrl_){paramData.OAUTH_RECEIVED_CALLBACK=gadgets.io.oauthReceivedCallbackUrl_;
gadgets.io.oauthReceivedCallbackUrl_=null}paramData.oauthState=oauthState||"";for(var opt in params){if(params.hasOwnProperty(opt)){if(opt.indexOf("OAUTH_")===0||opt==="code"){paramData[opt]=params[opt]
}}}}st=st||shindig.auth.getSecurityToken();var opt_headers=st?{"X-Shindig-ST":st}:{};var proxyUrl="//%host%/gadgets/makeRequest";
proxyUrl=proxyUrl.replace("%host%",document.location.host);if(!respondWithPreload(paramData,params,callback)){if(httpMethod=="GET"&&typeof(refreshInterval)!="undefined"){paramData.refresh=refreshInterval
}if(httpMethod==="GET"){var extraparams="?"+gadgets.io.encodeValues(paramData);makeXhrRequest(url,proxyUrl+extraparams,callback,null,"GET",params,processResponse,opt_headers)
}else{var extraparams=gadgets.io.encodeValues(paramData);makeXhrRequest(url,proxyUrl,callback,extraparams,"POST",params,processResponse,opt_headers)
}}},makeNonProxiedRequest:function(relativeUrl,callback,opt_params,opt_headers){var params=opt_params||{};
makeXhrRequest(relativeUrl,relativeUrl,callback,params.POST_DATA,params.METHOD,params,processNonProxiedResponse,opt_headers)
},clearOAuthState:function(){oauthState=undefined},encodeValues:function(fields,opt_noEscaping){var escape=!opt_noEscaping;
var buf=[];var first=false;for(var i in fields){if(fields.hasOwnProperty(i)&&!/___$/.test(i)){if(!first){first=true
}else{buf.push("&")}buf.push(escape?encodeURIComponent(i):i);buf.push("=");buf.push(escape?encodeURIComponent(fields[i]):fields[i])
}}return buf.join("")},getProxyUrl:function(url,opt_params){var proxyUrl=config.proxyUrl;if(!proxyUrl){return proxyUrl
}var params=opt_params||{};var refresh=params.REFRESH_INTERVAL;if(typeof refresh=="undefined"){refresh="3600"
}var urlParams=gadgets.util.getUrlParameters();var st=shindig.auth.getSecurityToken();var authz=params[gadgets.io.RequestParameters.AUTHORIZATION];
var serviceName=params[gadgets.io.RequestParameters.OAUTH_SERVICE_NAME];var rewriteMimeParam=params.rewriteMime?"&rewriteMime="+encodeURIComponent(params.rewriteMime):"";
var authParam="";if(authz){if(authz==gadgets.io.AuthorizationType.OAUTH||authz==gadgets.io.AuthorizationType.OAUTH2){authParam="&authz="+authz.toLowerCase()+"&st="+encodeURIComponent(st)+"&OAUTH_SERVICE_NAME="+encodeURIComponent(serviceName)
}else{authParam="&authz="+authz.toLowerCase()}}var uri=shindig.uri(url);var path=uri.getPath();var fileName="";
var lSlash=path.lastIndexOf("/");if(lSlash!==-1){fileName=path.substring(lSlash)}var ret=proxyUrl.replace("%url%",encodeURIComponent(url)).replace("%host%",document.location.host).replace("%rawurl%",url).replace("%filename%",fileName).replace("%refresh%",encodeURIComponent(refresh)).replace("%gadget%",encodeURIComponent(urlParams.url)).replace("%container%",encodeURIComponent(urlParams.container||urlParams.synd||"default")).replace("%authz%",authParam).replace("%rewriteMime%",rewriteMimeParam);
if(ret.indexOf("//")==0){ret=window.location.protocol+ret}return ret},processResponse_:processResponse}
}();gadgets.io.RequestParameters=gadgets.util.makeEnum(["ALIAS","METHOD","CONTENT_TYPE","POST_DATA","HEADERS","AUTHORIZATION","NUM_ENTRIES","GET_SUMMARIES","GET_FULL_HEADERS","REFRESH_INTERVAL","SIGN_OWNER","SIGN_VIEWER","OAUTH_SERVICE_NAME","OAUTH_USE_TOKEN","OAUTH_TOKEN_NAME","OAUTH_REQUEST_TOKEN","OAUTH_REQUEST_TOKEN_SECRET","OAUTH_RECEIVED_CALLBACK"]);
gadgets.io.MethodType=gadgets.util.makeEnum(["GET","POST","PUT","DELETE","HEAD"]);gadgets.io.ContentType=gadgets.util.makeEnum(["TEXT","DOM","JSON","FEED"]);
gadgets.io.AuthorizationType=gadgets.util.makeEnum(["NONE","SIGNED","OAUTH","OAUTH2"]);gadgets.util=gadgets.util||{};
(function(){var a=[];gadgets.util.registerOnLoadHandler=function(b){a.push(b)};gadgets.util.runOnLoadHandlers=function(){gadgets.util.registerOnLoadHandler=function(e){e()
};for(var d=0,b=a.length;d<b;++d){try{a[d]()}catch(c){gadgets.warn("Could not fire onloadhandler "+c.message)
}}a=undefined}})();(function(){var j=null;var k={};var b=null;var g=gadgets.util.escapeString;var e={};
var i={};var f="en";var c="US";var a=0;function d(){var m=gadgets.util.getUrlParameters(b);for(var l in m){if(m.hasOwnProperty(l)){if(l.indexOf("up_")===0&&l.length>3){k[l.substr(3)]=String(m[l])
}else{if(l==="country"){c=m[l]}else{if(l==="lang"){f=m[l]}else{if(l==="mid"){a=m[l]}}}}}}}function h(){for(var l in i){if(typeof k[l]==="undefined"){k[l]=i[l]
}}}gadgets.Prefs=function(){if(!j){d();h();j=this}return j};gadgets.Prefs.setInternal_=function(n,p){var o=false;
if(typeof n==="string"){if(!k.hasOwnProperty(n)||k[n]!==p){o=true}k[n]=p}else{for(var m in n){if(n.hasOwnProperty(m)){var l=n[m];
if(!k.hasOwnProperty(m)||k[m]!==l){o=true}k[m]=l}}}return o};gadgets.Prefs.setMessages_=function(l){e=l
};gadgets.Prefs.setDefaultPrefs_=function(l){i=l};gadgets.Prefs.setUrlParams_=function(l){b=l;d();h()
};gadgets.Prefs.prototype.getString=function(l){if(l===".lang"){l="lang"}return k[l]?g(k[l]):""};gadgets.Prefs.prototype.getInt=function(l){var m=parseInt(k[l],10);
return isNaN(m)?0:m};gadgets.Prefs.prototype.getFloat=function(l){var m=parseFloat(k[l]);return isNaN(m)?0:m
};gadgets.Prefs.prototype.getBool=function(l){var m=k[l];if(m){return m==="true"||m===true||!!parseInt(m,10)
}return false};gadgets.Prefs.prototype.getArray=function(o){var p=k[o];if(p){var l=p.split("|");for(var n=0,m=l.length;
n<m;++n){l[n]=g(l[n].replace(/%7C/g,"|"))}return l}return[]};gadgets.Prefs.prototype.getMsg=function(l){return e[l]||""
};gadgets.Prefs.prototype.getCountry=function(){return c};gadgets.Prefs.prototype.getLang=function(){return f
};gadgets.Prefs.prototype.getModuleId=function(){return a}})();gadgets.log=(function(){var e=1;var a=2;
var f=3;var c=4;var d=function(i){b(e,i)};gadgets.warn=function(i){b(a,i)};gadgets.error=function(i){b(f,i)
};gadgets.setLogLevel=function(i){h=i};function b(j,i){if(typeof g==="undefined"){g=window.console?window.console:window.opera?window.opera.postError:null
}if(j<h||!g){return}if(j===a&&g.warn){g.warn(i)}else{if(j===f&&g.error){g.error(i)}else{if(g.log){g.log(i)
}}}}d.INFO=e;d.WARNING=a;d.NONE=c;var h=e;var g;return d})();gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.wpm){gadgets.rpctx.wpm=function(){var e,d;
var c=true;function b(h,i,g){if(typeof window.addEventListener!="undefined"){window.addEventListener(h,i,g)
}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("on"+h,i)}}}function a(h,i,g){if(window.removeEventListener){window.removeEventListener(h,i,g)
}else{if(window.detachEvent){window.detachEvent("on"+h,i)}}}function f(h){var i=gadgets.json.parse(h.data);
if(!i||!i.f){return}var g=gadgets.rpc.getTargetOrigin(i.f);if(c&&(typeof h.origin!=="undefined"?h.origin!==g:h.domain!==/^.+:\/\/([^:]+).*/.exec(g)[1])){return
}e(i,h.origin)}return{getCode:function(){return"wpm"},isParentVerifiable:function(){return true},init:function(h,i){function g(k){var j=k?k.rpc:{};
if(String(j.disableForceSecure)==="true"){c=false}}gadgets.config.register("rpc",null,g);e=h;d=i;b("message",f,false);
d("..",true);return true},setup:function(h,g){d(h,true);return true},call:function(h,k,j){var g=gadgets.rpc.getTargetOrigin(h);
var i=gadgets.rpc._getTargetWin(h);if(g){window.setTimeout(function(){i.postMessage(gadgets.json.stringify(j),g)
},0)}else{gadgets.error("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message")
}return true}}}()}if(!window.gadgets["rpc"]){gadgets.rpc=function(){var M="__cb";var V="";var W="__ack";
var f=500;var G=10;var b="|";var u="callback";var g="origin";var s="referer";var q={};var Z={};var D={};
var B={};var z=0;var l={};var m={};var T={};var d={};var n={};var E={};var e=null;var p=null;var A=(window.top!==window.self);
var v=window.name;var J=function(){};var r=null;var Q=0;var ab=1;var a=2;var x=window.console;var Y=x&&x.log?function(ah){x.log(ah)
}:function(){};var U=(function(){function ah(ai){return function(){Y(ai+": call ignored")}}return{getCode:function(){return"noop"
},isParentVerifiable:function(){return true},init:ah("init"),setup:ah("setup"),call:ah("call")}})();if(gadgets.util){d=gadgets.util.getUrlParameters()
}function K(){if(d.rpctx=="flash"){return gadgets.rpctx.flash}if(d.rpctx=="rmr"){return gadgets.rpctx.rmr
}return typeof window.postMessage==="function"?gadgets.rpctx.wpm:typeof window.postMessage==="object"?gadgets.rpctx.wpm:window.ActiveXObject?(gadgets.rpctx.flash?gadgets.rpctx.flash:gadgets.rpctx.nix):navigator.userAgent.indexOf("WebKit")>0?gadgets.rpctx.rmr:navigator.product==="Gecko"?gadgets.rpctx.frameElement:gadgets.rpctx.ifpc
}function k(am,ak){if(n[am]){return}var ai=H;if(!ak){ai=U}n[am]=ai;var ah=E[am]||[];for(var aj=0;aj<ah.length;
++aj){var al=ah[aj];al.t=F(am);ai.call(am,al.f,al)}E[am]=[]}var I=false,X=false;function O(){if(X){return
}function ah(){I=true}if(typeof window.addEventListener!="undefined"){window.addEventListener("unload",ah,false)
}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onunload",ah)}}X=true}function j(ah,al,ai,ak,aj){if(!B[al]||B[al]!==ai){gadgets.error("Invalid auth token. "+B[al]+" vs "+ai);
J(al,a)}aj.onunload=function(){if(m[al]&&!I){J(al,ab);gadgets.rpc.removeReceiver(al)}};O();ak=gadgets.json.parse(decodeURIComponent(ak))
}function ac(al,ai){if(al&&typeof al.s==="string"&&typeof al.f==="string"&&al.a instanceof Array){if(typeof arbitrate==="function"&&!arbitrate(al.s,al.f)){return
}if(B[al.f]){if(B[al.f]!==al.t){gadgets.error("Invalid auth token. "+B[al.f]+" vs "+al.t);J(al.f,a)}}if(al.s===W){window.setTimeout(function(){k(al.f,true)
},0);return}if(al.c){al[u]=function(am){gadgets.rpc.call(al.f,M,null,al.c,am)}}if(ai){var aj=t(ai);al[g]=ai;
var ak=al.r;if(!ak||t(ak)!=aj){ak=ai}al[s]=ak}var ah=(q[al.s]||q[V]).apply(al,al.a);if(al.c&&typeof ah!=="undefined"){gadgets.rpc.call(al.f,M,null,al.c,ah)
}}}function t(aj){if(!aj){return""}aj=aj.toLowerCase();if(aj.indexOf("//")==0){aj=window.location.protocol+aj
}if(aj.indexOf("://")==-1){aj=window.location.protocol+"//"+aj}var ak=aj.substring(aj.indexOf("://")+3);
var ah=ak.indexOf("/");if(ah!=-1){ak=ak.substring(0,ah)}var am=aj.substring(0,aj.indexOf("://"));var al="";
var an=ak.indexOf(":");if(an!=-1){var ai=ak.substring(an+1);ak=ak.substring(0,an);if((am==="http"&&ai!=="80")||(am==="https"&&ai!=="443")){al=":"+ai
}}return am+"://"+ak+al}function C(ai,ah){return"/"+ai+(ah?b+ah:"")}function y(ak){if(ak.charAt(0)=="/"){var ai=ak.indexOf(b);
var aj=ai>0?ak.substring(1,ai):ak.substring(1);var ah=ai>0?ak.substring(ai+1):null;return{id:aj,origin:ah}
}else{return null}}function ag(aj){if(typeof aj==="undefined"||aj===".."){return window.parent}var ai=y(aj);
if(ai){return window.frames[ai.id]}aj=String(aj);var ah=document.getElementById(aj);if(ah&&ah.contentWindow){return ah.contentWindow
}ah=window.frames[aj];if(ah&&!ah.closed){return ah}return null}function L(ak){var aj=null;var ah=P(ak);
if(ah){aj=ah}else{var ai=y(ak);if(ai){aj=ai.origin}else{if(ak==".."){aj=d.parent}else{aj=document.getElementById(ak).src
}}}return t(aj)}var H=K();q[V]=function(){Y("Unknown RPC service: "+this.s)};q[M]=function(ai,ah){var aj=l[ai];
if(aj){delete l[ai];aj.call(this,ah)}};function aa(aj,ah){if(m[aj]===true){return}if(typeof m[aj]==="undefined"){m[aj]=0
}var ai=ag(aj);if(aj===".."||ai!=null){if(H.setup(aj,ah)===true){m[aj]=true;return}}if(m[aj]!==true&&m[aj]++<G){window.setTimeout(function(){aa(aj,ah)
},f)}else{n[aj]=U;m[aj]=true}}var S={};function N(ai,al){var ak=ag(ai);if(!T[ai]||(T[ai]!==S&&ak.Function.prototype!==T[ai].constructor.prototype)){var aj=P(ai);
if(!!aj&&t(aj)!==t(window.location.href)){T[ai]=S;return false}try{var am=ak.gadgets;T[ai]=am.rpc.receiveSameDomain
}catch(ah){T[ai]=S;return false}}if(T[ai]&&T[ai]!==S){T[ai](al);return true}return false}function P(ai){var ah=Z[ai];
if(ah&&ah.substring(0,1)==="/"){if(ah.substring(1,2)==="/"){ah=document.location.protocol+ah}else{ah=document.location.protocol+"//"+document.location.host+ah
}}return ah}function af(ai,ah,aj){if(!!ah&&!/http(s)?:\/\/.+/.test(ah)){if(ah.indexOf("//")==0){ah=window.location.protocol+ah
}else{if(ah.charAt(0)=="/"){ah=window.location.protocol+"//"+window.location.host+ah}else{if(ah.indexOf("://")==-1){ah=window.location.protocol+"//"+ah
}}}}Z[ai]=ah;if(typeof aj!=="undefined"){D[ai]=!!aj}}function F(ah){return B[ah]}function c(ah,ai){ai=ai||"";
B[ah]=String(ai);aa(ah,ai)}function ae(ai){var ah=ai.passReferrer||"";var aj=ah.split(":",2);e=aj[0]||"none";
p=aj[1]||"origin"}function ad(ah){if(R(ah)){H=gadgets.rpctx.ifpc;H.init(ac,k)}}function R(ah){return String(ah.useLegacyProtocol)==="true"
}function h(ai,ah){function aj(am){var al=am?am.rpc:{};ae(al);var ak=al.parentRelayUrl||"";ak=t(d.parent||ah)+ak;
af("..",ak,R(al));ad(al);c("..",ai)}if(!d.parent&&ah){aj({});return}gadgets.config.register("rpc",null,aj);
if(d.parent){af("..",d.parent)}}function o(ai,am,ao){var al=null;if(ai.charAt(0)!="/"){if(!gadgets.util){return
}al=document.getElementById(ai);if(!al){throw new Error("Cannot set up gadgets.rpc receiver with ID: "+ai+", element not found.")
}}var ah=al&&al.src;var aj=am||gadgets.rpc.getOrigin(ah);af(ai,aj);var an=gadgets.util.getUrlParameters(ah);
var ak=ao||an.rpctoken;c(ai,ak)}function i(ah,aj,ak){if(ah===".."){var ai=ak||d.rpctoken||d.ifpctok||"";
h(ai,aj)}else{o(ah,aj,ak)}}function w(aj){if(e==="bidir"||(e==="c2p"&&aj==="..")||(e==="p2c"&&aj!=="..")){var ai=window.location.href;
var ak="?";if(p==="query"){ak="#"}else{if(p==="hash"){return ai}}var ah=ai.lastIndexOf(ak);ah=ah===-1?ai.length:ah;
return ai.substring(0,ah)}return null}return{config:function(ah){if(typeof ah.securityCallback==="function"){J=ah.securityCallback
}if(typeof ah.arbitrator==="function"){arbitrate=ah.arbitrator}},register:function(aj,ai){if(aj===M||aj===W){throw new Error("Cannot overwrite callback/ack service")
}if(aj===V){throw new Error("Cannot overwrite default service: use registerDefault")}var ah=q[aj];q[aj]=ai;
return ah},unregister:function(ah){if(ah===M||ah===W){throw new Error("Cannot delete callback/ack service")
}if(ah===V){throw new Error("Cannot delete default service: use unregisterDefault")}delete q[ah]},registerDefault:function(ah){q[V]=ah
},unregisterDefault:function(){delete q[V]},forceParentVerifiable:function(){if(!H.isParentVerifiable()){H=gadgets.rpctx.ifpc
}},call:function(ah,aj,ao,am){ah=ah||"..";var an="..";if(ah===".."){an=v}else{if(ah.charAt(0)=="/"){an=C(v,gadgets.rpc.getOrigin(window.location.href))
}}++z;if(ao){l[z]=ao}var al={s:aj,f:an,c:ao?z:0,a:Array.prototype.slice.call(arguments,3),t:B[ah],l:!!D[ah]};
var ai=w(ah);if(ai){al.r=ai}if(ah!==".."&&y(ah)==null&&!document.getElementById(ah)){return}if(N(ah,al)){return
}var ak=n[ah];if(!ak&&y(ah)!==null){ak=H}if(!ak){if(!E[ah]){E[ah]=[al]}else{E[ah].push(al)}return}if(D[ah]){ak=gadgets.rpctx.ifpc
}if(ak.call(ah,an,al)===false){n[ah]=U;H.call(ah,an,al)}},getRelayUrl:P,setRelayUrl:af,setAuthToken:c,setupReceiver:i,getAuthToken:F,removeReceiver:function(ah){delete Z[ah];
delete D[ah];delete B[ah];delete m[ah];delete T[ah];delete n[ah]},getRelayChannel:function(){return H.getCode()
},receive:function(ai,ah){if(ai.length>4){H._receiveMessage(ai,ac)}else{j.apply(null,ai.concat(ah))}},receiveSameDomain:function(ah){ah.a=Array.prototype.slice.call(ah.a);
window.setTimeout(function(){ac(ah)},0)},getOrigin:t,getTargetOrigin:L,init:function(){if(H.init(ac,k)===false){H=U
}if(A){i("..")}else{gadgets.config.register("rpc",null,function(ai){var ah=ai.rpc||{};ae(ah);ad(ah)})
}},_getTargetWin:ag,_parseSiblingId:y,ACK:W,RPC_ID:v||"..",SEC_ERROR_LOAD_TIMEOUT:Q,SEC_ERROR_FRAME_PHISH:ab,SEC_ERROR_FORGED_MSG:a}
}();gadgets.rpc.init()};