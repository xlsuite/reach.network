/*!
 * Listy for JW Player ~ version 1.0 ~ July 2014, James Herrieven ~ http://powered-by-haiku.co.uk
 * A JW Player plugin providing feature rich and customisable playlists
 * v1.1 ~ August 2014
 * v1.2 ~ 22 September 2014
 * v1.3 ~ 14 October 2014
 * v1.4 ~ 22 October 2014
 * v1.5 ~ 03 November 2014
 * v1.6 ~ 25 January 2015
 * v1.7 ~ 18 May 2015
 * v1.8 ~ 04 June 2015
 * v1.9 ~ 18 June 2015
 * v1.10 ~ 7 July 2015
 * v1.11 ~ 17 July 2015
 * v1.12 ~ 4 August 2015
 */

function y(h,g,b){var c=g||0,d=0;"string"==typeof h?(d=b||h.length,this.a=function(a){return h.charCodeAt(a+c)&255}):"unknown"==typeof h&&(d=b||IEBinary_getLength(h),this.a=function(a){return IEBinary_getByteAt(h,a+c)});this.l=function(a,f){for(var v=Array(f),b=0;b<f;b++)v[b]=this.a(a+b);return v};this.h=function(){return d};this.d=function(a,f){return 0!=(this.a(a)&1<<f)};this.w=function(a){a=(this.a(a+1)<<8)+this.a(a);0>a&&(a+=65536);return a};this.i=function(a){var f=this.a(a),b=this.a(a+1),d=
this.a(a+2);a=this.a(a+3);f=(((f<<8)+b<<8)+d<<8)+a;0>f&&(f+=4294967296);return f};this.o=function(a){var f=this.a(a),b=this.a(a+1);a=this.a(a+2);f=((f<<8)+b<<8)+a;0>f&&(f+=16777216);return f};this.c=function(a,f){for(var b=[],d=a,e=0;d<a+f;d++,e++)b[e]=String.fromCharCode(this.a(d));return b.join("")};this.e=function(a,b,d){a=this.l(a,b);switch(d.toLowerCase()){case "utf-16":case "utf-16le":case "utf-16be":b=d;var l,e=0,c=1;d=0;l=Math.min(l||a.length,a.length);254==a[0]&&255==a[1]?(b=!0,e=2):255==
a[0]&&254==a[1]&&(b=!1,e=2);b&&(c=0,d=1);b=[];for(var m=0;e<l;m++){var g=a[e+c],k=(g<<8)+a[e+d],e=e+2;if(0==k)break;else 216>g||224<=g?b[m]=String.fromCharCode(k):(g=(a[e+c]<<8)+a[e+d],e+=2,b[m]=String.fromCharCode(k,g))}a=new String(b.join(""));a.g=e;break;case "utf-8":l=0;e=Math.min(e||a.length,a.length);239==a[0]&&187==a[1]&&191==a[2]&&(l=3);c=[];for(d=0;l<e&&(b=a[l++],0!=b);d++)128>b?c[d]=String.fromCharCode(b):194<=b&&224>b?(m=a[l++],c[d]=String.fromCharCode(((b&31)<<6)+(m&63))):224<=b&&240>
b?(m=a[l++],k=a[l++],c[d]=String.fromCharCode(((b&255)<<12)+((m&63)<<6)+(k&63))):240<=b&&245>b&&(m=a[l++],k=a[l++],g=a[l++],b=((b&7)<<18)+((m&63)<<12)+((k&63)<<6)+(g&63)-65536,c[d]=String.fromCharCode((b>>10)+55296,(b&1023)+56320));a=new String(c.join(""));a.g=l;break;default:e=[];c=c||a.length;for(l=0;l<c;){d=a[l++];if(0==d)break;e[l-1]=String.fromCharCode(d)}a=new String(e.join(""));a.g=l}return a};this.f=function(a,b){b()}}var B=document.createElement("script");B.type="text/vbscript";
B.textContent="Function IEBinary_getByteAt(strBinary, iOffset)\r\n\tIEBinary_getByteAt = AscB(MidB(strBinary,iOffset+1,1))\r\nEnd Function\r\nFunction IEBinary_getLength(strBinary)\r\n\tIEBinary_getLength = LenB(strBinary)\r\nEnd Function\r\n";document.getElementsByTagName("head")[0].appendChild(B);function C(h,g,b){function c(a,b,e,c,f,g){var k=d();k?("undefined"===typeof g&&(g=!0),b&&("undefined"!=typeof k.onload?(k.onload=function(){"200"==k.status||"206"==k.status?(k.fileSize=f||k.getResponseHeader("Content-Length"),b(k)):e&&e({error:"xhr",xhr:k});k=null},e&&(k.onerror=function(){e({error:"xhr",xhr:k});k=null})):k.onreadystatechange=function(){4==k.readyState&&("200"==k.status||"206"==k.status?(k.fileSize=f||k.getResponseHeader("Content-Length"),b(k)):e&&e({error:"xhr",xhr:k}),k=null)}),
k.open("GET",a,g),k.overrideMimeType&&k.overrideMimeType("text/plain; charset=x-user-defined"),c&&k.setRequestHeader("Range","bytes="+c[0]+"-"+c[1]),k.setRequestHeader("If-Modified-Since","Sat, 1 Jan 1970 00:00:00 GMT"),k.send(null)):e&&e({error:"Unable to create XHR object"})}function d(){var a=null;window.XMLHttpRequest?a=new XMLHttpRequest:window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP"));return a}function a(a,b,e){var c=d();c?(b&&("undefined"!=typeof c.onload?(c.onload=function(){"200"==
c.status||"206"==c.status?b(this):e&&e({error:"xhr",xhr:c});c=null},e&&(c.onerror=function(){e({error:"xhr",xhr:c});c=null})):c.onreadystatechange=function(){4==c.readyState&&("200"==c.status||"206"==c.status?b(this):e&&e({error:"xhr",xhr:c}),c=null)}),c.open("HEAD",a,!0),c.send(null)):e&&e({error:"Unable to create XHR object"})}function f(a,d){var e,f;function g(a){var b=~~(a[0]/e)-f;a=~~(a[1]/e)+1+f;0>b&&(b=0);a>=blockTotal&&(a=blockTotal-1);return[b,a]}function h(f,g){for(;n[f[0]];)if(f[0]++,f[0]>
f[1]){g&&g();return}for(;n[f[1]];)if(f[1]--,f[0]>f[1]){g&&g();return}var m=[f[0]*e,(f[1]+1)*e-1];c(a,function(a){parseInt(a.getResponseHeader("Content-Length"),10)==d&&(f[0]=0,f[1]=blockTotal-1,m[0]=0,m[1]=d-1);a={data:a.N||a.responseText,offset:m[0]};for(var b=f[0];b<=f[1];b++)n[b]=a;g&&g()},b,m,k,!!g)}var k,r=new y("",0,d),n=[];e=e||2048;f="undefined"===typeof f?0:f;blockTotal=~~((d-1)/e)+1;for(var q in r)r.hasOwnProperty(q)&&"function"===typeof r[q]&&(this[q]=r[q]);this.a=function(a){var b;h(g([a,
a]));b=n[~~(a/e)];if("string"==typeof b.data)return b.data.charCodeAt(a-b.offset)&255;if("unknown"==typeof b.data)return IEBinary_getByteAt(b.data,a-b.offset)};this.f=function(a,b){h(g(a),b)}}(function(){a(h,function(a){a=parseInt(a.getResponseHeader("Content-Length"),10)||-1;g(new f(h,a))},b)})()};(function(h){h.FileAPIReader=function(g,b){return function(c,d){var a=b||new FileReader;a.onload=function(a){d(new y(a.target.result))};a.readAsBinaryString(g)}}})(this);(function(h){var g=h.p={},b={},c=[0,7];g.t=function(d){delete b[d]};g.s=function(){b={}};g.B=function(d,a,f){f=f||{};(f.dataReader||C)(d,function(g){g.f(c,function(){var c="ftypM4A"==g.c(4,7)?ID4:"ID3"==g.c(0,3)?ID3v2:ID3v1;c.m(g,function(){var e=f.tags,h=c.n(g,e),e=b[d]||{},m;for(m in h)h.hasOwnProperty(m)&&(e[m]=h[m]);b[d]=e;a&&a()})})},f.onError)};g.v=function(d){if(!b[d])return null;var a={},c;for(c in b[d])b[d].hasOwnProperty(c)&&(a[c]=b[d][c]);return a};g.A=function(d,a){return b[d]?b[d][a]:
null};h.ID3=h.p;g.loadTags=g.B;g.getAllTags=g.v;g.getTag=g.A;g.clearTags=g.t;g.clearAll=g.s})(this);(function(h){var g=h.q={},b="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");
g.m=function(b,d){var a=b.h();b.f([a-128-1,a],d)};g.n=function(c){var d=c.h()-128;if("TAG"==c.c(d,3)){var a=c.c(d+3,30).replace(/\0/g,""),f=c.c(d+33,30).replace(/\0/g,""),g=c.c(d+63,30).replace(/\0/g,""),l=c.c(d+93,4).replace(/\0/g,"");if(0==c.a(d+97+28))var e=c.c(d+97,28).replace(/\0/g,""),h=c.a(d+97+29);else e="",h=0;c=c.a(d+97+30);return{version:"1.1",title:a,artist:f,album:g,year:l,comment:e,track:h,genre:255>c?b[c]:""}}return{}};h.ID3v1=h.q})(this);(function(h){function g(a,b){var d=b.a(a),c=b.a(a+1),e=b.a(a+2);return b.a(a+3)&127|(e&127)<<7|(c&127)<<14|(d&127)<<21}var b=h.D={};b.b={};b.frames={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",
RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",
TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",
TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",
EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVAD:"Relative volume adjustment",RVRB:"Reverb",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",
TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMED:"Media type",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",
TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",
TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};var c={title:["TIT2","TT2"],artist:["TPE1",
"TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]},d=["title","artist","album","track"];b.m=function(a,b){a.f([0,g(6,a)],b)};b.n=function(a,f){var h=0,l=a.a(h+3);if(4<l)return{version:">2.4"};var e=a.a(h+4),t=a.d(h+5,7),m=a.d(h+5,6),u=a.d(h+5,5),k=g(h+6,a),h=h+10;if(m)var r=a.i(h),h=h+(r+4);var l={version:"2."+l+"."+e,major:l,revision:e,flags:{unsynchronisation:t,extended_header:m,experimental_indicator:u},
size:k},n;if(t)n={};else{for(var k=k-10,t=a,e=f,m={},u=l.major,r=[],q=0,p;p=(e||d)[q];q++)r=r.concat(c[p]||[p]);for(e=r;h<k;){r=null;q=t;p=h;var x=null;switch(u){case 2:n=q.c(p,3);var s=q.o(p+3),w=6;break;case 3:n=q.c(p,4);s=q.i(p+4);w=10;break;case 4:n=q.c(p,4),s=g(p+4,q),w=10}if(""==n)break;h+=w+s;0>e.indexOf(n)||(2<u&&(x={message:{P:q.d(p+8,6),I:q.d(p+8,5),M:q.d(p+8,4)},k:{K:q.d(p+8+1,7),F:q.d(p+8+1,3),H:q.d(p+8+1,2),C:q.d(p+8+1,1),u:q.d(p+8+1,0)}}),p+=w,x&&x.k.u&&(g(p,q),p+=4,s-=4),x&&x.k.C||
(n in b.b?r=b.b[n]:"T"==n[0]&&(r=b.b["T*"]),r=r?r(p,s,q,x):void 0,r={id:n,size:s,description:n in b.frames?b.frames[n]:"Unknown",data:r},n in m?(m[n].id&&(m[n]=[m[n]]),m[n].push(r)):m[n]=r))}n=m}for(var z in c)if(c.hasOwnProperty(z)){a:{s=c[z];"string"==typeof s&&(s=[s]);w=0;for(h=void 0;h=s[w];w++)if(h in n){a=n[h].data;break a}a=void 0}a&&(l[z]=a)}for(var A in n)n.hasOwnProperty(A)&&(l[A]=n[A]);return l};h.ID3v2=b})(this);(function(){function h(b){var c;switch(b){case 0:c="iso-8859-1";break;case 1:c="utf-16";break;case 2:c="utf-16be";break;case 3:c="utf-8"}return c}var g="32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. lable side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");
ID3v2.b.APIC=function(b,c,d,a,f){f=f||"3";a=b;var v=h(d.a(b));switch(f){case "2":var l=d.c(b+1,3);b+=4;break;case "3":case "4":l=d.e(b+1,c-(b-a),""),b+=1+l.g}f=d.a(b,1);f=g[f];v=d.e(b+1,c-(b-a),v);b+=1+v.g;return{format:l.toString(),type:f,description:v.toString(),data:d.l(b,a+c-b)}};ID3v2.b.COMM=function(b,c,d){var a=b,f=h(d.a(b)),g=d.c(b+1,3),l=d.e(b+4,c-4,f);b+=4+l.g;b=d.e(b,a+c-b,f);return{language:g,O:l.toString(),text:b.toString()}};ID3v2.b.COM=ID3v2.b.COMM;ID3v2.b.PIC=function(b,c,d,a){return ID3v2.b.APIC(b,
c,d,a,"2")};ID3v2.b.PCNT=function(b,c,d){return d.J(b)};ID3v2.b.CNT=ID3v2.b.PCNT;ID3v2.b["T*"]=function(b,c,d){var a=h(d.a(b));return d.e(b+1,c-1,a).toString()};ID3v2.b.TCON=function(b,c,d){return ID3v2.b["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")};ID3v2.b.TCO=ID3v2.b.TCON;ID3v2.b.USLT=function(b,c,d){var a=b,f=h(d.a(b)),g=d.c(b+1,3),l=d.e(b+4,c-4,f);b+=4+l.g;b=d.e(b,a+c-b,f);return{language:g,G:l.toString(),L:b.toString()}};ID3v2.b.ULT=ID3v2.b.USLT})();(function(h){function g(b,a,f,h){var l=b.i(a);if(0==l)h();else{var e=b.c(a+4,4);-1<["moov","udta","meta","ilst"].indexOf(e)?("meta"==e&&(a+=4),b.f([a+8,a+8+8],function(){g(b,a+8,l-8,h)})):b.f([a+(e in c.j?0:l),a+l+8],function(){g(b,a+l,f,h)})}}function b(d,a,f,g,h){h=void 0===h?"":h+"  ";for(var e=f;e<f+g;){var t=a.i(e);if(0==t)break;var m=a.c(e+4,4);if(-1<["moov","udta","meta","ilst"].indexOf(m)){"meta"==m&&(e+=4);b(d,a,e+8,t-8,h);break}if(c.j[m]){var u=a.o(e+16+1),k=c.j[m],u=c.types[u];if("trkn"==
m)d[k[0]]=a.a(e+16+11),d.count=a.a(e+16+13);else{var m=e+16+4+4,r=t-16-4-4,n;switch(u){case "text":n=a.e(m,r,"UTF-8");break;case "uint8":n=a.w(m);break;case "jpeg":case "png":n={k:"image/"+u,data:a.l(m,r)}}d[k[0]]="comment"===k[0]?{text:n}:n}}e+=t}}var c=h.r={};c.types={0:"uint8",1:"text",13:"jpeg",14:"png",21:"uint8"};c.j={"\u00a9alb":["album"],"\u00a9art":["artist"],"\u00a9ART":["artist"],aART:["artist"],"\u00a9day":["year"],"\u00a9nam":["title"],"\u00a9gen":["genre"],trkn:["track"],"\u00a9wrt":["composer"],
"\u00a9too":["encoder"],cprt:["copyright"],covr:["picture"],"\u00a9grp":["grouping"],keyw:["keyword"],"\u00a9lyr":["lyrics"],"\u00a9cmt":["comment"],tmpo:["tempo"],cpil:["compilation"],disk:["disc"]};c.m=function(b,a){b.f([0,7],function(){g(b,0,b.h(),a)})};c.n=function(c){var a={};b(a,c,0,c.h());return a};h.ID4=h.r})(this);

!function(jwplayer){var template=function(player,config,div){function freshLoad(e,t,i,s){var l=player.plugins.listy,a=l.state,r=l.refs,n=player.config||player.getConfig();a.pl={},a.pl.filtered=[],a.pl.removed=[],a.pl.original=e,createMasterFromOriginal(),r[player.id+"_listy_edit_name"]&&(r[player.id+"_listy_edit_name"].value=i),a.pl.current=buildListy(),config.features.shuffle&&config.features.shuffle.onLoad&&config.features.shuffle.onLoad===!0&&l.shufflePlaylist(),drawListy(),a.load_type=t,a.autoplay=s?!1:!n.autostart||n.autostart!==!0&&"true"!==n.autostart?!1:!0,firstLoad()}function hookListyParse(){var e=player.plugins.listy,t=document.getElementById(player.id+"_listy_parse");if(t){var i=t.contentDocument,s=i.getElementsByTagName("head")[0],l=document.createElement("script");l.src=e.urls.listy_parse_url+"?d="+top.document.location.host,s.appendChild(l)}}function deleteCurrentListy(e){{var t=player.plugins.listy,i=t.state;t.refs}t.isLoggedIn()?i.listy_parse.deleteListy(null,function(){loadListy(null,[null,e?e:null])}):alert("You need to be logged into Listy before saving the current playlist")}function updateMyListys(){var e=player.plugins.listy,t=e.state,i=e.refs,s=document.getElementById(player.id+"_listy_save_row_load");t.listy_parse.getMyListys(function(e){if(i[player.id+"_listy_edit_load"]){for(var l=i[player.id+"_listy_edit_load"].options.length;l>=0;l--)i[player.id+"_listy_edit_load"].remove(l);var a=0;for(var r in e){var n=document.createElement("option");n.value=r,n.innerHTML=""==e[r]?"- no name -":e[r],t.pl.id==r&&n.setAttribute("selected","selected"),i[player.id+"_listy_edit_load"].appendChild(n),a++}a>0?removeClass(s,"listy-hidden"):addClass(s,"listy-hidden")}})}function configureSkins(){var e=getSkinURL();getSkin(e,config.target),config.list.skin&&""!=config.list.skin&&(e=config.list.skin.indexOf(".xml")>-1?config.list.skin:jwplayer.utils.repo()+"skins/"+config.list.skin+".xml"),config.list.target&&getSkin(e,config.list.target)}function prefetchStart(e,t,i,s){top.listyCache[s]="Loading..."}function prefetchProgress(e,t,i,s,l){top.listyCache[s]=l+"%"}function prefetchComplete(e,t,i,s,l){top.console&&console.info("Listy // Prefetching complete ~ "+s+" ~ "+l)}function prefetchError(e,t,i,s){top.console&&console.info("Listy // Error prefetching video ~ "+s)}function prefetchFile(e,t,i,s,l,a,r){var n=player.plugins.listy,o=new XMLHttpRequest;if(o){try{prefetch_url=t,"http"==t.substring(0,4)&&(prefetch_url=n.urls.listy_prefetch_url,prefetch_url+="?t="+i,prefetch_url+="&d="+top.document.location.host,prefetch_url+="&f="+encodeURIComponent(t)),o.open("GET",prefetch_url,!0),o.responseType="blob",o.addEventListener("load",function(){{var i=player.plugins.listy;i.state}if(200===o.status){var s=window.URL||window.webkitURL;if(s&&s.createObjectURL)if("text/plain"==o.response.type)top.listyCache[t]="Error when prefetching",updatePrefetchQueue(e),r&&r(player,i,e,t,"An error occured when prefetching");else{var l=s.createObjectURL(o.response);top.listyCache[t]=l,updatePrefetchQueue(e),a&&a(player,i,e,t,l)}else top.listyCache[t]="Prefetch unsupported",updatePrefetchQueue(e),r&&r(player,i,e,t,"Prefetch unsupported in this browser")}else top.listyCache[t]=o.status,updatePrefetchQueue(e),r&&r(player,i,e,t,o.status)},!1)}catch(d){top.listyCache[t]=d,updatePrefetchQueue(e),r&&r(player,n,e,t,d)}o.addEventListener("loadstart",function(){prefetchStart(player,n,e,t),s&&s(player,n,e,t)});var p=0;o.addEventListener("progress",function(i){if(i.lengthComputable){var s=Math.round(i.loaded/i.total*100);s!=p&&(p=s,prefetchProgress(player,n,e,t,s),l&&l(player,n,e,t,s))}}),o.send()}}function createMasterFromOriginal(){var e=player.plugins.listy,t=e.state;t.pl.master={};for(var i=0,s=t.pl.original.length;s>i;i++){var l="id_"+buildKey(i);t.pl.original[i].mediaid?l=t.pl.original[i].mediaid:t.pl.original[i].mediaid=l,l.indexOf("/playlists/")>-1&&(l=l.substring(l.lastIndexOf("/")+1),t.pl.original[i].mediaid=l),addToMaster(l,t.pl.original[i])}t.pl.media_id_count=i}function addToMaster(e,t){var i=player.plugins.listy,s=i.state;top.listyCache||(top.listyCache={}),top.listyCache.assets||(top.listyCache.assets={}),top.listyCache.queues||(top.listyCache.queues={}),top.listyCache.requests||(top.listyCache.requests={}),s.pl.master[e]=t;var l=jwplayer.utils.isIE(8)||jwplayer.utils.isIE(9);if(isEnabled(config.prefetch)&&!jwplayer.utils.isMobile()&&!jwplayer.utils.isSafari()&&!l){var a=config.prefetch.begin,r=config.prefetch.progress,n=config.prefetch.complete,o=config.prefetch.error;prefetch(t,a,r,n,o)}}function getFileAndType(e){var t={};if(t.file=e.file,t.type=e.type,t["default"]=-1,e.sources){t.file=e.sources[0].file,t.type=e.sources[0].type,t["default"]=0;for(var i=0,s=e.sources.length;s>i;i++)e.sources[i]["default"]&&(e.sources[i]["default"]===!0||"true"===e.sources[i]["default"])&&(t.file=e.sources[i].file,t.type=e.sources[i].type,t["default"]=i)}return t}function prefetch(e,t,i,s,l){var a=getFileAndType(e);if(0==a.file.indexOf("/")||0==a.file.indexOf("http")){var r=config.prefetch.xdomain_support&&config.prefetch.xdomain_support===!0?!0:!1;if(("mp4"==a.type||"mp3"==a.type)&&(!checkXDomain(a.file)||checkXDomain(a.file)&&r)){var n=null||t,o=null||i,d=null||s||prefetchComplete,p=null||l||prefetchError;if(!top.listyCache[a.file]){top.listyCache[a.file]="prefetch";var u=e.mediaid,c=a.file;c.indexOf("http")>-1?(c=c.substring(c.indexOf("://")+3),c=c.substring(0,c.indexOf("/"))):c="/","mp3"!=a.type||checkXDomain(a.file)||ID3.loadTags(a.file,function(){var e=player.plugins.listy,t=e.state;t.pl.master[u].id3_meta=ID3.getAllTags(a.file)},{tags:["title","artist","album","picture"]}),e.prefetch_domain=c;var y={};y.a=c,y.b=e,y.c=a.file,y.d=a.type,y.e=n,y.f=o,y.g=d,y.h=p,top.listyCache.queues[c]||(top.listyCache.queues[c]=0),top.listyCache.requests[u]=y}}}}function updatePrefetchQueue(e){var t=e.prefetch_domain,i=e.mediaid;top.listyCache.requests[i]&&(top.listyCache.requests[i]=null),top.listyCache.queues[t]--,checkPrefetchQueue()}function checkPrefetchQueue(){for(var e=player.plugins.listy,t=e.state,i=t.pl&&t.pl.current?t.pl.current:[],s=config.prefetch&&config.prefetch.async_requests?parseInt(config.prefetch.async_requests,10):3,l=config.prefetch&&config.prefetch.look_ahead?e.getPlaylistIndex()+parseInt(config.prefetch.look_ahead,10):i.length,a=0,r=l;r>a;a++){var n=i[a],o=top.listyCache.requests[n]?top.listyCache.requests[n]:null;if(o&&!o.prefetch_process){var d=o.a;top.listyCache.queues[d]<s&&(o.prefetch_process=!0,top.listyCache.queues[d]++,prefetchFile(o.b,o.c,o.d,o.e,o.f,o.g,o.h))}}}function buildListy(){var e=[];for(var t in player.plugins.listy.state.pl.master)e.push(t);return e}function drawPlaceholders(){var e=player.plugins.listy,t=e.state,i=e.refs,s=document.getElementById(config.target);if(!s){s=document.createElement("div"),s.setAttribute("id",config.target);var l=player.container||player.getContainer(),a=l.parentNode;("flash"==t.jwp.mode||"flash_video"==t.jwp.mode)&&(l=a,a=l.parentNode),a.insertBefore(s,l.nextSibling)}if(config.list.target&&config.list.target!=config.target){var r=document.getElementById(config.list.target);r||(r=document.createElement("div"),r.setAttribute("id",config.list.target),insertAfter(r,s))}var n=uiTabBar()+uiListOptions()+uiAddItem()+uiAddYT()+uiAddSC()+uiUserOptions();s&&(s.innerHTML=n),config.users&&config.users.management&&(isEnabled(config.users)&&isEnabled(config.users.management)&&(i.sign_in=document.getElementById(player.id+"_listy_login"),i.sign_out=document.getElementById(player.id+"_listy_logout"),bind("click",i.sign_in,userNew,!1),bind("keyup",i.sign_in,checkForEnter,["userNew",!1]),bind("click",i.sign_out,userLogOut,[]),bind("keyup",i.sign_out,checkForEnter,["userLogOut",[]])),isEnabled(config.users)&&setTimeout(function(){hookListyParse()},500));for(var o=document.querySelectorAll("#"+config.target+" .listy-button"),d=0,p=o.length;p>d;d++){var u=o[d].getAttribute("id");i[u]=o[d]}for(var o=document.querySelectorAll("#"+config.target+" .listy-tab"),d=0,p=o.length;p>d;d++){var c=o[d].getAttribute("data-panel-id");bind("click",o[d],toggleTabs,[o[d],c]),bind("keyup",o[d],checkForEnter,["toggleTabs",[o[d],c]]),i[c]=o[d]}for(var o=document.querySelectorAll("#"+config.target+" .listy-panel-area"),d=0,p=o.length;p>d;d++){var c=o[d].getAttribute("id");i[c]=o[d]}for(var o=document.querySelectorAll("#"+config.target+" input[type=text],#"+config.target+" input[type=password],#"+config.target+" input[type=hidden],#"+config.target+" input[type=checkbox],#"+config.target+" input[type=radio],#"+config.target+" select,#"+config.target+" textarea"),d=0,p=o.length;p>d;d++){var y=o[d].getAttribute("id");i[y]=o[d]}for(var o=document.querySelectorAll("#"+config.target+" .listy-search-button"),d=0,p=o.length;p>d;d++){var f=o[d].getAttribute("data-field-id");bind("click",o[d],clearSearchField,f),bind("keyup",o[d],checkForEnter,["clearSearchField",f]),i[f+"_button"]=o[d]}bind("click",i[player.id+"_listy_pl_shuffle"],e.listyUI_shufflePlaylist),bind("keyup",i[player.id+"_listy_pl_shuffle"],checkForEnter,["listyUI_shufflePlaylist"]),bind("click",i[player.id+"_listy_pl_edit"],e.listyUI_editPlaylist),bind("keyup",i[player.id+"_listy_pl_edit"],checkForEnter,["listyUI_editPlaylist"]),bind("click",i[player.id+"_listy_pl_export"],e.listyUI_exportPlaylist),bind("keyup",i[player.id+"_listy_pl_export"],checkForEnter,["listyUI_exportPlaylist"]),bind("click",i[player.id+"_listy_add_custom"],toggleAddTabs,[player.id+"_listy_add_custom",player.id+"_listy_add_form"]),bind("keyup",i[player.id+"_listy_add_custom"],checkForEnter,["toggleAddTabs",[player.id+"_listy_add_custom",player.id+"_listy_add_form"]]),bind("click",i[player.id+"_listy_add_removed"],toggleAddTabs,[player.id+"_listy_add_removed",player.id+"_listy_add_list"]),bind("keyup",i[player.id+"_listy_add_removed"],checkForEnter,["toggleAddTabs",[player.id+"_listy_add_removed",player.id+"_listy_add_list"]]),bind("click",i[player.id+"_listy_add_panel"],updateAddOptions),bind("keyup",i[player.id+"_listy_add_panel"],checkForEnter,["updateAddOptions"]),bind("click",i[player.id+"_listy_add_preview"],previewCustomItem),bind("keyup",i[player.id+"_listy_add_preview"],checkForEnter,["previewCustomItem"]),bind("click",i[player.id+"_listy_add_next"],add,["custom","next"]),bind("keyup",i[player.id+"_listy_add_next"],checkForEnter,["add",["custom","next"]]),bind("click",i[player.id+"_listy_add_last"],add,["custom","last"]),bind("keyup",i[player.id+"_listy_add_last"],checkForEnter,["add",["custom","last"]]);var g=config.features.add&&config.features.add.options?config.features.add.options:{},_=g.form?g.form:{},m=_.buttons?_.buttons:{};for(var v in m)if("next"!=v&&"last"!=v&&"preview"!=v){var h=document.getElementById(player.id+"_listy_add_"+v);if(h){var b=m[v].action;b||(b=function(){top.console&&console.info('Listy // Missing "action" on "'+v+'" button')}),bind("click",h,b,["Listy // Hint - try jwplayer().plugins.listy.buildCustomItem();"])}}bind("click",i[player.id+"_listy_user_login"],userLogin),bind("keyup",i[player.id+"_listy_user_login"],checkForEnter,["userLogin"]),bind("click",i[player.id+"_listy_user_forgot_password"],userForgotPassword),bind("keyup",i[player.id+"_listy_user_forgot_password"],checkForEnter,["userForgotPassword"]),bind("click",i[player.id+"_listy_user_new_user"],userNew,!0),bind("keyup",i[player.id+"_listy_user_new_user"],checkForEnter,["userNew",!0]),bind("click",i[player.id+"_listy_user_register"],userRegister),bind("keyup",i[player.id+"_listy_user_register"],checkForEnter,["userRegister"]),bind("click",i[player.id+"_listy_pl_edit_new"],newListy),bind("keyup",i[player.id+"_listy_pl_edit_new"],checkForEnter,["newListy"]),bind("click",i[player.id+"_listy_pl_edit_delete"],deleteCurrentListy),bind("keyup",i[player.id+"_listy_pl_edit_delete"],checkForEnter,["deleteCurrentListy"]),bind("click",i[player.id+"_listy_pl_edit_save"],updateNameAndSave),bind("keyup",i[player.id+"_listy_pl_edit_save"],checkForEnter,["updateNameAndSave"]),bind("click",i[player.id+"_listy_pl_edit_load"],getNameAndLoad),bind("keyup",i[player.id+"_listy_pl_edit_load"],checkForEnter,["getNameAndLoad"]),bind("keyup",i[player.id+"_listy_pl_search"],search,"pl"),bind("keyup",i[player.id+"_listy_yt_search"],search,"yt"),bind("keyup",i[player.id+"_listy_sc_search"],search,"sc"),i[config.target]=s;var w=document.getElementById(config.list.target);i[config.list.target]=i.list=w}function newListy(){var e=player.plugins.listy,t=e.state,i=e.refs;t.pl.master={},t.pl.current=[],t.pl.removed=[],t.pl.filtered=[],t.pl.original=[],t.pl.id="",t.pl.name="",t.pl.media_id_count=0,i[player.id+"_listy_edit_name"].value="",drawListy()}function updateNameAndSave(){var e=player.plugins.listy,t=(e.state,e.refs),i=t[player.id+"_listy_edit_name"].value;e.setPlaylistName(i),e.saveListy()}function getNameAndLoad(){var e=player.plugins.listy,t=(e.state,e.refs),i=t[player.id+"_listy_edit_load"]?t[player.id+"_listy_edit_load"].value:"";loadListy(null,[i])}function loadListy(e,t){var i=player.plugins.listy,s=i.state,l=i.refs,a=player.config||player.getConfig();i.isLoggedIn()?s.listy_parse.loadListy(t[0],function(e){s.pl=e,remasterPlaylist(),l[player.id+"_listy_edit_name"]&&(l[player.id+"_listy_edit_name"].value=s.pl.name),drawListy(),s.load_type="inner",s.autoplay=!a.autostart||a.autostart!==!0&&"true"!==a.autostart?!1:!0,firstLoad(),updateMyListys(),t&t[1]&&t[1]()}):alert("You need to be logged into Listy before loading playlists")}function remasterPlaylist(){var e=player.plugins.listy,t=e.state,i=[];for(var s in t.pl.master)i.push(t.pl.master[s]);t.pl.original=i,createMasterFromOriginal()}function loadListyByName(e){var t=player.plugins.listy,i=t.state,s=t.refs,l=player.config||player.getConfig();t.isLoggedIn()?i.listy_parse.loadListyByName(e,i.pl,function(e){i.pl=e,remasterPlaylist(),s[player.id+"_listy_edit_name"]&&(s[player.id+"_listy_edit_name"].value=i.pl.name),drawListy(),i.load_type="inner",i.autoplay=!l.autostart||l.autostart!==!0&&"true"!==l.autostart?!1:!0,firstLoad(),updateMyListys()}):alert("You need to be logged into Listy before loading playlists")}function uiTabBar(){var e=player.plugins.listy,t=e.state,i=config.users&&config.users.management?isEnabled(config.users)&&isEnabled(config.users.management):!1,s=i?config.users.management:{},l=isEnabled(config.features.edit),a=config.list.target!=config.target+"_list"?!0:!1,r=isEnabled(config.features.shuffle)||l||isEnabled(config.features.search)||!a,n="";if(i||isEnabled(config.features.add)||isEnabled(config.features.add_from_yt)||isEnabled(config.features.add_from_sc)){var o="flash"==t.jwp.mode||parseInt(t.jwp.major,10)>6||6==parseInt(t.jwp.major,10)&&parseInt(t.jwp.minor,10)>=9?!0:!1;n+='<div class="listy-tab-bar">',n+='<ul class="listy-tab-set">',isEnabled(config.features.add_from_sc)&&(n+=uiTab(player.id+"_listy_sc_panel",getLabel(config.features.add_from_sc,"Add from SoundCloud"))),isEnabled(config.features.add_from_yt)&&o&&(n+=uiTab(player.id+"_listy_yt_panel",getLabel(config.features.add_from_yt,"Add from YouTube"))),isEnabled(config.features.add)&&(n+=uiTab(player.id+"_listy_add_panel",getLabel(config.features.add,"Add Item"),r?"":"active")),r&&(n+=uiTab(player.id+"_listy_pl_panel",config.list.label,"active")),i&&(n+=uiTab(player.id+"_listy_user_panel",getLabel(s.sign_in,"SIGN IN"),"listy-user-tab listy-hidden",player.id+"_listy_login"),n+=uiTab(player.id+"_listy_pl_panel",getLabel(s.sign_out,"SIGN OUT"),"listy-user-tab listy-hidden",player.id+"_listy_logout")),n+="</ul>",n+=uiSep(),n+="</div>"}return n}function userLogOut(){var e=player.plugins.listy,t=e.state,i=function(){t.listy_parse.logOut(function(){e.checkUserState()})};e.saveListy(i)}function userLogin(){var e=player.plugins.listy,t=e.state,i=e.refs,s=i[player.id+"_listy_user_email"].value,l=i[player.id+"_listy_user_password"].value;""!=s&&""!=l?t.listy_parse.logIn(s,l,null,function(t){e.checkUserState(player.id+"_listy_pl_panel",t)}):alert("Please enter your Email address and Password")}function registerUser(e,t,i){{var s=player.plugins.listy,l=s.state;s.refs}""!=e&&""!=t?l.listy_parse.registerUser(e,t,i,function(e){s.checkUserState(player.id+"_listy_pl_panel",e)}):alert("Please enter your Email address and Password")}function userForgotPassword(){var e=player.plugins.listy,t=e.state,i=e.refs,s=i[player.id+"_listy_user_email"].value;""!=s?t.listy_parse.resetPassword(s,function(){e.checkUserState(),alert("A password reset request has been sent to your Email address.\n\nPlease check your Email and follow the instructions.")}):alert('Please enter your Email address and then select the "Forgot password?" button')}function userNew(e,t){var i=player.plugins.listy,s=i.refs;s[player.id+"_listy_user_new_form"]||(s[player.id+"_listy_user_new_form"]=document.getElementById(player.id+"_listy_user_new_form")),s[player.id+"_listy_user_existing"]||(s[player.id+"_listy_user_existing"]=document.getElementById(player.id+"_listy_user_existing")),t?(addClass(s[player.id+"_listy_user_existing"],"listy-hidden"),removeClass(s[player.id+"_listy_user_new_form"],"listy-hidden")):(addClass(s[player.id+"_listy_user_new_form"],"listy-hidden"),removeClass(s[player.id+"_listy_user_existing"],"listy-hidden"))}function userRegister(){var e=player.plugins.listy,t=e.refs,i=config.users?isEnabled(config.users):!1,s=i&&config.users.management?i&&isEnabled(config.users.management):!1,l=s?config.users.management:{};if(s){var a=t[player.id+"_listy_user_email"].value,r=t[player.id+"_listy_user_password"].value,n=[],o={};if(""==a&&n.push("Email address: This is required."),""==r&&n.push("Password: This is required."),l.sign_in&&l.sign_in&&l.sign_in.fields)for(var d in l.sign_in.fields){var p=l.sign_in.fields[d],u=p.type?p.type:"";if("heading"!=u&&"paragraph"!=u){var c=validateField(d,p);o[c.nv.name]=c.nv.value,""!=c.error&&n.push(c.error)}}var y=l.sign_in&&l.sign_in.terms_of_use?l.sign_in.terms_of_use:null,f=buildTerms(y),c=validateField("terms_of_use",f.terms_of_use);o[c.nv.name]=c.nv.value,""!=c.error&&n.push(c.error),n.length>0?alert("The following fields have errors. Please review these and try again:\n\n"+n.join("\n")):registerUser(a,r,o)}}function parseID(e,t){for(var i=e.split(t),s="",l=0,a=i.length;a>l;l++){var r=i[l].toLowerCase();if(0==l)s=r;else{var n=r.substring(0,1),o=r.substring(1);s+=n.toUpperCase()+o}}return s}function validateField(e,t){var i=player.plugins.listy,s=(i.state,i.refs),l={};l.error="",l.nv={};var a=e.replace(/[_|-]/gm," ");a=parseID(a," ");var r=t.type?t.type:"text";if("heading"==r||"paragraph"==r);else if("radio"==r||"checkbox"==r){var n=[],o=[],d=0;for(var p in t.options){d++;var u=t.options[p],c=document.getElementById(player.id+"_listy_user_"+e+"_"+d);if(c&&c.checked){var y=u.value?u.value:p;o.push(y)}else u.required&&u.required!==!1&&n.push(u.required===!0?t.label+" "+u.label+" - This is required.":t.label+" "+u.required)}l.error=n.join("\n"),l.nv.name=a,l.nv.value=o}else s[player.id+"_listy_user_"+e]&&(l.nv.name=a,l.nv.value=s[player.id+"_listy_user_"+e].value,t.required&&t.required!==!1&&""==l.nv[a]&&(l.error=t.required===!0?t.label+" This is required.":t.label+" "+t.required));return l}function uiUserOptions(){var e=player.plugins.listy,t=(e.state,e.defaults),i=config.users?isEnabled(config.users):!1,s=i&&config.users.management?i&&isEnabled(config.users.management):!1,l=s?config.users.management:{},a=l.sign_in&&l.sign_in.buttons?l.sign_in.buttons:{};a.login||(a.login={enabled:!0}),a.new_user||(a.new_user={enabled:!0}),a.forgot_password||(a.forgot_password={enabled:!0});var r="";if(s){r+='<div class="listy-tab-panel listy-hidden" id="'+player.id+'_listy_user_panel">',r+=uiPanelArea(player.id+"_listy_login_form");for(var n in t.sign_in)r+='<div class="listy-form-row">',r+=uiField(n,t.sign_in[n],"user"),r+="</div>";r+=uiSep(),r+='<div class="listy-form-row" id="'+player.id+'_listy_user_existing">';for(var o in a)"login"==o?isDisabled(a.login)||(r+=uiButton(player.id+"_listy_user_login",getLabel(a.login,"Log in"))):"forgot_password"==o?isDisabled(a.forgot_password)||(r+=uiButton(player.id+"_listy_user_forgot_password",getLabel(a.forgot_password,"Forgot password?"))):"new_user"==o?isDisabled(a.new_user)||(r+=uiButton(player.id+"_listy_user_new_user",getLabel(a.new_user,"New User..."))):isDisabled(a[o])||(r+=uiButton(player.id+"_listy_user_"+o,getLabel(a[o],o)));if(r+="</div>",r+='<div class="listy-panel-area listy-hidden" id="'+player.id+'_listy_user_new_form">',l.sign_in&&l.sign_in&&l.sign_in.fields)for(var n in l.sign_in.fields)r+='<div class="listy-form-row">',r+=uiField(n,l.sign_in.fields[n],"user"),r+="</div>";var d=l.sign_in&&l.sign_in.terms_of_use?l.sign_in.terms_of_use:null,p=buildTerms(d);r+='<div class="listy-form-row">',r+=uiField("terms_of_use",p.terms_of_use,"user"),r+="</div>",r+=uiSep(),r+='<div class="listy-form-row">',isDisabled(a.register)||(r+=uiButton(player.id+"_listy_user_register",getLabel(a.register,"Register"))),r+="</div>",r+="</div>",r+="</div>",r+="</div>"}return i&&(r+='<iframe style="width:0;height:0;border:0;margin:0;padding:0;display:none;" id="'+player.id+'_listy_parse"></iframe>'),r}function buildTerms(e){var t=player.plugins.listy,i=(t.state,t.defaults),s={};return s.terms_of_use={},s.terms_of_use.label=e&&e.label?e.label:i.terms_of_use.label,s.terms_of_use.type="checkbox",s.terms_of_use.options={},s.terms_of_use.options.agree={},s.terms_of_use.options.agree.label=e&&e.text?e.text:i.terms_of_use.text,s.terms_of_use.options.agree.label+=' <a target="listy_terms" href="'+(e&&e.url?e.url:i.terms_of_use.url+"?d="+top.location.host)+'">',s.terms_of_use.options.agree.label+=e&&e.link_text?e.link_text:i.terms_of_use.link_text,s.terms_of_use.options.agree.label+="</a>",s.terms_of_use.options.agree.checked=!1,s.terms_of_use.options.agree.required=(e&&e.text?e.text:i.terms_of_use.text)+" "+(e&&e.link_text?e.link_text:i.terms_of_use.link_text),s}function uiListOptions(){var e=isEnabled(config.features.edit),t=config.features.edit&&config.features.edit.options?config.features.edit.options:{},i=config.features.edit&&config.features.edit.buttons?config.features.edit.buttons:{};e&&isDisabled(i.move_up)&&isDisabled(i.remove)&&isDisabled(i.move_down)&&(e=!1);var s=config.list.target!=config.target+"_list"?!0:!1,l=isEnabled(config.features.shuffle)||e||isEnabled(config.features.search)||!s,a="";return a+='<div class="listy-tab-panel'+(l?"":" listy-hidden")+'" id="'+player.id+'_listy_pl_panel">',e&&(isEnabled(t.save)||isEnabled(t.load)||isEnabled(t["delete"])||isEnabled(t["new"]))&&(a+='<div class="listy-panel-area listy-save-area listy-hidden" id="'+config.target+'_save">',isEnabled(t.save)&&(a+='<div class="listy-save-row">',a+=uiField("name",{label:"Current:"},"edit"),a+=uiButton(player.id+"_listy_pl_edit_save",getLabel(config.features.edit.options.save,"SAVE")),a+="</div>",a+=uiSep()),isEnabled(t.load)&&(a+='<div class="listy-save-row" id="'+player.id+'_listy_save_row_load">',a+=uiField("load",{label:"My playlists:",type:"select",options:{}},"edit"),a+=uiButton(player.id+"_listy_pl_edit_load",getLabel(config.features.edit.options.load,"LOAD")),a+="</div>",a+=uiSep()),(isEnabled(t["new"])||isEnabled(t["delete"]))&&(a+='<div class="listy-save-row">',isEnabled(t["new"])&&(a+=uiButton(player.id+"_listy_pl_edit_new",getLabel(config.features.edit.options["new"],"CREATE NEW"))),isEnabled(t["delete"])&&(a+=uiButton(player.id+"_listy_pl_edit_delete",getLabel(config.features.edit.options["delete"],"DELETE CURRENT"))),a+="</div>"),a+="</div>"),(isEnabled(config.features.shuffle)||e||isEnabled(config.features.search))&&(a+='<div class="listy-options-bar listy-pl-options">',isEnabled(config.features.shuffle)&&(a+=uiButton(player.id+"_listy_pl_shuffle",getLabel(config.features.shuffle,"SHUFFLE"))),e&&(a+=uiButton(player.id+"_listy_pl_edit",getLabel(config.features.edit,"EDIT"))),isEnabled(config.features["export"])&&(a+=uiButton(player.id+"_listy_pl_export",getLabel(config.features["export"],"EXPORT"))),isEnabled(config.features.search)&&(a+=uiSearchField(player.id+"_listy_pl_search")),a+=uiSep(),a+="</div>"),config.list.target==config.target+"_list"&&(a+='<div class="listy-panel-area listy-pl-area" id="'+config.target+'_list"></div>'),a+="</div>"}function uiAddItem(){var e=config.features.add&&config.features.add.options?config.features.add.options:{},t=e.form?e.form:{},i=e.from_removed?e.from_removed:{},s=t.buttons?t.buttons:{};s.next||(s.next={enabled:!0}),s.last||(s.last={enabled:!0}),s.preview||(s.preview={enabled:!0});var l=isEnabled(config.features.edit),a=config.list.target!=config.target+"_list"?!0:!1,r=isEnabled(config.features.shuffle)||l||isEnabled(config.features.search)||!a,n="";if(isEnabled(config.features.add)){n+='<div class="listy-tab-panel'+(r?" listy-hidden":"")+'" id="'+player.id+'_listy_add_panel">',isEnabled(config.features.edit)&&(n+='<div class="listy-options-bar listy-add-options">',n+=uiButton(player.id+"_listy_add_custom",getLabel(t,"New item")),isDisabled(i)||(n+=uiButton(player.id+"_listy_add_removed",getLabel(i,"From removed"))),n+=uiSep(),n+="</div>"),n+=uiPanelArea(player.id+"_listy_add_form");for(var o in config.fields)n+='<div class="listy-form-row">',n+=uiField(o,config.fields[o]),n+="</div>";n+=uiSep(),n+='<div class="listy-form-row">';for(var d in s)"next"==d?isDisabled(s.next)||(n+=uiButton(player.id+"_listy_add_next",getLabel(s.next,"Add as next"))):"last"==d?isDisabled(s.last)||(n+=uiButton(player.id+"_listy_add_last",getLabel(s.last,"Add as last"))):"preview"==d?isDisabled(s.preview)||(n+=uiButton(player.id+"_listy_add_preview",getLabel(s.preview,"Preview item"))):isDisabled(s[d])||(n+=uiButton(player.id+"_listy_add_"+d,getLabel(s[d],d)));n+="</div>",n+="</div>",n+=uiPanelArea(player.id+"_listy_add_list",!0,!0),n+="</div>"}return n}function uiAddYT(){var e="";return isEnabled(config.features.add_from_yt)&&(e+='<div class="listy-tab-panel listy-hidden" id="'+player.id+'_listy_yt_panel">',e+='<div class="listy-options-bar listy-yt-options">',e+=uiSearchField(player.id+"_listy_yt_search"),e+=uiSep(),e+="</div>",e+=uiPanelArea(player.id+"_listy_yt_results",!0),e+="</div>"),e}function uiAddSC(){var e="";return isEnabled(config.features.add_from_sc)&&(e+='<div class="listy-tab-panel listy-hidden" id="'+player.id+'_listy_sc_panel">',e+='<div class="listy-options-bar listy-sc-options">',e+=uiSearchField(player.id+"_listy_sc_search"),e+=uiSep(),e+="</div>",e+=uiPanelArea(player.id+"_listy_sc_results",!0),e+="</div>"),e}function uiTab(e,t,i,s){var l="";return l+='<li class="listy-tab'+(i?" "+i:"")+'" data-panel-id="'+e+'" tabindex="0"'+(s?' id="'+s+'"':"")+">"+t+"</li>"}function uiButton(e,t,i,s){var l="";return l+='<span class="listy-button'+(i?" "+i:"")+'" id="'+e+'" tabindex="0"'+(s?' data-info="'+s+'"':"")+">"+t+"</span>"}function uiSearchField(e){var t="";return t+='<div class="listy-search-wrapper">',t+='<input type="text" id="'+e+'" class="listy-search-field" />',t+='<span class="listy-search-button" data-field-id="'+e+'" tabindex="0"></span>',t+="</div>"}function uiPanelArea(e,t,i){var s="";return s+='<div class="listy-panel-area'+(i?" listy-hidden":"")+'" id="'+e+'">',t&&(s+="</div>"),s}function uiSep(){return'<div class="listy-playlistdivider"></div>'}function uiField(e,t,i){var s=player.plugins.listy,l=s.state,a=t.type?t.type:"text",r="";if("hidden"!=a&&"heading"!=a&&"paragraph"!=a&&(r+='<label for="'+player.id+"_listy_"+(i&&""!=i?i:"add")+"_"+e+'">',r+=getLabel(t,e+":"),r+=t.required&&t.required!==!1?' <span class="listy-required">*</span>':"",r+="</label>"),"text"==a||"hidden"==a||"password"==a)r+='<input type="'+a+'" id="'+player.id+"_listy_"+(i&&""!=i?i:"add")+"_"+e+'" value="'+(t.value?t.value:"")+'" />';else if("textarea"==a)r+='<textarea id="'+player.id+"_listy_"+(i&&""!=i?i:"add")+"_"+e+'">'+(t.value?t.value:"")+"</textarea>";else if("select"==a){r+='<select id="'+player.id+"_listy_"+(i&&""!=i?i:"add")+"_"+e+'">';for(var n in t.options){var o=!0,d=t.options[n];if(d.modes)if("string"==typeof d.modes)-1==d.modes.indexOf(l.jwp.mode)&&(o=!1);else for(var p in d.modes)if(p==l.jwp.mode){var u=d.modes[p];if(u.major&&parseInt(l.jwp.major,10)<parseInt(u.major)&&(o=!1),u.minor&&parseInt(l.jwp.major,10)==parseInt(u.major)&&parseInt(l.jwp.minor,10)<parseInt(u.minor)&&(o=!1),u.browser){for(var c=u.browser.split(","),y=!1,f=0,g=c.length;g>f;f++){var _=c[f];y||"chrome"!=_||(y=jwplayer.utils.isChrome()),y||"safari"!=_||(y=jwplayer.utils.isSafari()),y||"firefox"!=_||(y=jwplayer.utils.isFF()),y||"ie"!=_||(y=jwplayer.utils.isIE())}o&&!y&&(o=!1)}if(u.os){for(var m=u.os.split(","),v=!1,f=0,g=m.length;g>f;f++){var _=m[f];v||"iOS"!=_||(v=jwplayer.utils.isIOS()),v||"iPad"!=_||(v=jwplayer.utils.isIPad()),v||"iPod"!=_||(v=jwplayer.utils.isIPod()),v||"android"!=_||(v=jwplayer.utils.isAndroid())}o&&!v&&(o=!1)}}o&&(r+='<option value="'+n+'">'+d.label+"</option>")}r+="</select>"}else if("checkbox"==a||"radio"==a){r+='<div class="listy-radio-group">';var h=0;for(var n in t.options){h++;var d=t.options[n];r+='<input type="'+a+'" name="'+player.id+"_listy_"+(i&&""!=i?i:"add")+"_"+e+'" id="'+player.id+"_listy_"+(i&&""!=i?i:"add")+"_"+e+"_"+h+'" value="'+n+'"'+(isChecked(d)?' checked="checked"':"")+">",r+='<label for="'+player.id+"_listy_"+(i&&""!=i?i:"add")+"_"+e+"_"+h+'">',r+=d.required&&d.required!==!1?'<span class="listy-required">*</span> ':"",r+=d.label?d.label:n,r+="</label>"}r+="</div>"}else r+="heading"==a||"paragraph"==a?'<span class="listy-form-'+a+'">'+t.label+"</span>":a;return r}function getLabel(e,t){return e&&e.label?e.label:t}function isEnabled(e){var t=!e||e.enabled!==!0&&"true"!==e.enabled?!1:!0;return t===!0||"true"===t?!0:!1}function isChecked(e){var t=!e||e.checked!==!0&&"true"!==e.checked?!1:!0;return t===!0||"true"===t?!0:!1}function isDisabled(e){var t=!e||e.enabled!==!1&&"false"!==e.enabled?!0:!1;return!t}function clearSearchField(e,t){var i=player.plugins.listy,s=(i.state,i.refs);s[t].value="",s[t].focus(),removeClass(s[t+"_button"],"with-content"),t==player.id+"_listy_pl_search"&&drawListy()}function buildCustomItem(){var e=player.plugins.listy,t=e.state,i=e.refs,s={};s.sources=[];for(var l in config.fields)if(-1==l.indexOf("file")){var a=config.fields[l];if(a.type&&"radio"==a.type){for(var r="",n=1,o="' + player.id + '_listy_add_"+l+"_"+n;i[o];)i[o].checked&&(r=i[o].getAttribute("value")),n++,o="' + player.id + '_listy_add_"+l+"_"+n;s[l]=r}else if(a.type&&"checkbox"==a.type){for(var d=[],n=1,o="' + player.id + '_listy_add_"+l+"_"+n;i[o];)i[o].checked&&d.push(i[o].getAttribute("value")),n++,o="' + player.id + '_listy_add_"+l+"_"+n;s[l]=d}else if(!a.type||a.type&&"heading"!=a.type&&"paragraph"!=a.type){var p=i[player.id+"_listy_add_"+l].value;s[l]=p?p:""}}""==s.mediaid&&(s.mediaid="id_"+buildKey(t.pl.media_id_count));for(var l in config.fields)if(0==l.indexOf("file")){var p=i[player.id+"_listy_add_"+l].value;if(""!=p){var u={};u.file=p,"file_hls"==l&&(u.type="hls"),"file_rtmp"==l&&(u.type="rtmp"),"file_mp4"==l&&(u.type="mp4"),"file"==l&&(u.type=i[player.id+"_listy_add_type"].value),s.sources.push(u)}}return console.info(s),s}function add(e,t){var i=player.plugins.listy,s=i.state,l=i.refs,a=t[0],r=t[1],n="",o=null;"custom"==a&&(s.pl.media_id_count++,o=buildCustomItem()),("yt"==a||"sc"==a||"direct"==a)&&(o=t[2]),("custom"==a||"yt"==a||"sc"==a||"direct"==a)&&(n=o.mediaid,(!n||n&&""==n)&&(s.pl.media_id_count++,n="id_"+buildKey(s.pl.media_id_count),o.mediaid=n),"youtube"==o.type&&(o.file||(o.file=i.urls.yt_url+n)),addToMaster(n,o),config.events&&config.events.onAdd&&config.events.onAdd(i,player,o)),"removed"==a&&(n=t[2],removeFromRemove(n),l[player.id+"_listy_add_list"].innerHTML="");var d=s.current_item,p=getIndex(d)+1,u=[];if(s.pl.current.length>0)for(var c=0,y=s.pl.current.length;y>c;c++)"next"==r&&c==p&&u.push(n),u.push(s.pl.current[c]),"last"==r&&c==y-1&&u.push(n);else u.push(n);toggleTabs(null,[l[player.id+"_listy_pl_panel"],player.id+"_listy_pl_panel"]),updateListy(u,d),i.isLoggedIn()&&i.saveListy()}function previewCustomItem(){preview(null,[buildCustomItem()])
}function updateAddOptions(){var e=player.plugins.listy,t=e.state,i=e.refs;addClass(i[player.id+"_listy_add_custom"],"active"),removeClass(i[player.id+"_listy_add_removed"],"active"),addClass(i[player.id+"_listy_add_removed"],"listy-hidden"),addClass(i[player.id+"_listy_add_list"],"listy-hidden"),removeClass(i[player.id+"_listy_add_form"],"listy-hidden"),t.pl.removed.length>0&&removeClass(i[player.id+"_listy_add_removed"],"listy-hidden")}function shufflePL(){for(var e=player.plugins.listy,t=e.state,i=t.current_item,s=getIndex(i),l=[],a=[],r=0,n=t.pl.current.length;n>r;r++){var o=t.pl.current[r];if(s>=r)l.push(o);else{var d=buildKey();a.push(d+"|"+o)}}a.sort();for(var r=0,n=a.length;n>r;r++){var o=a[r].split("|")[1];l.push(o)}return l}function getSkinURL(){var e=player.config||player.getConfig(),t="";return config.skin&&""!=config.skin?t=config.skin.indexOf(".xml")>-1?config.skin:jwplayer.utils.repo()+"skins/"+config.skin+".xml":e.skin&&""!=e.skin&&(t=e.skin.indexOf(".xml")>-1?e.skin:jwplayer.utils.repo()+"skins/"+e.skin+".xml"),""==t&&(t=jwplayer.utils.repo()+"skins/six.xml"),t}function buildKey(e){var t=1,i=575;e=e||0===e?"0"+e:"0"+Math.floor(Math.random()*(i-t+1)+t);for(var s="",l=0,a=3-e.length;a>=l;l++)s+="0";return s+e}function search(e,t){var i=player.plugins.listy,s=i.refs;e=e||event;var l=s[player.id+"_listy_"+t+"_search"].value;13==e.keyCode?""!=l&&("yt"==t?i.listyUI_searchYT(l):"sc"==t?i.listyUI_searchSC(l):"pl"==t&&i.listyUI_searchPlaylist(l)):""!=l?addClass(s[player.id+"_listy_"+t+"_search_button"],"with-content"):(removeClass(s[player.id+"_listy_"+t+"_search_button"],"with-content"),"pl"==t&&drawListy())}function bindYTButtons(){for(var e=document.querySelectorAll("#"+config.target+" .listy-item-yt"),t=0,i=e.length;i>t;t++)bind("mouseover",e[t],ytOptions,[e[t]]);var s=document.getElementById(config.target+"_listy_yt_results_next");s&&bind("click",s,ytResultsPage,[s]);var l=document.getElementById(config.target+"_listy_yt_results_prev");l&&bind("click",l,ytResultsPage,[l])}function bindSCButtons(){for(var e=document.querySelectorAll("#"+config.target+" .listy-item-sc"),t=0,i=e.length;i>t;t++)bind("mouseover",e[t],scOptions,[e[t]]);var s=document.getElementById(config.target+"_listy_sc_results_next");s&&bind("click",s,scResultsPage,[s]);var l=document.getElementById(config.target+"_listy_sc_results_prev");l&&bind("click",l,scResultsPage,[l])}function drawListy(e,t,i){var s=player.plugins.listy,l=s.state,a=s.refs;t||(t="current"),i||(i="list");var r=config.list;if("removed"==t&&(r=s.defaults.list),a[i]){var n="";n+=repStuff(r.start_tpl,player,null);for(var o=0,d=l.pl[t].length;d>o;o++){var p=l.pl.master[l.pl[t][o]];n+=repStuff(r.item_tpl,player,p)}n+=repStuff(r.end_tpl,player,null),a[i].innerHTML=n}if("current"==t||"filtered"==t){updateCurrent();for(var u=null,c=document.querySelectorAll("#"+config.list.target+" ["+config.list.current_selector+"]"),y=0,f=c.length;f>y;y++){var g=c[y].getAttribute(config.list.current_selector);bind("click",c[y],load,g),bind("keyup",c[y],checkForEnter,["load",[g,c[y]]]),bind("mouseover",c[y],editOptions,[c[y],t]),g==e&&(u=c[y])}u&&u.focus()}if("removed"==t)for(var c=document.querySelectorAll("#"+config.target+" #"+player.id+"_listy_add_list ["+config.list.current_selector+"]"),y=0,f=c.length;f>y;y++)bind("click",c[y],removeOptions,[c[y]]),bind("keyup",c[y],checkForEnter,["removeOptions",[c[y]]]),bind("mouseover",c[y],removeOptions,[c[y]]);config.events&&config.events.onRedraw&&config.events.onRedraw(s,player,t)}function firstLoad(e){var t=player.plugins.listy,i=t.state;if(i.pl.current.length>0&&!e){var s=i.pl.current[0],l=JSON.stringify(i.pl.master[s]),a=[{file:"dummy.mp4",type:"mp4"}],r=[],n=JSON.parse(l);n.file="dummy.mp4",n.sources=a,n.type="mp4",n.action="firstload|"+n.mediaid,r.push(n),"ready"!=i.load_type&&(i.load_type="first"),player.load(r)}config.events&&config.events.onReady&&config.events.onReady(t,player)}function preview(e,t){var i=player.plugins.listy,s=i.state,l=t[0];"string"==typeof l&&(l=JSON.parse(Base64.decode(l)));var a=player.getPlaylist(),r=0,n=JSON.stringify(a[r]),o=[],d=JSON.parse(n);d.action="preview|"+d.mediaid;var p=l;p.action="current|"+p.mediaid;var u=p.type;"youtube"==u&&(p.file||(p.file=i.urls.yt_url+p.mediaid));var c=JSON.parse(n);c.action="preview|"+c.mediaid,o.push(d),o.push(p),o.push(c),s.load_type="inner",player.load(o).playlistItem(1)}function checkForEnter(e,params){e=e||event,13==e.keyCode&&(player.plugins.listy[params[0]]?player.plugins.listy[params[0]](e,params[1]):eval(params[0])(e,params[1]))}function load(e,t){var i=player.plugins.listy,s=i.state,l=[];if("string"==typeof t?l.push(t):l=t,!s.edit_playlist||s.edit_playlist&&s.edit_playlist!==!0){var a=[];if(sItemMediaID=isNumber(l[0])?l[0]<s.pl.current.length?s.pl.current[l[0]]:s.pl.current[0]:l[0],s.pl.master[sItemMediaID]){var r=[{file:"dummy.mp4",type:"mp4"}],n=JSON.stringify(s.pl.master[sItemMediaID]),o=JSON.parse(n);o.action="prev|"+sItemMediaID,o.file="dummy.mp4",o.type="mp4",o.sources=r;var d=JSON.parse(n),p=getFileAndType(d);if("mp4"==p.type||"mp3"==p.type){var u=p.file;top.listyCache&&top.listyCache[u]&&top.listyCache[u].length>5&&"blob:"==top.listyCache[u].substring(0,5)?-1==p["default"]?d.file=top.listyCache[u]:d.sources[p["default"]].file=top.listyCache[u]:(config.cache_bust&&config.cache_bust===!0&&(u+=u.indexOf("?")>-1?"&listy="+player.id:"?listy="+player.id),-1==p["default"]?d.file=u:d.sources[p["default"]].file=u)}d.action="current|"+sItemMediaID;var c=JSON.parse(n);c.action="next|"+sItemMediaID,c.file="dummy.mp4",c.type="mp4",c.sources=r,a.push(o),a.push(d),a.push(c),s.load_type="inner",player.load(a).playlistItem(1),s.current_item=sItemMediaID,updateCurrent(),config.events&&config.events.onPlay&&config.events.onPlay(i,player,sItemMediaID)}}else l[1]&&editOptions(null,l[1])}function toggleTabs(e,t){for(var i=player.plugins.listy,s=document.querySelectorAll("#"+config.target+" .listy-tab"),l=0,a=s.length;a>l;l++)s[l]!=t[0]?removeClass(s[l],"active"):addClass(s[l],"active");for(var s=document.querySelectorAll("#"+config.target+" .listy-tab-panel"),l=0,a=s.length;a>l;l++)addClass(s[l],"listy-hidden");var r=document.getElementById(t[1]);r&&removeClass(r,"listy-hidden"),i.listyUI_editPlaylist(!1)}function toggleAddTabs(e,t){var i=player.plugins.listy,s=i.refs;removeClass(s[player.id+"_listy_add_custom"],"active"),removeClass(s[player.id+"_listy_add_removed"],"active"),addClass(s[t[0]],"active"),addClass(s[player.id+"_listy_add_form"],"listy-hidden"),addClass(s[player.id+"_listy_add_list"],"listy-hidden"),removeClass(s[t[1]],"listy-hidden"),t[0]==player.id+"_listy_add_removed"&&drawListy(null,"removed",player.id+"_listy_add_list")}function hideEdits(e){e||(e="edit");for(var t=document.querySelectorAll("#"+config.list.target+" .listy-"+e+"-options"),i=0,s=t.length;s>i;i++)addClass(t[i],"listy-hidden")}function removeOptions(e,t){var i=player.plugins.listy,s=i.state,l=t[0].getAttribute(config.list.current_selector);if(t[0]){var a=document.getElementById(player.id+"_listy_edit_"+l);if(!a&&(t[0].style.position="relative",a=document.createElement("div"),a.setAttribute("class","listy-edit-options listy-hidden"),a.setAttribute("id",player.id+"_listy_edit_"+l),t[0].appendChild(a),a=document.getElementById(player.id+"_listy_edit_"+l))){bind("mouseout",a,editOut,[a,!0]);var r=config.features.add&&config.features.add.options&&config.features.add.options.from_removed&&config.features.add.options.from_removed.buttons?config.features.add.options.from_removed.buttons:{};r.preview||(r.preview={enabled:!0}),r.last||(r.last={enabled:!0}),r.next||(r.next={enabled:!0});var n="";n+='<div class="listy-edit-mask">&nbsp;</div>',n+='<div class="listy-edit-buttons">';for(var o in r)"preview"==o?isDisabled(r.preview)||(n+=uiButton(player.id+"_listy_remove_preview_"+l,getLabel(r.preview,"Preview"),"listy-remove-option")):"last"==o?isDisabled(r.last)||(n+=uiButton(player.id+"_listy_remove_last_"+l,getLabel(r.last,"+Last"),"listy-remove-option")):"next"==o?isDisabled(r.next)||(n+=uiButton(player.id+"_listy_remove_next_"+l,getLabel(r.next,"+Next"),"listy-remove-option")):isDisabled(r[o])||(n+=uiButton(player.id+"_listy_remove_"+o+"_"+l,getLabel(r[o],o),"listy-remove-option"));n+="</div>",a.innerHTML=n;var d=document.getElementById("#"+player.id+"_listy_remove_preview_"+l);if(d){var p=s.pl.master[l];bind("click",d,preview,[p]),bind("keyup",d,checkForEnter,["preview",[p]])}var u=document.getElementById(player.id+"_listy_remove_last_"+l);u&&(bind("click",u,add,["removed","last",l]),bind("keyup",u,checkForEnter,["add",["removed","last",l]]));var c=document.getElementById(player.id+"_listy_remove_next_"+l);c&&(bind("click",c,add,["removed","next",l]),bind("keyup",c,checkForEnter,["add",["removed","next",l]]));for(var o in r)if("preview"!=o&&"last"!=o&&"next"!=o){var y=document.getElementById(player.id+"_listy_remove_"+o+"_"+l);if(y){var f=r[o].action;f||(f=function(){top.console&&console.info('Listy: Missing "action" on "'+o+'" button')}),bind("click",y,f,[l])}}}a&&(hideEdits(),removeClass(a,"listy-hidden"))}}function ytResultsPage(e,t){var i=player.plugins.listy,s=(i.state,t[0].getAttribute("data-info")),l=s.split("||");i.listyUI_searchYT(l[2],l[1])}function ytOptions(e,t){var i=player.plugins.listy,s=(i.state,t[0].getAttribute("data-mediaid"));if(t[0]){var l=document.getElementById(player.id+"_listy_yt_"+s);if(!l){t[0].style.position="relative",l=document.createElement("div"),l.setAttribute("class","listy-ytedit-options listy-hidden"),l.setAttribute("id",player.id+"_listy_yt_"+s),t[0].appendChild(l),l=document.getElementById(player.id+"_listy_yt_"+s),bind("mouseout",l,editOut,[l,!0,"yt"]);var a=config.features.add_from_yt&&config.features.add_from_yt.buttons?config.features.add_from_yt.buttons:{};a.preview||(a.preview={enabled:!0}),a.last||(a.last={enabled:!0}),a.next||(a.next={enabled:!0});var r="";r+='<div class="listy-edit-mask">&nbsp;</div>',r+='<div class="listy-edit-buttons">';for(var n in a)"preview"==n?isDisabled(a.preview)||(r+=uiButton(player.id+"_listy_yt_preview_"+s,getLabel(a.preview,"Preview"),"listy-yt-option")):"last"==n?isDisabled(a.last)||(r+=uiButton(player.id+"_listy_yt_last_"+s,getLabel(a.last,"+Last"),"listy-yt-option")):"next"==n?isDisabled(a.next)||(r+=uiButton(player.id+"_listy_yt_next_"+s,getLabel(a.next,"+Next"),"listy-yt-option")):isDisabled(a[n])||(r+=uiButton(player.id+"_listy_yt_"+n+"_"+s,getLabel(a[n],n),"listy-yt-option"));r+="</div>",l.innerHTML=r;var o=t[0].getAttribute("data-item"),d=o&&""!=o?JSON.parse(Base64.decode(o)):{},p=document.getElementById(player.id+"_listy_yt_preview_"+s);p&&(bind("click",p,preview,[o]),bind("keyup",p,checkForEnter,["preview",[o]]));var u=document.getElementById(player.id+"_listy_yt_last_"+s);u&&(bind("click",u,add,["yt","last",d]),bind("keyup",u,checkForEnter,["add",["yt","last",d]]));var c=document.getElementById(player.id+"_listy_yt_next_"+s);c&&(bind("click",c,add,["yt","next",d]),bind("keyup",c,checkForEnter,["add",["yt","next",d]]));for(var n in a)if("preview"!=n&&"last"!=n&&"next"!=n){var y=document.getElementById(player.id+"_listy_yt_"+n+"_"+s);y&&bind("click",y,a[n].action,[d])}}hideEdits("ytedit"),removeClass(l,"listy-hidden")}}function scResultsPage(e,t){var i=player.plugins.listy,s=(i.state,t[0].getAttribute("data-info")),l=s.split("||");i.listyUI_searchSC(l[2],l[1])}function scOptions(e,t){var i=player.plugins.listy,s=(i.state,t[0].getAttribute("data-mediaid"));if(t[0]){var l=document.getElementById(player.id+"_listy_sc_"+s);if(!l){t[0].style.position="relative",l=document.createElement("div"),l.setAttribute("class","listy-scedit-options listy-hidden"),l.setAttribute("id",player.id+"_listy_sc_"+s),t[0].appendChild(l),l=document.getElementById(player.id+"_listy_sc_"+s),bind("mouseout",l,editOut,[l,!0,"sc"]);var a=config.features.add_from_sc&&config.features.add_from_sc.buttons?config.features.add_from_sc.buttons:{};a.preview||(a.preview={enabled:!0}),a.last||(a.last={enabled:!0}),a.next||(a.next={enabled:!0});var r="";r+='<div class="listy-edit-mask">&nbsp;</div>',r+='<div class="listy-edit-buttons">';for(var n in a)"preview"==n?isDisabled(a.preview)||(r+=uiButton(player.id+"_listy_sc_preview_"+s,getLabel(a.preview,"Preview"),"listy-sc-option")):"last"==n?isDisabled(a.last)||(r+=uiButton(player.id+"_listy_sc_last_"+s,getLabel(a.last,"+Last"),"listy-sc-option")):"next"==n?isDisabled(a.next)||(r+=uiButton(player.id+"_listy_sc_next_"+s,getLabel(a.next,"+Next"),"listy-sc-option")):isDisabled(a[n])||(r+=uiButton(player.id+"_listy_sc_"+n+"_"+s,getLabel(a[n],n),"listy-sc-option"));r+="</div>",l.innerHTML=r;var o=t[0].getAttribute("data-item"),d=o&&""!=o?JSON.parse(Base64.decode(o)):{},p=document.getElementById(player.id+"_listy_sc_preview_"+s);p&&(bind("click",p,preview,[o]),bind("keyup",p,checkForEnter,["preview",[o]]));var u=document.getElementById(player.id+"_listy_sc_last_"+s);u&&(bind("click",u,add,["sc","last",d]),bind("keyup",u,checkForEnter,["add",["sc","last",d]]));var c=document.getElementById(player.id+"_listy_sc_next_"+s);c&&(bind("click",c,add,["sc","next",d]),bind("keyup",c,checkForEnter,["add",["sc","next",d]]));for(var n in a)if("preview"!=n&&"last"!=n&&"next"!=n){var y=document.getElementById(player.id+"_listy_sc_"+n+"_"+s);y&&bind("click",y,a[n].action,[d])}}hideEdits("scedit"),removeClass(l,"listy-hidden")}}function editOptions(e,t){var i=player.plugins.listy,s=i.state;if(s.edit_playlist&&s.edit_playlist===!0){var l=t[0].getAttribute(config.list.current_selector);if(t[0]){var a=document.getElementById(player.id+"_listy_edit_"+l);if(!a){t[0].style.position="relative",a=document.createElement("div"),a.setAttribute("class","listy-edit-options listy-hidden"),a.setAttribute("id",player.id+"_listy_edit_"+l),t[0].appendChild(a),a=document.getElementById(player.id+"_listy_edit_"+l),bind("mouseout",a,editOut,[a]);var r=config.features.edit&&config.features.edit.buttons?config.features.edit.buttons:{};r.move_up||(r.move_up={enabled:!0}),r.remove||(r.remove={enabled:!0}),r.move_down||(r.move_down={enabled:!0});var n="";n+='<div class="listy-edit-mask">&nbsp;</div>',n+='<div class="listy-edit-buttons">';for(var o in r)"move_up"==o?!isDisabled(r.move_up)&&"current"==t[1]&&getIndex(l)>0&&(n+=uiButton(player.id+"_listy_edit_up_"+l,getLabel(r.move_up,""))):"remove"==o?isDisabled(r.remove)||(n+=uiButton(player.id+"_listy_edit_remove_"+l,getLabel(r.remove,"REMOVE"),"listy-button-remove")):"move_down"==o?!isDisabled(r.move_down)&&"current"==t[1]&&getIndex(l)<s.pl.current.length-1&&(n+=uiButton(player.id+"_listy_edit_down_"+l,getLabel(r.move_down,""))):isDisabled(r[o])||(n+=uiButton(player.id+"_listy_edit_"+o+"_"+l,getLabel(r[o],o),"listy-button-custom"));n+="</div>",a.innerHTML=n;var d=document.getElementById(player.id+"_listy_edit_up_"+l);d&&(bind("click",d,move,[l,-1]),bind("keyup",d,checkForEnter,["move",[l,-1]]));var p=document.getElementById(player.id+"_listy_edit_remove_"+l);p&&(bind("click",p,remove,[l,t[1]]),bind("keyup",p,checkForEnter,["remove",[l,t[1]]]));var u=document.getElementById(player.id+"_listy_edit_down_"+l);u&&(bind("click",u,move,[l,1]),bind("keyup",u,checkForEnter,["move",[l,1]]));for(var o in r)if("move_up"!=o&&"move_down"!=o&&"remove"!=o){var c=document.getElementById(player.id+"_listy_edit_"+o+"_"+l);if(c){var y=r[o].action;y||(y=function(){top.console&&console.info('Listy: Missing "action" on "'+o+'" button')}),bind("click",c,y,[l])}}}hideEdits(),removeClass(a,"listy-hidden")}}}function editOut(e,t){var i=player.plugins.listy.state,s=t[0],l=t[2]?t[2]:"edit";(t[1]||i.edit_playlist&&i.edit_playlist===!0)&&("string"==typeof s&&(s=document.getElementById(player.id+"_listy_"+l+"_"+s)),s&&addClass(s,"listy-hidden"))}function move(e,t){for(var i=player.plugins.listy,s=i.state,l=t[0],a=getIndex(l),r=a+t[1],n=[],o=0,d=s.pl.current.length;d>o;o++)o==r?(1==t[1]&&n.push(s.pl.current[o]),n.push(l),-1==t[1]&&n.push(s.pl.current[o])):o==a||n.push(s.pl.current[o]);updateListy(n,l)}function removeFromRemove(e){for(var t=player.plugins.listy,i=t.state,s=[],l=0,a=i.pl.removed.length;a>l;l++)i.pl.removed[l]!=e&&s.push(i.pl.removed[l]);i.pl.removed=s}function remove(e,t){var i=player.plugins.listy,s=i.state,l=[];"string"==typeof t?l.push(t):l=t;for(var a=[],r="",n=0,o=s.pl.current.length;o>n;n++)s.pl.current[n]==l[0]?(s.pl.removed.push(l[0]),o-1>n?r=s.pl.current[n+1]:n>0&&(r=s.pl.current[n-1])):a.push(s.pl.current[n]);l[1]&&"current"!=l[1]?(s.pl.current=a,search({keyCode:13},"pl")):updateListy(a,r),config.events&&config.events.onRemove&&config.events.onRemove(i,player,l[0])}function updateListy(e,t){var i=player.plugins.listy,s=i.state;s.pl.current=e,setTimeout(function(){drawListy(t)},5)}function removeClass(e,t){if(e){var i=e.getAttribute("class"),s=[];if(i&&""!=i){for(var l=i.split(" "),a=0,r=l.length;r>a;a++)l[a]!=t&&s.push(l[a]);var n=s.join(" ");e.setAttribute("class",n)}}}function addClass(e,t){if(e){var i=e.getAttribute("class");i&&""!=i?(i=" "+i+" ",-1==i.indexOf(" "+t+" ")&&(i+=t," "==i.substring(0,1)&&(i=i.substring(1)),e.setAttribute("class",i))):(i=t,e.setAttribute("class",i))}}function bind(e,t,i,s){if(t)if(t.addEventListener)t.addEventListener(e,function(e){i(e,s)},!1);else if(t.attachEvent)t.attachEvent("on"+e,function(e){i(e,s)});else{var l=t["on"+e];t["on"+e]=l&&"function"==typeof l?function(e){l&&l(e),i(e,s)}:function(e){i(e,s)}}}function updateCurrent(){for(var e=player.plugins.listy.state,t=e.current_item,i=document.querySelectorAll("#"+config.list.target+" ["+config.list.current_selector+"]"),s=0,l=i.length;l>s;s++){var a=i[s].getAttribute(config.list.current_selector);a!=t?removeClass(i[s],"active"):(addClass(i[s],"active"),scrollIntoView(i[s]))}checkPrefetchQueue()}function scrollIntoView(e){var t=player.plugins.listy,i=t.refs,s=e.offsetTop+e.offsetHeight,l=i[config.list.target].offsetHeight+i[config.list.target].scrollTop,a=i[config.list.target].scrollHeight-i[config.list.target].offsetHeight;if(e.offsetTop<i[config.list.target].scrollTop||s<i[config.list.target].scrollTop||e.offsetTop>l||s>l){var r=e.offsetTop-(i[config.list.target].offsetHeight/2-e.offsetHeight/2);scrollTo(i[config.list.target],r,a,3)}}function scrollTo(e,t,i,s){s=s||3;var l=parseInt(e.scrollTop,10),a=-s;t>l&&(a=s),l+=a,a>0&&l>t&&(l=t),0>a&&t>l&&(l=t),0>t&&(t=0),t>i&&(t=i),e.scrollTop=l,t!=l&&(ret=setTimeout(function(){scrollTo(e,t,i,s)},0))}function getIndex(e){for(var t=player.plugins.listy.state,i=-1,s=0,l=t.pl.current.length;l>s;s++)t.pl.current[s]==e&&(i=s);return i}function getNextPrev(e){for(var t=player.plugins.listy.state,i={},s=0,l=t.pl.current.length;l>s;s++)if(t.pl.current[s]==e){var a=0==s?l-1:s-1,r=s==l-1?0:s+1;i.prev=t.pl.current[a],i.next=t.pl.current[r]}return i}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function repStuff(sIn,player,item){var sOut="";if(sIn.indexOf("{{")>-1)for(var aOut=sIn.split("{{"),iO=0,iOE=aOut.length;iOE>iO;iO++)if(aOut[iO].indexOf("}}")>-1){var aRep=aOut[iO].split("}}");sOut+=eval(aRep[0]),sOut+=aRep[1]}else sOut+=aOut[iO];else sOut=sIn;return sOut}function checkAndLoad(){var e=player.plugins.listy,t=e.state,i=player.config||player.getConfig(),s=[],l=!0;for(var a in e.tubey.pl.got){var r=e.tubey.pl.got[a];"complete"==r.status?s=s.concat(r.list):l=!1}l===!0&&(player.setControls(e.tubey.controls),e.tubey["try-play"]=!i.autostart||i.autostart!==!0&&"true"!==i.autostart?!1:!0,"inner"==t.load_type,freshLoad(s,"inner","Default",!0))}function getPlaylist(e,t){var i=player.plugins.listy;i.tubey.pl.got[e]||(i.tubey.pl.got[e]={status:"processing",list:[]}),isNumber(e)?getSCPLI(e,function(e,t,s,l){e.length>0&&(i.tubey.pl.got[t].list=i.tubey.pl.got[t].list.concat(e)),l?getPlaylist(t,l):(i.tubey.pl.got[t].status="complete",checkAndLoad())},t):getYTPLI(e,function(e,t,s,l){e.length>0&&(i.tubey.pl.got[t].list=i.tubey.pl.got[t].list.concat(e)),l?getPlaylist(t,l):(i.tubey.pl.got[t].status="complete",checkAndLoad())},t)}function getSCPLI(e,t,i){var s=player.plugins.listy,l=(s.refs,"e71e48d7e5887847c44c618951388b6a");t?window.SC?(SC.initialize({client_id:l}),SC.get("/playlists/"+e,function(i){var s=null,a=null,r=i.tracks?i.tracks:i;if(i.next_href){for(var n=i.next_href.split("&"),o={},d=0,p=n.length;p>d;d++){var u=n[d].split("=");o[u[0]]=u[1]}o.offset&&(s=o.offset,o.limit&&parseInt(o.offset,10)>parseInt(o.limit,10)&&(a=parseInt(o.offset,10)-2*parseInt(o.limit,10)))}for(var c=[],y=0,f=r.length;f>y;y++){var g=r[y];if(g&&g.streamable){var _={};_.index=y+1,_.type="mp3",_.mediaid="sc"+g.id,_.duration=timeFormat(g.duration/1e3),_.image=g.artwork_url;var m=g.title;m=m.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),m=m.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),_.title=m,_.file=g.stream_url+"?client_id="+l,c.push(_)}}t(c,e,a,s)})):(top.console&&console.info("Listy // Oops! SC not available"),setTimeout(function(){getSCPLI(e,t,i)},1e3)):top.console&&console.info('Listy // Oops! "getSCPLI" requires a callback function as the second parameter.')}function getYTPLI(e,t,i){var s=player.plugins.listy;if(t){var l=s.urls.yt_playlist_url,a={};a.key="AIzaSyDzkwGeN2FhKzaQu1NnNxqL_jsLqSJmtd4",a.maxResults=50,a.playlistId=e,i&&(a.pageToken=i);for(var r in a)l+="&"+r+"="+a[r];getURL(l,function(i){var l=[],a=JSON.parse(i);if(!a.error&&a.items&&a.items.length>0)for(var r=0,n=a.items.length;n>r;r++){var o=a.items[r];if(o.snippet&&o.snippet.thumbnails){var d={};d.index=r+1,d.type="youtube",d.mediaid=o.snippet.resourceId.videoId,d.file=s.urls.yt_url+o.snippet.resourceId.videoId;var p=o.snippet.thumbnails?o.snippet.thumbnails.high?o.snippet.thumbnails.high:o.snippet.thumbnails.medium?o.snippet.thumbnails.medium:o.snippet.thumbnails["default"]:"";d.image=p.url;var u=o.snippet.title;u=u.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),u=u.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),d.title=u;var c=o.snippet.description;c=c.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),c=c.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),d.description=c,l.push(d)}}t(l,e,a.prevPageToken?a.prevPageToken:null,a.nextPageToken?a.nextPageToken:null)})}else top.console&&console.info('Listy // Oops! "getYTPLI" requires a callback function as the second parameter.')}function getURL(e,t){var i;if(checkXDomain(e)&&window.XDomainRequest){i=new window.XDomainRequest,i.ontimeout=i.onprogress=function(){},i.timeout=5e3;try{i.open("GET",e,!0),i.onload=function(){t(i.responseText)},i.send(null)}catch(s){top.console&&console.info("Listy: Oops! XDomainRequest: "+s+": "+e)}}else{i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{i.overrideMimeType&&i.overrideMimeType("text/plain"),i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&t(200==i.status?i.responseText:'{"error":"'+i.status+'"}')},i.send(null)}catch(s){t('{"error":"'+s+'"}')}}}function checkXDomain(e){return e&&e.indexOf("://")>=0&&e.split("/")[2]!=window.location.href.split("/")[2]}function timeFormat(e){if(isNumber(e)){if(e>0){var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60);return e=Math.floor(e%60),(t?t+":":"")+(10>i?"0":"")+i+":"+(10>e?"0":"")+e}return"00:00"}return e}function getSkin(e,t){var i=player.plugins.listy,s=i.skins,l=i.refs;s.refs[e]?t&&""!=t&&addClass(l[t],"listy-clear listy-"+s.refs[e].toLowerCase()):getURL(e,function(i){loadSkin(e,i,t)})}function loadSkin(e,t,i){var s=player.plugins.listy,l=s.refs,a=s.skins;if(!a.refs[e]){var r=getNM(t),n=r.get("skin"),o=r.clean(n[0]);a.refs[e]=o.name;var d=document.getElementById("jwp_skin_"+o.name.toLowerCase());if(!d){a.data[o.name]={};for(var p=r.get("component"),u=0,c=p.length;c>u;u++)if("playlist"==p[u].attr.name){for(var y=r.get("setting",[p[u]]),f=0,g=y.length;g>f;f++)"setting"==y[f].tag&&(a.data[o.name][y[f].attr.name]=y[f].attr.value);for(var _=r.get("element",[p[u]]),m=0,v=_.length;v>m;m++)"element"==_[m].tag&&(a.data[o.name][_[m].attr.name]=_[m].attr.src)}buildSkin(o.name)}}i&&""!=i&&addClass(l[i],"listy-clear listy-"+a.refs[e].toLowerCase())}function checkColor(e){var t=e;return"0x"==e.substring(0,2)&&(t=e.substring(2)),t}function buildSkin(e){var t=player.plugins.listy,i=t.skins.data,s={};s["{} .jw-icon-playlist"]="display:none!important;",s["*"]="box-sizing:border-box;",s["ul li,ol li"]="margin:0;",s["<.listy-clear:before,<.listy-clear:after"]='content:"";display:table;',s["<.listy-clear:before,<.listy-clear:after"]='content:"";display:table;',s["<.listy-clear:after"]="clear:both;",s[".listy-panel-area"]="background-color:#"+checkColor(i[e].backgroundcolor)+";overflow: auto;",s[".listy-tab-bar,.listy-options-bar"]="background-color:#"+checkColor(i[e].backgroundcolor)+";background-image:url("+i[e].itemActive+");font:"+i[e].fontsize+"px Arial, Helvetica, sans-serif;background-size:100% 100%;",s[".listy-tab-set"]="width:100%;list-style:none;margin:0px;padding:0px;",s[".listy-tab,.listy-button"]="float:left;background-color:#"+checkColor(i[e].titlecolor)+";background-image:url("+i[e].itemActive+");background-size: cover;color:#"+checkColor(i[e].fontcolor)+";font-size:"+i[e].titlesize+"px;font-weight:"+i[e].titleweight+";line-height:18px;padding:5px;margin:8px 0 8px 8px;cursor:pointer;border-radius:5px;border:2px solid #"+checkColor(i[e].titlecolor)+";",s[".listy-tab"]="float:right;margin:8px 8px 8px 0;",s[".listy-tab.active,.listy-button.active"]="background-image: url("+i[e].item+");color:#"+checkColor(i[e].titleactivecolor)+";",s[".listy-tab:hover,.listy-button:hover"]="background-image: url("+i[e].item+");color:#"+checkColor(i[e].titleovercolor)+";",s[".listy-search-wrapper"]="float:right;position:relative;margin:8px 8px 8px 0;width:50%;",s[".listy-search-field"]="font-size:"+i[e].titlesize+"px;font-weight:"+i[e].titleweight+";line-height:18px;padding:5px;padding-right:30px;margin:0;border-radius:5px;border:2px solid #"+checkColor(i[e].titlecolor)+";width:100%;",s[".listy-search-button"]="display:block;position:absolute;width:22px;height:22px;right:5px;top:5px;cursor:pointer;background-repeat: no-repeat;background-position: center;background-size: 20px 20px;background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABq0lEQVRIx8VVPUsDQRQMImIhksJCUomFhbWIhbWFhYiFWFiISKpgEUTETqxSHnLfB1f4C0QsxUosJEiwsBCLEIKIVQhBREKchbfwWLzbveTAheHC3ezM23m7m0LhP4bruiXHcc6BOtAD+sA7cAVsR1E0PrQ4BI5IdJCCJxSxOIy4b9s2F/oGHoE7oKmYdGCynEX8UEwkgx/gzPf9ohLdCt4/sCLanufNaMUFCeSuFIfQehI3DMMJcK4Fl/gXJtUfs6XXdHyxMvA+id8LgmBKZ3BL1fSxmlnDSGsyqrQVS3KLyK+mPYPoButFVWfwQeTnDAZrrA8nOoMGVdI1PUQwqMi+4feezsBneW4Z9uBezkHfFnTVrLIz8Kbu/z/4+ywes1hBvGFbtY6q5hPEy3TCByyiitZAbE/lOvgCLjH5ANgBTsUdxIX5tWJqMieWzCerz7RvRiY4lZN0stsyZ5a3uLZf1Pfsu5mJGHEcj4G8BOxiYhnPTTS/RH2wkqLKZKLZSVZajLmZqAbMpDmygRgQshL6YeViIE2Uf7sGduR0bgbMpAO4EC+Ormg4fgGoKjA0T+v/hwAAAABJRU5ErkJggg==);",s[".listy-search-button.with-content"]="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABgElEQVRIx8VVO07EMBTcGlEiDoA4AeIEiENwBpQyV0hNld9BcgAqDrByRYlcohVFqgjtzlslq5fJe0kWgYg0ihL7zdjjsb3Z/OdTVdVVURQJ0AAR6HrE/l8ifc4mruv6AsUZ0AL7BUifTGpWkZdleYOCsIL4hDzP5R2kdg15VEWT90JbdEV6W4J0HoDv74HAg/Sh72Da1Xuup95hNE9A6lmDthfg0VirzEpLq6Z7JFfWpey5kKv2BxJpR+mSuNE0v1B0T+uT6pHTAG/Ff1UvSLRAY3i7s0Qc8g+jvtEC0fF5B4KRiEdu1EYt0M1EzxQZyL0oC+dEwANsyVgA/551hDnOLBDnojizMd0Is0XNGnKxBbhbKTJa5IR99NJirckgQmuQ6OLjRlP+fWK7X3tR5Aij7yX+vav2dnKMG0fFVjrptHCERQTtQv46e1T0ozgddmq6W44iRxh4o5rg3g18XBu78+fHNYmEuX3hiC9fOGTX6Mp0LDr/yqRo/s2l/5vPAUrTqRSqVbDsAAAAAElFTkSuQmCC);",s[".listy-results-next-page"]="float:right;margin:8px;",s[".listy-edit-options,.listy-ytedit-options,.listy-scedit-options"]="font:"+i[e].fontsize+"px Arial, Helvetica, sans-serif;position:absolute;top:0;left:0;bottom:0;right:0;z-index:3;",s[".listy-edit-mask"]="z-index:1;position:absolute;background-color:#"+checkColor(i[e].backgroundcolor)+";top:2px;left:0;bottom:2px;right:0;opacity:0.7;",s[".listy-edit-buttons"]="z-index:2;position:absolute;top:0;left:0;bottom:0;right:0;padding-top:20px;text-align:center;",s[".listy-edit-options .listy-button,.listy-ytedit-options .listy-button,.listy-scedit-options .listy-button"]="float:none;min-width:30px;display:inline-block;",s[".listy-edit-options .listy-button-remove"]="width:75px;",s[".listy-edit-options .listy-remove-option"]="min-width:50px;width:auto;",s["#"+player.id+"_listy_add_form, #"+player.id+"_listy_login_form"]="font:"+i[e].fontsize+"px Arial, Helvetica, sans-serif;",s["#"+player.id+"_listy_add_form .listy-button, #"+player.id+"_listy_login_form #"+player.id+"_listy_user_login, #"+player.id+"_listy_login_form #"+player.id+"_listy_user_register, #"+player.id+"_listy_pl_edit_new"]="float:right;margin:8px 8px 16px 0;",s[".listy-form-row, .listy-save-row"]="float:left;padding:6px 0 0 6px;width:95%;box-sizing:border-box;",s[".listy-form-row label"]="float:left;display:inline-block;color:#"+checkColor(i[e].fontcolor)+";width:20%;text-align:right;padding:15px 0 0 0;box-sizing:border-box;",s[".listy-form-row a"]="color:#"+checkColor(i[e].titleovercolor)+";",s[".listy-form-heading,.listy-form-paragraph"]="float:left;display:inline-block;color:#"+checkColor(i[e].fontcolor)+";width:100%;font-weight:bold;font-size: 16px;padding:15px 0 0 25%;box-sizing:border-box;",s[".listy-form-paragraph"]="font-weight:normal;font-size: 12px;",s[".listy-form-row input[type=text],.listy-form-row input[type=password],.listy-form-row textarea,.listy-form-row select,.listy-radio-group"]="float:right;width:70%;font-size:"+i[e].titlesize+"px;font-weight:"+i[e].titleweight+";line-height:18px;padding:5px;margin:8px 8px 8px 0;border-radius:5px;border:2px solid #"+checkColor(i[e].titlecolor)+";",s[".listy-save-row label"]="float:left;display:inline-block;color:#"+checkColor(i[e].fontcolor)+";width:30%;text-align:right;padding:15px 10px 0 0;box-sizing:border-box;font:"+i[e].fontsize+"px Arial, Helvetica, sans-serif;",s[".listy-save-row input[type=text],.listy-save-row select"]="float:left;width:50%;font-size:"+i[e].titlesize+"px;font-weight:"+i[e].titleweight+";line-height:18px;padding:5px;margin:8px 8px 8px 0;border-radius:5px;border:2px solid #"+checkColor(i[e].titlecolor)+";",s[".listy-save-row .listy-button"]="float:right;margin:8px 8px 16px 0;",s[".listy-form-row textarea"]="height:50px;",s[".listy-radio-group input"]="float:left;clear:both;width:auto;",s[".listy-radio-group label"]="float:left;margin:0 0 0 5px;padding:1px;width:auto;",s[".listy-playlist"]="background-color:#"+checkColor(i[e].backgroundcolor)+";",s[".listy-pl-area"]="position:relative;",s[".listy-pl"]="width:100%;list-style:none;margin:0px;padding:0px;",s[".listy-item"]="background-image: url("+i[e].item+");background-size:100% 100%;cursor:pointer;width:100%;float:left;",s[".listy-item.active"]="color:#"+checkColor(i[e].activecolor)+";background-image:url("+i[e].itemActive+");",s[".listy-item:focus"]="outline-color:#"+checkColor(i[e].titleovercolor)+";",s[".listy-playlistdivider"]="background-image:url("+i[e].divider+");background-size:100% 2px;width:100%;height:2px;clear:both;",s[".listy-playlistimg"]="background-image:url("+i[e].itemImage+");height:54px;width:96px;margin:12px 0px 12px 12px;float:left;",s[".listy-fill"]="background-position:50% 50%;background-size:cover;",s[".listy-textwrapper"]="color:#"+checkColor(i[e].fontcolor)+";font:"+i[e].fontsize+"px Arial, Helvetica, sans-serif;display:block;font-weight:"+i[e].fontweight+";padding:10px 10px 10px 120px;",s[".listy-item:hover .listy-textwrapper"]="color:#"+checkColor(i[e].overcolor)+";",s[".listy-item.active .listy-textwrapper"]="color:#"+checkColor(i[e].activecolor)+";",s[".listy-title"]="display: block;color:#"+checkColor(i[e].titlecolor)+";font-size:"+i[e].titlesize+"px;font-weight:"+i[e].titleweight+";line-height:18px;",s[".listy-item:hover .listy-title"]="color:#"+checkColor(i[e].titleovercolor)+";",s[".listy-item.active .listy-title"]="color:#"+checkColor(i[e].titleactivecolor)+";",s[".listy-description"]="display: block;line-height: 20px;",s[".listy-duration"]="float:right;",s[".listy-hidden"]="display:none;";var l=document.createElement("style");
l.setAttribute("type","text/css"),l.setAttribute("id","jwp_skin_"+e.toLowerCase()),document.getElementsByTagName("head")[0].appendChild(l);var a="";for(var r in s)for(var n=r.split(","),o=0,d=n.length;d>o;o++){var p=n[o],u=" ";"<"==p.substring(0,1)&&(p=p.substring(1),u=""),a+=".listy-"+e.toLowerCase()+u+p+"{",a+=s[r],a+="}"}l.styleSheet?l.styleSheet.cssText=a:l.innerHTML=a}function addCSSRule(e,t,i){e.insertRule?e.insertRule(t+"{"+i+"}"):e.addRule(t,i)}function insertAfter(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function getNM(e){var t=["?xml","![cdata[","!--","img","source","track","br","hr","input","link","meta","basefont","base","area","param","col"],i=["!--","--","![endif]","![cdata[","script","style","link"];e=e&&""!=e?e:document.body.innerHTML;var s=e.split("<"),l="",a=0,r={map:{},init:function(){for(var e in s)if(""!=s[e]&&s[e].indexOf(">")>-1){var r=s[e].substring(0,s[e].indexOf(">")),n=s[e].substring(s[e].indexOf(">")+1),o=!1,d=!1,p=!1;if(!this.ignoreTags(i,r)){r=r.replace(/(\r\n|\n|\r|\t)/gm,""),a++,aTD=r.split(" ");var u=aTD[0].toLowerCase(),c="",y="";if("/"==r.substring(r.length-1)||"?"==r.substring(r.length-1)||this.zcont(t,u))c=l+"~"+u+"@"+a,y=c,("/"==r.substring(r.length-1)||"?"==r.substring(r.length-1))&&(r=r.substring(0,r.length-1)),d=!0;else if("/"==u.substring(0,1))if(this.zcont(t,u.substring(1)));else{p=!0;var f=l.split("~"),g=f.length;l="";for(var _=g-1,m=1;_>m;m++)l+="~"+f[m];c=l}else o=!0,l+="~"+u+"@"+a,c=l;for(c=c.toLowerCase();c.lastIndexOf("~")>-1;){var v={},h=[],b=[],w=[];this.map[c]&&(v=this.map[c],h=v.family,b=v.html,w=v.content),v.fulltag||(v.fulltag=r);var x="";o&&(x=l),d&&(x=y),h.push(x),b.push("<"+s[e]),w.push(n),v.family=h,v.html=b,v.content=w,""!=c&&(this.map[c]=v),c=0!=c.lastIndexOf("~")?c.substring(0,c.lastIndexOf("~")):""}}}for(var k in this.map){var L=this.map[k].fulltag,C=L.split(" "),E=C[0].toLowerCase();this.map[k].attr={};for(var I=0,A=C.length;A>I;I++){var S=C[I],T=!1,B='"',O=S.indexOf("=");if(O>-1){T=!0,S.indexOf("='")==O&&(B="'");var P=S.substring(S.length-1)==B,F=S.substring(S.length-2)=="\\"+B;if(!P||F)for(;A>I&&(!P||F);)I++,A>I&&(S+=" "+C[I]),P=S.substring(S.length-1)==B,F=S.substring(S.length-2)=="\\"+B}if(T){var j=S.substring(0,S.indexOf("=")),q=S.substring(S.indexOf("=")+1);q.substring(0,1)==B&&(q=q.substring(1)),q=q.length>1&&q.substring(q.length-1)==B?q.substring(0,q.length-1):"",this.map[k].attr[j.toLowerCase()]=q}}this.zcont(t,E)||(this.map[k].family.push(""),this.map[k].content.push(""),this.map[k].html.push("</"+E+">")),this.map[k].tag=E,this.map[k].key=k}},ignoreTags:function(e,t){var i=!1;for(var s in e){var l=e[s];0==t.indexOf(l)?i=!0:0==t.indexOf("/"+l)&&(i=!0)}return i},zcont:function(e,t,i){for(var s=0,l=e.length;l>s;s++)if(e[s])if(i){if(e[s]==t)return!0}else if(e[s].toLowerCase()==t.toLowerCase())return!0},get:function(e,t){var i=[],s=e.split(" ");for(var l in s){var a="|",r="",n="";i=[],e=s[l],e.indexOf(".")>-1&&(r=e.substring(e.indexOf(".")+1),e=e.substring(0,e.indexOf("."))),e.indexOf("#")>-1&&(n=e.substring(e.indexOf("#")+1),e=e.substring(0,e.indexOf("#"))),e=e.toLowerCase(),t&&0!=t.length||(t=[{key:""}]);for(var o in t){var d=t[o].key+"~";for(var p in this.map){var u=!1;if(""==d?u=!0:0==(this.map[p].key+"~").indexOf(d)&&(u=!0),u){var c=a.indexOf("|"+p+"|")>-1?!0:!1;if(!c&&1==p.substring(p.lastIndexOf("~")).indexOf(e)){var y=!0;if(""!=r)if(this.map[p].attr&&this.map[p].attr["class"]){var f=this.map[p].attr["class"].replace(" ","|");-1==("|"+f+"|").indexOf("|"+r+"|")&&(y=!1)}else y=!1;""!=n&&(this.map[p].attr&&this.map[p].attr.id?-1==this.map[p].attr.id.indexOf(n)&&(y=!1):y=!1),y&&(a+=p+"|",i.push(this.map[p]))}}}}t=i}return i},clean:function(e){var t={};for(var i in e)if("attr"==i)for(var s in e[i]){var l=s;0==l.indexOf("data-")&&(l=l.substring(5)),"class"!=l&&(t[l]=e[i][s])}return t}};return r.init(),r}var yt_api=document.getElementById("yt_iframe_api");if(!yt_api){var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api",tag.id="yt_iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}if(config.tubey||config.features&&config.features.add_from_sc&&isEnabled(config.features.add_from_sc)){var sc_api=document.getElementById("sc_sdk");if(!sc_api){var tag=document.createElement("script");tag.src="//connect.soundcloud.com/sdk.js",tag.id="sc_sdk";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}}player.onReady(function(){var e=player.plugins.listy,t=e.state,i=e.defaults;e.tubey={},t.jwp={},t.jwp.version=jwplayer.version;var s=t.jwp.version.split(".");s.length>0&&(t.jwp.major=s[0]),s.length>1&&(t.jwp.minor=s[1]),t.jwp.mode=player.getRenderingMode(),player.getProvider&&(t.jwp.mode=player.getProvider().name),(!config.target||config.target&&""==config.target)&&(config.target=player.id+"_listy"),config.list||(config.list={}),(!config.list.target||config.list.target&&""==config.list.target)&&(config.list.target=config.target+"_list");for(var l in i.list)config.list[l]||(config.list[l]=i.list[l]);config.features||(config.features={}),config.fields=config.features.add&&config.features.add.options&&config.features.add.options.form&&config.features.add.options.form.fields?config.features.add.options.form.fields:{};for(var a in i.fields)config.fields[a]||(config.fields[a]=i.fields[a]);drawPlaceholders(),configureSkins();var r=player.config||player.getConfig();if(r.file&&"use-tubey"==r.file){e.tubey.pl={get:[],got:{}},e.tubey.controls=player.getControls(),player.setControls(!1),player.load({file:"use-tubey",type:"mp4",image:config.tubey.image?config.tubey.image:"//www.dev.powered-by-haiku.co.uk/solutions/tubey/img/use-tubey.jpg",title:config.tubey.title?config.tubey.title:"Loading the playlist",description:config.tubey.description?config.tubey.description:"Please wait..."}),"string"==typeof config.tubey.playlist?e.tubey.pl.get.push(config.tubey.playlist):e.tubey.pl.get=config.tubey.playlist;for(var n=0,o=e.tubey.pl.get.length;o>n;n++){var d=e.tubey.pl.get[n];getPlaylist(d,null)}}else"ready"==t.load_type,freshLoad(player.getPlaylist(),"ready","Default")}),player.onPlaylist(function(e){var t=player.plugins.listy,i=t.state,s=player.getPlaylistItem();s&&s.file&&"use-tubey"==s.file||("ready"==i.load_type?i.load_type="inner":"inner"==i.load_type||"first"==i.load_type?i.load_type="open":freshLoad(e.playlist,"inner","New playlist")),t.tubey&&t.tubey["try-play"]&&t.tubey["try-play"]===!0&&(setTimeout(function(){player.play()},500),t.tubey["try-play"]=!1)}),player.onBeforePlay(function(){var e=player.plugins.listy,t=e.state,i=player.getPlaylistItem();if(i&&i.file&&"use-tubey"==i.file)player.stop();else if(t.autoplay)t.autoplay=!1,setTimeout(function(){player.play()},0);else if(i.action){var s=i.action.split("|");if("next"==s[0]||"prev"==s[0])player.stop(),load(null,getNextPrev(s[1])[s[0]]);else if("firstload"==s[0]||"preview"==s[0]){var l=s[1];"firstload"==s[0]&&(l=t.pl.current[0]),player.stop(),load(null,l)}}else{var a=0;i.mediaid&&(a=i.mediaid),load(null,a)}}),player.onComplete(function(){{var e=player.plugins.listy;e.state}player.stop(),setTimeout(function(){player.playlistItem(2)},0)}),this.about={label:"Listy for JW Player",version:"v1.12",author:"James Herrieven ~ http://powered-by-haiku.co.uk"},this.urls={},this.urls.yt_url="http://www.youtube.com/watch?v=",this.urls.yt_search_url="https://www.googleapis.com/youtube/v3/search?part=snippet",this.urls.yt_playlist_url="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet",this.urls.listy_parse_url="//www.dev.powered-by-haiku.co.uk/solutions/listy/parse/",this.urls.listy_prefetch_url="//www.dev.powered-by-haiku.co.uk/solutions/listy/prefetch/",this.skins={refs:{},data:{}},this.search_toggle={sc:"tracks",yt:"video"},this.refs={},this.state={},this.defaults={list:{label:"Playlist",current_selector:"data-mediaid",start_tpl:'<div class="listy-playlistcontainer"><div class="listy-playlist"><div class="listy-listcontainer"><ul class="listy-pl">',item_tpl:'<li class="listy-item" data-mediaid="{{item.mediaid}}" tabindex="0"><div class="listy-playlistdivider"></div><div class="listy-playlistimg listy-fill" {{(item.image&&item.image!=""?\'style="background-image:url(\'+item.image+\');"\':\'\')}}></div><div class="listy-textwrapper"><span class="listy-title">{{item.title}}<span class="listy-duration">{{(item.duration?timeFormat(item.duration):\'\')}}</span></span>'+"{{(item.description?'<span class=\"listy-description\">'+item.description+'</span>':'')}}</div></li>",end_tpl:"</ul></div></div></div>",yt_start_tpl:'<div class="listy-playlistcontainer"><div class="listy-playlist"><div class="listy-listcontainer"><ul class="listy-pl">',yt_item_tpl:'<li class="listy-item listy-item-yt" data-mediaid="{{item.mediaid}}" data-item="{{Base64.encode(JSON.stringify(item))}}"><div class="listy-playlistdivider"></div><div class="listy-playlistimg listy-fill" {{(item.image&&item.image!=""?\'style="background-image:url(\'+item.image+\');"\':\'\')}}></div><div class="listy-textwrapper"><span class="listy-title">{{item.index}}) {{item.title}}<span class="listy-duration">{{(item.duration?item.duration:\'\')}}</span></span>'+"{{(item.description?'<span class=\"listy-description\">'+item.description+'</span>':'')}}</div></li>",yt_end_tpl:"</ul></div></div></div>",sc_start_tpl:'<div class="listy-playlistcontainer"><div class="listy-playlist"><div class="listy-listcontainer"><ul class="listy-pl">',sc_item_tpl:'<li class="listy-item listy-item-sc" data-mediaid="{{item.mediaid}}" data-item="{{Base64.encode(JSON.stringify(item))}}"><div class="listy-playlistdivider"></div><div class="listy-playlistimg listy-fill" {{(item.image&&item.image!=""?\'style="background-image:url(\'+item.image+\');"\':\'\')}}></div><div class="listy-textwrapper"><span class="listy-title">{{item.index}}) {{item.title}}<span class="listy-duration">{{(item.duration?item.duration:\'\')}}</span></span>'+"{{(item.description?'<span class=\"listy-description\">'+item.description+'</span>':'')}}</div></li>",sc_end_tpl:"</ul></div></div></div>"},fields:{mediaid:{label:"Media ID:"},title:{label:"Title:"},description:{label:"Description:"},image:{label:"Image URL:"},duration:{label:"Duration:"},p1:{type:"paragraph",label:"Media source options"},file_hls:{label:"HLS URL:"},file_rtmp:{label:"RTMP URL:"},file_mp4:{label:"MP4 URL:"},file:{label:"Other URL:"},type:{label:"Other type:",type:"select",options:{mp4:{label:"MP4 (Flash / HTML5)",modes:""},mp3:{label:"MP3 (Flash / HTML5)",modes:""},webm:{label:"WebM (HTML5 only)",modes:{html5:{browser:"chrome,firefox"}}},hls:{label:"HLS (iOS Safari / Mac Safari)",modes:{html5:{browser:"safari",os:"ios"}}},rtmp:{label:"RTMP (Flash only)",modes:"flash"},youtube:{label:"YouTube (Flash / HTML5 JW6.9+)",modes:{html5:{major:"6",minor:"9"}}}}}},sign_in:{email:{label:"Email:"},password:{label:"Password:",type:"password"}},terms_of_use:{label:"Terms of use:",text:"Please confirm you have read our",link_text:"Terms of Use and Privacy Policy",url:"//www.dev.powered-by-haiku.co.uk/terms-of-use/",required:"Please confirm you have read our Terms of Use and Privacy Policy"}},this.checkUserState=function(e,t){var i=player.plugins.listy,s=i.state,l=i.refs,a=config.features.edit&&config.features.edit.options?config.features.edit.options:{},r=a.load&&a.load.onLogin?isEnabled(a.load.onLogin):!1,n=a.load&&a.load.onLogin&&a.load.onLogin["default"]?a.load.onLogin["default"]:"",o=a.save&&a.save["default"]?a.save["default"]:top.document.location.host,d=document.getElementById(config.target+"_save");i.isLoggedIn()?(l[player.id+"_listy_edit_name"]&&(l[player.id+"_listy_edit_name"].value=o),s.pl&&(s.pl.name=o),r?""!=n||t&&""!=t.name?(""==n&&(n=t.name),i.loadListyByName(n)):i.loadListy():isEnabled(a.load)&&updateMyListys(),addClass(l.sign_in,"listy-hidden"),removeClass(l.sign_out,"listy-hidden"),e&&toggleTabs(null,[null,e]),s.edit_playlist===!0&&d&&removeClass(d,"listy-hidden")):(addClass(l.sign_out,"listy-hidden"),removeClass(l.sign_in,"listy-hidden"),!s.edit_playlist==!0&&d&&addClass(d,"listy-hidden"))},this.prefetchItem=function(e,t,i,s,l){t=t||config.prefetch.begin,i=i||config.prefetch.progress,s=s||config.prefetch.complete,l=l||config.prefetch.error,prefetch(e,t,i,s,l)},this.setPlaylistName=function(e){var t=player.plugins.listy,i=t.state;i.pl.name=e},this.isLoggedIn=function(){var e=player.plugins.listy,t=e.state,i=!1;return t.listy_parse?t.listy_parse.currentUser()&&(i=!0):top.console&&console.info("Listy // No listy parse"),i},this.loadListy=function(e){loadListy(null,[e])},this.loadListyByName=function(e){loadListyByName(e)},this.buildCustomItem=buildCustomItem,this.addItem=function(e,t){e=e||"last";var i=t?"direct":"custom";add(null,[i,e,t])},this.addItems=function(e){"string"==typeof e&&(e=JSON.parse(e));for(var t=0,i=e.length;i>t;t++)add(null,["direct","last",e[t]])},this.listyUI_shufflePlaylist=function(){var e=player.plugins.listy,t=e.state,i=shufflePL(),s=t.current_item;updateListy(i,s)},this.shufflePlaylist=function(){var e=player.plugins.listy,t=e.state,i=shufflePL();return t.pl.current=i,e.getPlaylist()},this.listyUI_exportPlaylist=function(e,t){var i=player.plugins.listy,s=(i.state,i.skins.data),l=getSkinURL(),a=i.skins.refs[l];t=t||(config.features["export"].type?config.features["export"].type:"json");var r="width=500;height=400;menubar=no;location=no;",n=window.open("","listy_export",r);n.focus(),n.resizeTo(500,400),n.document.open();var o="";o+="<html><head>",o+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">',o+='<meta name="viewport" content="width=device-width,initial-scale=1.0" />',o+="<title>Export playlist</title>",o+="<style>",o+="*{box-sizing:border-box;}",o+="body{",o+="background-color:#"+checkColor(s[a].backgroundcolor)+";",o+="background-image:url("+s[a].itemActive+");",o+="font:"+s[a].fontsize+"px Arial, Helvetica, sans-serif;",o+="background-size:100% 100%;",o+="}",o+="textarea{position:absolute;top:53px;left:0;width:100%;bottom:0;resize:none;}",o+=".listy-button{",o+="float:left;",o+="background-color:#"+checkColor(s[a].titlecolor)+";",o+="background-image:url("+s[a].itemActive+");",o+="background-size: cover;",o+="color:#"+checkColor(s[a].fontcolor)+";",o+="font-size:"+s[a].titlesize+"px;",o+="font-weight:"+s[a].titleweight+";",o+="line-height:18px;",o+="padding:5px;",o+="margin:4px;",o+="cursor:pointer;",o+="border-radius:5px;",o+="border:2px solid #"+checkColor(s[a].titlecolor)+";",o+="}",o+=".listy-button:hover,.listy-button.active{",o+="background-image: url("+s[a].item+");",o+="color:#"+checkColor(s[a].titleactivecolor)+";",o+="}",o+=".listy-button.listy-right{float: right;}",o+="</style>",o+="</head><body>",o+='<span class="listy-button'+("json"==t?" active":"")+'" id="'+player.id+'_listy_export_json" onclick="setT(\'json\');" tabindex="0">JSON</span>',o+='<span class="listy-button'+("rss"==t?" active":"")+'" id="'+player.id+'_listy_export_rss" onclick="setT(\'rss\');" tabindex="0">RSS</span>',o+='<span class="listy-button listy-right" onclick="self.close();" tabindex="0">Close</span>',o+="<textarea></textarea>",o+="<script>",o+="function setT(sType){",o+='var selector = document.querySelectorAll(".listy-button");',o+="for(var iS=0,iSE=selector.length;iS<iSE;iS++){",o+='if(selector[iS].id!="'+player.id+'_listy_export_"+sType){',o+='self.opener.jwplayer("'+player.id+'").plugins.listy.removeClass(selector[iS],"active");',o+="} else {",o+='self.opener.jwplayer("'+player.id+'").plugins.listy.addClass(selector[iS],"active");',o+="}",o+="}",o+='var oT = document.getElementsByTagName("textarea")[0];',o+='if(oT) oT.value = self.opener.jwplayer("'+player.id+'").plugins.listy.exportPlaylist(sType);',o+="}",o+="setT('"+t+"');",o+="</script>",o+="</body></html>",n.document.write(o),n.document.close()},this.exportPlaylist=function(e){{var t=player.plugins.listy;t.state}e=e||"json";var i="";if("json"==e)i+=JSON.stringify(t.getPlaylist());else if("rss"==e){var s=t.getPlaylist();i+='<?xml version="1.0" encoding="UTF-8"?>\n',i+='<rss version="2.0" xmlns:jwplayer="http://rss.jwpcdn.com/">\n',i+="<channel>\n";for(var l=0,a=s.length;a>l;l++){var r=s[l];i+="<item>\n",i+="<title>"+(r.title?r.title:"")+"</title>\n",i+="<description>"+(r.description?r.description:"")+"</description>\n",i+="<guid>"+(r.mediaid?r.mediaid:"")+"</guid>\n",i+="<jwplayer:image>"+(r.image?r.image:"")+"</jwplayer:image>\n";var n=r.sources;if(n&&n.length>0)for(var o=0,d=n.length;d>o;o++){var p=n[o];i+='<jwplayer:source file="'+p.file+'"',i+=p.label?' label="'+p.label+'"':"",i+=p.type?' type="'+p.type+'"':"",i+=p["default"]?' default="'+p["default"]+'"':"",i+=" />\n"}else i+='<jwplayer:source file="'+r.file+'"',i+=r.label?' label="'+r.label+'"':"",i+=r.type?' type="'+r.type+'"':"",i+=r["default"]?' default="'+r["default"]+'"':"",i+=" />\n";var u=r.tracks;if(u)for(var c=0,y=u.length;y>c;c++){var f=u[c];i+='<jwplayer:source file="'+f.file+'"',i+=f.label?' label="'+f.label+'"':"",i+=f.kind?' kind="'+f.kind+'"':"",i+=f["default"]?' default="'+f["default"]+'"':"",i+=" />\n"}i+="</item>\n"}i+="</channel>\n",i+="</rss>"}return i},this.getPlaylist=function(e){var t=player.plugins.listy,i=t.state;e=e||"current";for(var s=[],l=0,a=i.pl[e].length;a>l;l++){var r=i.pl[e][l],n=i.pl.master[r];s.push(n)}return s},this.getPlaylistIndex=function(){var e=player.plugins.listy,t=e.state;return getIndex(t.current_item)},this.getPlaylistItem=function(){{var e=player.plugins.listy;e.state}top.console&&console.info("TODO: Returns the playlist item object at the specified index. If the index is not specified, the currently playing playlistItem is returned.")},this.playlistItem=function(e){load(null,[e])},this.load=function(e){player.load(e)},this.saveListy=function(e){var t=player.plugins.listy,i=t.state;t.isLoggedIn()?i.listy_parse.saveListy(i.pl,function(t){i.pl.id=t,updateMyListys(),e&&e()}):alert("You need to be logged into Listy before saving the current playlist")},this.listyUI_searchPlaylist=function(e){var t=player.plugins.listy,i=t.refs,s=t.state;if(s.pl.filtered=[],e&&""!=e){for(var l=t.searchPlaylist(e),a=0,r=l.length;r>a;a++)s.pl.filtered.push(l[a].mediaid);drawListy(null,"filtered")}else removeClass(i[player.id+"_listy_pl_search_button"],"with-content"),drawListy()},this.searchPlaylist=function(e){var t=player.plugins.listy,i=t.state,s=[];if(e&&""!=e)for(var l=0,a=i.pl.current.length;a>l;l++){var r=i.pl.current[l],n=i.pl.master[r],o="";for(var d in n)"string"==typeof n[d]?o+=n[d].toLowerCase()+" ":n[d]&&(o+=JSON.stringify(n[d]).toLowerCase()+" ");o.indexOf(e.toLowerCase())>-1&&s.push(n)}return s},this.listyUI_searchYT=function(e,t){var i=player.plugins.listy,s=i.refs;i.searchYT(e,function(e,t,i,l){var a="";if(0==e.length)s[player.id+"_listy_yt_results"].innerHTML="No matches found";else{i&&(a+=uiButton(config.target+"_listy_yt_results_prev","&lt; prev","listy-results-prev-page","prev||"+i+"||"+t)),l&&(a+=uiButton(config.target+"_listy_yt_results_next","next &gt;","listy-results-next-page","next||"+l+"||"+t)),(i||l)&&(a+=uiSep()),a+=repStuff(config.list.yt_start_tpl,player,null);for(var r=0,n=e.length;n>r;r++)a+=repStuff(config.list.yt_item_tpl,player,e[r]);a+=repStuff(config.list.yt_end_tpl,player,null),s[player.id+"_listy_yt_results"].innerHTML=a,bindYTButtons()}},t)},this.listyUI_searchSC=function(e,t){var i=player.plugins.listy,s=i.refs;i.searchSC(e,function(e,t,i,l){var a="";if(0==e.length)s[player.id+"_listy_sc_results"].innerHTML="No matches found";else{null!=i&&(a+=uiButton(config.target+"_listy_sc_results_prev","&lt; prev","listy-results-prev-page","prev||"+i+"||"+t)),null!=l&&(a+=uiButton(config.target+"_listy_sc_results_next","next &gt;","listy-results-next-page","next||"+l+"||"+t)),(null!=i||null!=l)&&(a+=uiSep()),a+=repStuff(config.list.sc_start_tpl,player,null);for(var r=0,n=e.length;n>r;r++)a+=repStuff(config.list.sc_item_tpl,player,e[r]);a+=repStuff(config.list.sc_end_tpl,player,null),s[player.id+"_listy_sc_results"].innerHTML=a,bindSCButtons()}},t)},this.searchSC=function(e,t,i){var s=player.plugins.listy,l=(s.refs,"86bf79b8e1c58a9395d745aaa9f52652");if(t)if(window.SC){SC.initialize({client_id:l});var a={};if(a.limit=50,a.linked_partitioning=1,a.streamable=!0,config.features.add_from_sc&&config.features.add_from_sc.query_options)for(var r in config.features.add_from_sc.query_options)a[r]=config.features.add_from_sc.query_options[r];a.q=e,i&&(a.offset=i),SC.get("/tracks",a,function(i){var s=null,a=null,r=i.collection?i.collection:i;if(i.next_href){for(var n=i.next_href.split("&"),o={},d=0,p=n.length;p>d;d++){var u=n[d].split("=");o[u[0]]=u[1]}o.offset&&(s=o.offset,o.limit&&parseInt(o.offset,10)>parseInt(o.limit,10)&&(a=parseInt(o.offset,10)-2*parseInt(o.limit,10)))}for(var c=[],y=0,f=r.length;f>y;y++){var g=r[y];if(g&&g.streamable){var _={};_.index=y+1,_.type="mp3",_.mediaid="sc"+g.id,_.duration=timeFormat(g.duration/1e3),_.image=g.artwork_url;var m=g.title;m=m.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),m=m.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),_.title=m,_.file=g.stream_url+"?client_id="+l,c.push(_)}}t(c,e,a,s)})}else top.console&&console.info("Listy // Oops! SC not available");else top.console&&console.info('Listy // Oops! "searchSC" requires a callback function as the second parameter.')},this.searchYT=function(e,t,i){var s=player.plugins.listy,l=(s.refs,s.search_toggle.yt);if(t){var a=s.urls.yt_search_url,r={};if(r.key="AIzaSyCHDHSAytHzHm8HiUlEQImeWqTeVbehnNI",r.type=l,r.maxResults=50,"video"==l&&(r.videoEmbeddable="true",r.videoSyndicated="true"),config.features.add_from_yt&&config.features.add_from_yt.query_options)for(var n in config.features.add_from_yt.query_options)r[n]=config.features.add_from_yt.query_options[n];r.q=e,i&&(r.pageToken=i);for(var n in r)a+="&"+n+"="+r[n];getURL(a,function(i){var s=JSON.parse(i),l=[];if(s.items&&s.items.length>0)for(var a=0,r=s.items.length;r>a;a++){var n=s.items[a],o={};o.index=a+1,o.type="youtube",o.mediaid=n.id.videoId;var d=n.snippet.thumbnails?n.snippet.thumbnails.high?n.snippet.thumbnails.high:n.snippet.thumbnails.medium?n.snippet.thumbnails.medium:n.snippet.thumbnails["default"]:"";o.image=d.url;var p=n.snippet.title;p=p.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),p=p.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),o.title=p,o.description="",l.push(o)}t(l,e,s.prevPageToken?s.prevPageToken:null,s.nextPageToken?s.nextPageToken:null)})}else top.console&&console.info('Listy // Oops! "searchYT" requires a callback function as the second parameter.')},this.previewItem=function(e,t){preview(null,[e,t])},this.listyUI_editPlaylist=function(e){var t=player.plugins.listy,i=t.state,s=t.refs;if(t.editPlaylist(e),s[player.id+"_listy_pl_edit"]){var l=document.getElementById(config.target+"_save");i.edit_playlist===!0?(addClass(s[player.id+"_listy_pl_edit"],"active"),t.isLoggedIn()&&l&&removeClass(l,"listy-hidden")):(l&&addClass(l,"listy-hidden"),removeClass(s[player.id+"_listy_pl_edit"],"active"),hideEdits())}},this.editPlaylist=function(e){var t=player.plugins.listy,i=t.state;i.edit_playlist=e===!0||e===!1?e:!i.edit_playlist==!0?!0:!1},this.removeClass=removeClass,this.addClass=addClass,this.bind=bind,Base64={CA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CAS:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",IA:new Array(256),IAS:new Array(256),init:function(){var e;for(e=0;256>e;e++)Base64.IA[e]=-1,Base64.IAS[e]=-1;for(e=0,iS=Base64.CA.length;e<iS;e++)Base64.IA[Base64.CA.charCodeAt(e)]=e,Base64.IAS[Base64.CAS.charCodeAt(e)]=e;Base64.IA["="]=Base64.IAS["="]=0},encode:function(e,t){var i,s,l,a,r,n,o,d,p,u;for(i=t?Base64.CAS:Base64.CA,l=e.constructor==Array?e:Base64.toByteArray(e),a=l.length,r=3*Math.floor(a/3),n=Math.floor((a-1)/3)+1<<2,s=new Array(n),o=0,d=0;r>o;)u=(255&l[o++])<<16|(255&l[o++])<<8|255&l[o++],s[d++]=i.charAt(u>>18&63),s[d++]=i.charAt(u>>12&63),s[d++]=i.charAt(u>>6&63),s[d++]=i.charAt(63&u);return p=a-r,p>0&&(u=(255&l[r])<<10|(2==p?(255&l[a-1])<<2:0),s[n-4]=i.charAt(u>>12),s[n-3]=i.charAt(u>>6&63),s[n-2]=2==p?i.charAt(63&u):"=",s[n-1]="="),s.join("")},decode:function(e,t){var i,s,l,a,r,n,o,d,p,u,c,y,f,g,_,m;for(i=t?Base64.IAS:Base64.IA,e.constructor==Array?(l=e,r=!0):(l=Base64.toByteArray(e),r=!1),a=l.length,n=0,o=a-1;o>n&&i[l[n]]<0;)n++;for(;o>0&&i[l[o]]<0;)o--;for(d="="==l[o]?"="==l[o-1]?2:1:0,p=o-n+1,u=a>76?("\r"==l[76]?Math.floor(p/78):0)<<1:0,c=(6*(p-u)>>3)-d,s=new Array(c),y=0,f=0,eLen=3*Math.floor(c/3);y<eLen;)g=i[l[n++]]<<18|i[l[n++]]<<12|i[l[n++]]<<6|i[l[n++]],s[y++]=g>>16&255,s[y++]=g>>8&255,s[y++]=255&g,u>0&&19==++f&&(n+=2,f=0);if(c>y){for(g=0,_=0;o-d>=n;_++)g|=i[l[n++]]<<18-6*_;for(m=16;c>y;m-=8)s[y++]=g>>m&255}if(r)return s;for(var g=0;g<s.length;g++)s[g]=String.fromCharCode(s[g]);return s.join("")},toByteArray:function(e){for(var t,i=[],s=0;s<e.length;s++)t=e.charCodeAt(s),i.push(t);return i}},Base64.init()};jwplayer().registerPlugin("listy","6.0",template)}(jwplayer);
