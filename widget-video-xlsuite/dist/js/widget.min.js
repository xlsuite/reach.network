function loadVideoLinkFromXLSuite(e){var t="2ae45fc2-72b9-45ce-9771-caf0fabf9c97",i="12345";$.ajax({url:"https://rn.xlsuite.com/admin/api/liquids/call?api_key="+t+"&tag=load_screen&display_key="+i}).then(function(t){var i=t.screen.channel_url;console.log("Loaded channel URL",i);var n=i+"&amp;autoplay=1&amp;controls=0&amp;showinfo=0 frameborder=0";e(n)})}if("undefined"==typeof config){var config={SKIN:"skin/RVSkin.xml",STORAGE_ENV:"prod"};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e){"use strict";function t(){clearTimeout(L),L=null}function i(){e.rpc.call("","rsevent_done",null,h.getString("id"))}function n(){e.rpc.call("","rsevent_ready",null,h.getString("id"),!0,!0,!0,!0,!0)}function o(e){I=setInterval(function(){A=y.url+_+"cb="+(new Date).getTime(),b=!1},e)}function r(){t(),L=setTimeout(function(){i()},5e3)}function s(){F=!0,A="",V.show("The selected video does not exist."),R.remove(S,function(){C||r()})}function a(e){A=e,V.hide(),C||u()}function l(e){A=e,b=!1}function c(){var e=R.getFrameObject(S);return C=!0,F?(t(),void 0):(e&&e.pause(),void 0)}function u(){console.log("Play event ");var e=R.getFrameObject(S);return C=!1,F?(r(),void 0):(b?i():e?e.play():A&&""!==A&&(R.add(0),R.createFramePlayer(0,y,A,config.SKIN,"player.html")),void 0)}function d(){R.remove(S,function(){i()})}function m(){var e;w||null!==I||o(E),C||(e=R.getFrameObject(S),e.play())}function f(){clearTimeout(P),P=setInterval(function(){console.log("Interval check"),loadVideoLinkFromXLSuite(function(e){if(e="https://www.youtube.com/embed/videoseries?list=PL48ZGwCpwPyFViELgsnvUknRzJyo2gOhA&amp;autoplay=1&amp;controls=0&amp;showinfo=0 frameborder=0",e!=A){A=e;var t=$("#mainIframe");t.attr("src",A)}})},5e3)}function g(t,i){var o;Array.isArray(t)&&t.length>0&&"additionalParams"===t[0]&&Array.isArray(i)&&i.length>0&&(y=JSON.parse(i[0]),h=new e.Prefs,document.getElementById("videoContainer").style.height=h.getInt("rsH")+"px",y.width=h.getInt("rsW"),y.height=h.getInt("rsH"),R=new RiseVision.Common.Video.FrameController,w=!1,o=y.url.split("?"),_=1===o.length?"?":"&",A=y.url,loadVideoLinkFromXLSuite(function(e){A=e;var t=$("#mainIframe");t.attr("src",A),t.attr("width",y.width),t.attr("height",y.height),f(),n()}))}function p(e){console.debug("video-folder::playerError()",e),b=!0,d()}function v(){c()}var y,h=null,V=null,R=null,b=!1,w=!1,C=!0,S=0,_="",A="",E=9e5,I=null,L=null,F=!1,P=null;return{noStorageFile:s,onStorageInit:a,onStorageRefresh:l,pause:c,play:u,setAdditionalParams:g,playerEnded:d,playerReady:m,playerError:p,stop:v}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.Storage=function(e){"use strict";function t(){var t=document.getElementById("videoStorage");t&&(t.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(i?(i=!1,RiseVision.Video.onStorageInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&e.detail.changed&&RiseVision.Video.onStorageRefresh(e.detail.url))}),t.addEventListener("rise-storage-no-file",function(){RiseVision.Video.noStorageFile()}),t.setAttribute("folder",e.storage.folder),t.setAttribute("fileName",e.storage.fileName),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("env",config.STORAGE_ENV),t.go())}var i=!0;return{init:t}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Video=RiseVision.Common.Video||{},RiseVision.Common.Video.FrameController=function(){"use strict";function e(e){return document.getElementById(l+e)}function t(t){var i,n=e(t);return i=n.querySelector("iframe"),i?i.contentWindow?i.contentWindow:i.contentDocument.document?i.contentDocument.document:i.contentDocument:null}function i(i){var n,o=e(i),r=t(i);r&&(n=o.querySelector("iframe"),r.remove(),n.setAttribute("src","about:blank"))}function n(t){var i=e(t),n=document.createElement("iframe");n.setAttribute("allowTransparency",!0),n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),i.appendChild(n)}function o(i,n,o,r,s){var a,l=e(i),c=t(i);c&&(a=l.querySelector("iframe"),a.onload=function(){a.onload=null,c.init(n,o,r),c.load()},a.setAttribute("src",s))}function r(t){var i=e(t);i.style.visibility="hidden"}function s(e,t){var n=document.getElementById(l+e);i(e),setTimeout(function(){for(;n.firstChild;)n.removeChild(n.firstChild);t&&"function"==typeof t&&t()},200)}function a(t){var i=e(t);i.style.visibility="visible"}var l="if_";return{add:n,createFramePlayer:o,getFrameContainer:e,getFrameObject:t,hide:r,remove:s,show:a}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function i(){try{t.style.height=e.style.height}catch(i){console.warn("Can't initialize Message - ",i.message)}}function n(){if(r){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",r=!1}}function o(i){var n,o=document.createDocumentFragment();r?(n=t.querySelector(".message"),n.innerHTML=i):(e.style.visibility="hidden",t.style.display="block",n=document.createElement("p"),n.innerHTML=i,n.setAttribute("class","message"),n.style.lineHeight=t.style.height,o.appendChild(n),t.appendChild(o),r=!0)}var r=!1;return i(),{hide:n,show:o}},function(e,t){"use strict";function i(){RiseVision.Video.play()}function n(){RiseVision.Video.pause()}function o(){RiseVision.Video.stop()}function r(){e.removeEventListener("WebComponentsReady",r),a&&""!==a&&(t.rpc.register("rscmd_play_"+a,i),t.rpc.register("rscmd_pause_"+a,n),t.rpc.register("rscmd_stop_"+a,o),t.rpc.register("rsparam_set_"+a,RiseVision.Video.setAdditionalParams),t.rpc.call("","rsparam_get",null,a,["additionalParams"]))}var s=new t.Prefs,a=s.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",r)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsibG9hZFZpZGVvTGlua0Zyb21YTFN1aXRlIiwiY2FsbGJhY2siLCJhcGlLZXkiLCJkaXNwbGF5S2V5IiwiJCIsImFqYXgiLCJ1cmwiLCJ0aGVuIiwiZGF0YSIsImNoYW5lbFVybCIsInNjcmVlbiIsImNoYW5uZWxfdXJsIiwiY29uc29sZSIsImxvZyIsImZ1bGxVcmwiLCJjb25maWciLCJTS0lOIiwiU1RPUkFHRV9FTlYiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJSaXNlVmlzaW9uIiwiVmlkZW8iLCJnYWRnZXRzIiwiX2NsZWFyTm9GaWxlVGltZXIiLCJjbGVhclRpbWVvdXQiLCJfbm9GaWxlVGltZXIiLCJfZG9uZSIsInJwYyIsImNhbGwiLCJfcHJlZnMiLCJnZXRTdHJpbmciLCJfcmVhZHkiLCJfcmVmcmVzaEludGVydmFsIiwiZHVyYXRpb24iLCJfcmVmcmVzaEludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl9jdXJyZW50RmlsZSIsIl9hZGRpdGlvbmFsUGFyYW1zIiwiX3NlcGFyYXRvciIsIkRhdGUiLCJnZXRUaW1lIiwiX3BsYXliYWNrRXJyb3IiLCJfc3RhcnROb0ZpbGVUaW1lciIsInNldFRpbWVvdXQiLCJub1N0b3JhZ2VGaWxlIiwiX25vRmlsZUZsYWciLCJfbWVzc2FnZSIsInNob3ciLCJfZnJhbWVDb250cm9sbGVyIiwicmVtb3ZlIiwiX2N1cnJlbnRGcmFtZSIsIl92aWV3ZXJQYXVzZWQiLCJvblN0b3JhZ2VJbml0IiwiaGlkZSIsInBsYXkiLCJvblN0b3JhZ2VSZWZyZXNoIiwicGF1c2UiLCJmcmFtZU9iaiIsImdldEZyYW1lT2JqZWN0IiwiYWRkIiwiY3JlYXRlRnJhbWVQbGF5ZXIiLCJwbGF5ZXJFbmRlZCIsInBsYXllclJlYWR5IiwiX2lzU3RvcmFnZUZpbGUiLCJfcmVmcmVzaER1cmF0aW9uIiwic3RhcnRQbGF5bGlzdENoYW5nZVRpbWVyIiwiX3BsYXlsaXN0Q2hhbmdlVGltZXIiLCJ2aWRlb1VybCIsIiRtYWluSWZyYW1lIiwiYXR0ciIsInNldEFkZGl0aW9uYWxQYXJhbXMiLCJuYW1lcyIsInZhbHVlcyIsInN0ciIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIkpTT04iLCJwYXJzZSIsIlByZWZzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiaGVpZ2h0IiwiZ2V0SW50Iiwid2lkdGgiLCJDb21tb24iLCJGcmFtZUNvbnRyb2xsZXIiLCJzcGxpdCIsInBsYXllckVycm9yIiwiZXJyb3IiLCJkZWJ1ZyIsInN0b3AiLCJTdG9yYWdlIiwiaW5pdCIsInN0b3JhZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImRldGFpbCIsIl9pbml0aWFsTG9hZCIsImhhc093blByb3BlcnR5IiwiY2hhbmdlZCIsInNldEF0dHJpYnV0ZSIsImZvbGRlciIsImZpbGVOYW1lIiwiY29tcGFueUlkIiwiZ28iLCJnZXRGcmFtZUNvbnRhaW5lciIsImluZGV4IiwiUFJFRklYIiwiaWZyYW1lIiwiZnJhbWVDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudFdpbmRvdyIsImNvbnRlbnREb2N1bWVudCIsIl9jbGVhciIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInBhcmFtcyIsImZpbGVzIiwic2tpbiIsInNyYyIsIm9ubG9hZCIsImxvYWQiLCJ2aXNpYmlsaXR5IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiTWVzc2FnZSIsIm1haW5Db250YWluZXIiLCJtZXNzYWdlQ29udGFpbmVyIiwiX2luaXQiLCJ3YXJuIiwibWVzc2FnZSIsIl9hY3RpdmUiLCJkaXNwbGF5IiwicCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImlubmVySFRNTCIsImxpbmVIZWlnaHQiLCJ3aW5kb3ciLCJwb2x5bWVyUmVhZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaWQiLCJyZWdpc3RlciIsInByZWZzIiwib25jb250ZXh0bWVudSIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJ0eXBlIiwiYXN5bmMiLCJsb2NhdGlvbiIsInByb3RvY29sIiwicyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBaUJBLFFBQVNBLDBCQUF5QkMsR0FDaEMsR0FBSUMsR0FBUyx1Q0FHVEMsRUFBYSxPQUVqQkMsR0FBRUMsTUFDQUMsSUFBSyx5REFBMkRKLEVBQVMsZ0NBQWtDQyxJQUMxR0ksS0FBSyxTQUFVQyxHQUNoQixHQUFJQyxHQUFZRCxFQUFLRSxPQUFPQyxXQUc1QkMsU0FBUUMsSUFBSSxxQkFBc0JKLEVBRWxDLElBQUlLLEdBQVVMLEVBQVksNkRBRTFCUixHQUFTYSxLQS9CYixHQUFzQixtQkFBWEMsUUFBd0IsQ0FDakMsR0FBSUEsU0FDRkMsS0FBTSxrQkFDTkMsWUFBYSxPQUdRLG9CQUFaQyxVQUNUQSxRQUFRQyxPQUFPLG9DQUNaQyxTQUFTLGlCQUFrQix3QkFDM0JBLFNBQVMsZ0JBQWlCLFNBZ0NqQyxHQUFJQyxZQUFhQSxjQUNqQkEsWUFBV0MsU0FFWEQsV0FBV0MsTUFBUSxTQUFXQyxHQUM1QixZQTZCQSxTQUFTQyxLQUNQQyxhQUFhQyxHQUNiQSxFQUFlLEtBR2pCLFFBQVNDLEtBQ1BKLEVBQVFLLElBQUlDLEtBQUssR0FBSSxlQUFnQixLQUFNQyxFQUFPQyxVQUFVLE9BSTlELFFBQVNDLEtBQ1BULEVBQVFLLElBQUlDLEtBQUssR0FBSSxnQkFBaUIsS0FBTUMsRUFBT0MsVUFBVSxPQUMzRCxHQUFNLEdBQU0sR0FBTSxHQUFNLEdBRzVCLFFBQVNFLEdBQWlCQyxHQUN4QkMsRUFBcUJDLFlBQVksV0FFL0JDLEVBQWVDLEVBQWtCaEMsSUFBTWlDLEVBQWEsT0FBUSxHQUFJQyxPQUFPQyxVQUd2RUMsR0FBaUIsR0FFaEJSLEdBR0wsUUFBU1MsS0FDUG5CLElBRUFFLEVBQWVrQixXQUFXLFdBRXhCakIsS0FDQyxLQU1MLFFBQVNrQixLQUNQQyxHQUFjLEVBQ2RULEVBQWUsR0FFZlUsRUFBU0MsS0FBSyxzQ0FFZEMsRUFBaUJDLE9BQU9DLEVBQWUsV0FFaENDLEdBQ0hULE1BS04sUUFBU1UsR0FBYy9DLEdBQ3JCK0IsRUFBZS9CLEVBRWZ5QyxFQUFTTyxPQUVKRixHQUNIRyxJQUlKLFFBQVNDLEdBQWlCbEQsR0FDeEIrQixFQUFlL0IsRUFHZm9DLEdBQWlCLEVBR25CLFFBQVNlLEtBQ1AsR0FBSUMsR0FBV1QsRUFBaUJVLGVBQWVSLEVBSS9DLE9BRkFDLElBQWdCLEVBRVpOLEdBQ0Z0QixJQUNBLFNBR0VrQyxHQUNGQSxFQUFTRCxRQURYLFFBS0YsUUFBU0YsS0FDUDNDLFFBQVFDLElBQUksY0FDWixJQUFJNkMsR0FBV1QsRUFBaUJVLGVBQWVSLEVBSS9DLE9BRkFDLElBQWdCLEVBRVpOLEdBQ0ZILElBQ0EsU0FHR0QsRUFlSGYsSUFkSStCLEVBQ0ZBLEVBQVNILE9BR0xsQixHQUFpQyxLQUFqQkEsSUFFbEJZLEVBQWlCVyxJQUFJLEdBQ3JCWCxFQUFpQlksa0JBQWtCLEVBQUd2QixFQUFtQkQsRUFBY3RCLE9BQU9DLEtBQU0sZ0JBUjFGLFFBbUJGLFFBQVM4QyxLQUNQYixFQUFpQkMsT0FBT0MsRUFBZSxXQUNyQ3hCLE1BSUosUUFBU29DLEtBQ1AsR0FBSUwsRUFHQ00sSUFBeUMsT0FBdkI3QixHQUNyQkYsRUFBaUJnQyxHQUdkYixJQUNITSxFQUFXVCxFQUFpQlUsZUFBZVIsR0FDM0NPLEVBQVNILFFBSWIsUUFBU1csS0FDUHpDLGFBQWEwQyxHQUViQSxFQUF1Qi9CLFlBQVksV0FDakN4QixRQUFRQyxJQUFJLGtCQUVaYix5QkFBeUIsU0FBVW9FLEdBSWpDLEdBRkFBLEVBQVcsK0lBRVBBLEdBQVkvQixFQUFjLENBQzVCQSxFQUFlK0IsQ0FDZixJQUFJQyxHQUFjakUsRUFBRSxjQUNwQmlFLEdBQVlDLEtBQUssTUFBT2pDLE9BSTNCLEtBR0wsUUFBU2tDLEdBQW9CQyxFQUFPQyxHQUNsQyxHQUFJQyxFQUVBQyxPQUFNQyxRQUFRSixJQUFVQSxFQUFNSyxPQUFTLEdBQWtCLHFCQUFiTCxFQUFNLElBQ2hERyxNQUFNQyxRQUFRSCxJQUFXQSxFQUFPSSxPQUFTLElBQzNDdkMsRUFBb0J3QyxLQUFLQyxNQUFNTixFQUFPLElBQ3RDM0MsRUFBUyxHQUFJUCxHQUFReUQsTUFFckJDLFNBQVNDLGVBQWUsa0JBQWtCQyxNQUFNQyxPQUFTdEQsRUFBT3VELE9BQU8sT0FBUyxLQUVoRi9DLEVBQWtCZ0QsTUFBUXhELEVBQU91RCxPQUFPLE9BQ3hDL0MsRUFBa0I4QyxPQUFTdEQsRUFBT3VELE9BQU8sT0FFekNwQyxFQUFtQixHQUFJNUIsWUFBV2tFLE9BQU9qRSxNQUFNa0UsZ0JBRS9DeEIsR0FBaUIsRUFFakJVLEVBQU1wQyxFQUFrQmhDLElBQUltRixNQUFNLEtBR2xDbEQsRUFBNkIsSUFBZm1DLEVBQUlHLE9BQWdCLElBQU0sSUFDeEN4QyxFQUFlQyxFQUFrQmhDLElBRWpDTix5QkFBeUIsU0FBVW9FLEdBQ2pDL0IsRUFBZStCLENBRWYsSUFBSUMsR0FBY2pFLEVBQUUsY0FDcEJpRSxHQUFZQyxLQUFLLE1BQU9qQyxHQUN4QmdDLEVBQVlDLEtBQUssUUFBU2hDLEVBQWtCZ0QsT0FDNUNqQixFQUFZQyxLQUFLLFNBQVVoQyxFQUFrQjhDLFFBRTdDbEIsSUFFQWxDLE9BTVIsUUFBUzBELEdBQVlDLEdBQ25CL0UsUUFBUWdGLE1BQU0sOEJBQStCRCxHQUc3Q2pELEdBQWlCLEVBR2pCb0IsSUFHRixRQUFTK0IsS0FDUHBDLElBdk9GLEdBQUluQixHQUVBUixFQUFTLEtBRVhpQixFQUFXLEtBQ1hFLEVBQW1CLEtBRWpCUCxHQUFpQixFQUNuQnNCLEdBQWlCLEVBQ2pCWixHQUFnQixFQUVkRCxFQUFnQixFQUVoQlosRUFBYSxHQUNmRixFQUFlLEdBRWI0QixFQUFtQixJQUNyQjlCLEVBQXFCLEtBRW5CVCxFQUFlLEtBQ2pCb0IsR0FBYyxFQUVacUIsRUFBdUIsSUFvTjNCLFFBQ0V0QixjQUFpQkEsRUFDakJRLGNBQWlCQSxFQUNqQkcsaUJBQW9CQSxFQUNwQkMsTUFBU0EsRUFDVEYsS0FBUUEsRUFDUmdCLG9CQUF1QkEsRUFDdkJULFlBQWVBLEVBQ2ZDLFlBQWVBLEVBQ2YyQixZQUFlQSxFQUNmRyxLQUFRQSxJQUdUdEUsUUFJSCxJQUFJRixZQUFhQSxjQUNqQkEsWUFBV0MsTUFBUUQsV0FBV0MsVUFFOUJELFdBQVdDLE1BQU13RSxRQUFVLFNBQVV0RixHQUNuQyxZQU9BLFNBQVN1RixLQUNQLEdBQUlDLEdBQVVmLFNBQVNDLGVBQWUsZUFFakNjLEtBSUxBLEVBQVFDLGlCQUFpQix3QkFBeUIsU0FBU0MsR0FDckRBLEVBQUVDLFFBQVVELEVBQUVDLE9BQU83RixNQUVuQjhGLEdBQ0ZBLEdBQWUsRUFFZi9FLFdBQVdDLE1BQU0rQixjQUFjNkMsRUFBRUMsT0FBTzdGLE1BSXBDNEYsRUFBRUMsT0FBT0UsZUFBZSxZQUFjSCxFQUFFQyxPQUFPRyxTQUNqRGpGLFdBQVdDLE1BQU1rQyxpQkFBaUIwQyxFQUFFQyxPQUFPN0YsUUFNbkQwRixFQUFRQyxpQkFBaUIsdUJBQXdCLFdBQy9DNUUsV0FBV0MsTUFBTXVCLGtCQUduQm1ELEVBQVFPLGFBQWEsU0FBVS9GLEVBQUt3RixRQUFRUSxRQUM1Q1IsRUFBUU8sYUFBYSxXQUFZL0YsRUFBS3dGLFFBQVFTLFVBQzlDVCxFQUFRTyxhQUFhLFlBQWEvRixFQUFLd0YsUUFBUVUsV0FDL0NWLEVBQVFPLGFBQWEsTUFBT3hGLE9BQU9FLGFBQ25DK0UsRUFBUVcsTUFyQ1YsR0FBSVAsSUFBZSxDQXdDbkIsUUFDRUwsS0FBUUEsR0FJWixJQUFJMUUsWUFBYUEsY0FDakJBLFlBQVdrRSxPQUFTbEUsV0FBV2tFLFdBRS9CbEUsV0FBV2tFLE9BQU9qRSxNQUFRRCxXQUFXa0UsT0FBT2pFLFVBRTVDRCxXQUFXa0UsT0FBT2pFLE1BQU1rRSxnQkFBa0IsV0FDeEMsWUFJQSxTQUFTb0IsR0FBa0JDLEdBQ3pCLE1BQU81QixVQUFTQyxlQUFlNEIsRUFBU0QsR0FHMUMsUUFBU2xELEdBQWVrRCxHQUN0QixHQUNFRSxHQURFQyxFQUFpQkosRUFBa0JDLEVBS3ZDLE9BRkFFLEdBQVNDLEVBQWVDLGNBQWMsVUFFbENGLEVBQ01BLEVBQW9CLGNBQUlBLEVBQU9HLGNBQ3BDSCxFQUFPSSxnQkFBd0IsU0FBSUosRUFBT0ksZ0JBQWdCbEMsU0FBVzhCLEVBQU9JLGdCQUcxRSxLQUdULFFBQVNDLEdBQU9QLEdBQ2QsR0FFRUUsR0FGRUMsRUFBaUJKLEVBQWtCQyxHQUNyQ25ELEVBQVdDLEVBQWVrRCxFQUd4Qm5ELEtBQ0ZxRCxFQUFTQyxFQUFlQyxjQUFjLFVBQ3RDdkQsRUFBU1IsU0FDVDZELEVBQU9SLGFBQWEsTUFBTyxnQkFJL0IsUUFBUzNDLEdBQUlpRCxHQUNYLEdBQUlHLEdBQWlCSixFQUFrQkMsR0FDckNFLEVBQVM5QixTQUFTb0MsY0FBYyxTQUVsQ04sR0FBT1IsYUFBYSxxQkFBcUIsR0FDekNRLEVBQU9SLGFBQWEsY0FBZSxLQUNuQ1EsRUFBT1IsYUFBYSxZQUFhLE1BRWpDUyxFQUFlTSxZQUFZUCxHQUc3QixRQUFTbEQsR0FBa0JnRCxFQUFPVSxFQUFRQyxFQUFPQyxFQUFNQyxHQUNyRCxHQUVFWCxHQUZFQyxFQUFpQkosRUFBa0JDLEdBQ3JDbkQsRUFBV0MsRUFBZWtELEVBR3hCbkQsS0FDRnFELEVBQVNDLEVBQWVDLGNBQWMsVUFFdENGLEVBQU9ZLE9BQVMsV0FDZFosRUFBT1ksT0FBUyxLQUdoQmpFLEVBQVNxQyxLQUFLd0IsRUFBUUMsRUFBT0MsR0FDN0IvRCxFQUFTa0UsUUFHWGIsRUFBT1IsYUFBYSxNQUFPbUIsSUFLL0IsUUFBU3BFLEdBQUt1RCxHQUNaLEdBQUlHLEdBQWlCSixFQUFrQkMsRUFFdkNHLEdBQWU3QixNQUFNMEMsV0FBYSxTQUdwQyxRQUFTM0UsR0FBTzJELEVBQU81RyxHQUNyQixHQUFJK0csR0FBaUIvQixTQUFTQyxlQUFlNEIsRUFBU0QsRUFFdERPLEdBQU9QLEdBRVBqRSxXQUFXLFdBRVQsS0FBT29FLEVBQWVjLFlBQ3BCZCxFQUFlZSxZQUFZZixFQUFlYyxXQUd4QzdILElBQWdDLGtCQUFiQSxJQUNyQkEsS0FFRCxLQUdMLFFBQVMrQyxHQUFLNkQsR0FDWixHQUFJRyxHQUFpQkosRUFBa0JDLEVBRXZDRyxHQUFlN0IsTUFBTTBDLFdBQWEsVUExRnBDLEdBQUlmLEdBQVMsS0E2RmIsUUFDRWxELElBQUtBLEVBQ0xDLGtCQUFtQkEsRUFDbkIrQyxrQkFBbUJBLEVBQ25CakQsZUFBZ0JBLEVBQ2hCTCxLQUFNQSxFQUNOSixPQUFRQSxFQUNSRixLQUFNQSxHQUlWLElBQUkzQixZQUFhQSxjQUNqQkEsWUFBV2tFLE9BQVNsRSxXQUFXa0UsV0FFL0JsRSxXQUFXa0UsT0FBT3lDLFFBQVUsU0FBVUMsRUFBZUMsR0FDbkQsWUFJQSxTQUFTQyxLQUNQLElBQ0VELEVBQWlCL0MsTUFBTUMsT0FBUzZDLEVBQWM5QyxNQUFNQyxPQUNwRCxNQUFPYyxHQUNQdEYsUUFBUXdILEtBQUssOEJBQStCbEMsRUFBRW1DLFVBT2xELFFBQVMvRSxLQUNQLEdBQUlnRixFQUFTLENBRVgsS0FBT0osRUFBaUJKLFlBQ3RCSSxFQUFpQkgsWUFBWUcsRUFBaUJKLFdBSWhESSxHQUFpQi9DLE1BQU1vRCxRQUFVLE9BR2pDTixFQUFjOUMsTUFBTTBDLFdBQWEsVUFFakNTLEdBQVUsR0FJZCxRQUFTdEYsR0FBS3FGLEdBQ1osR0FDRUcsR0FERUMsRUFBV3hELFNBQVN5RCx3QkFHbkJKLElBa0JIRSxFQUFJTixFQUFpQmpCLGNBQWMsWUFDbkN1QixFQUFFRyxVQUFZTixJQWpCZEosRUFBYzlDLE1BQU0wQyxXQUFhLFNBRWpDSyxFQUFpQi9DLE1BQU1vRCxRQUFVLFFBR2pDQyxFQUFJdkQsU0FBU29DLGNBQWMsS0FDM0JtQixFQUFFRyxVQUFZTixFQUNkRyxFQUFFakMsYUFBYSxRQUFTLFdBQ3hCaUMsRUFBRXJELE1BQU15RCxXQUFhVixFQUFpQi9DLE1BQU1DLE9BRTVDcUQsRUFBU25CLFlBQVlrQixHQUNyQk4sRUFBaUJaLFlBQVltQixHQUU3QkgsR0FBVSxHQWpEZCxHQUFJQSxJQUFVLENBMkRkLE9BRkFILE1BR0U3RSxLQUFRQSxFQUNSTixLQUFRQSxJQU1aLFNBQVc2RixFQUFRdEgsR0FDakIsWUFVQSxTQUFTZ0MsS0FDUGxDLFdBQVdDLE1BQU1pQyxPQUduQixRQUFTRSxLQUNQcEMsV0FBV0MsTUFBTW1DLFFBR25CLFFBQVNvQyxLQUNQeEUsV0FBV0MsTUFBTXVFLE9BR25CLFFBQVNpRCxLQUNQRCxFQUFPRSxvQkFBb0IscUJBQXNCRCxHQUU3Q0UsR0FBYSxLQUFQQSxJQUNSekgsRUFBUUssSUFBSXFILFNBQVMsY0FBZ0JELEVBQUl6RixHQUN6Q2hDLEVBQVFLLElBQUlxSCxTQUFTLGVBQWlCRCxFQUFJdkYsR0FDMUNsQyxFQUFRSyxJQUFJcUgsU0FBUyxjQUFnQkQsRUFBSW5ELEdBRXpDdEUsRUFBUUssSUFBSXFILFNBQVMsZUFBaUJELEVBQUkzSCxXQUFXQyxNQUFNaUQscUJBQzNEaEQsRUFBUUssSUFBSUMsS0FBSyxHQUFJLGNBQWUsS0FBTW1ILEdBQUssc0JBN0JuRCxHQUFJRSxHQUFRLEdBQUkzSCxHQUFReUQsTUFDdEJnRSxFQUFLRSxFQUFNbkgsVUFBVSxLQUd2QjhHLEdBQU9NLGNBQWdCLFdBQ3JCLE9BQU8sR0E0QlROLEVBQU81QyxpQkFBaUIscUJBQXNCNkMsSUFFN0NELE9BQVF0SCxRQUtYLElBQUk2SCxNQUFPQSxRQUVYQSxNQUFLQyxNQUFNLGNBQWUsa0JBQzFCRCxLQUFLQyxNQUFNLG1CQUVYLFdBQ0UsR0FBSUMsR0FBS3JFLFNBQVNvQyxjQUFjLFNBQVdpQyxHQUFHQyxLQUFPLGtCQUFtQkQsRUFBR0UsT0FBUSxFQUNuRkYsRUFBRzVCLEtBQU8sVUFBWXpDLFNBQVN3RSxTQUFTQyxTQUFXLGNBQWdCLGNBQWdCLDZCQUNuRixJQUFJQyxHQUFJMUUsU0FBUzJFLHFCQUFxQixVQUFVLEVBQUlELEdBQUVFLFdBQVdDLGFBQWFSLEVBQUlLIiwiZmlsZSI6ImpzL3dpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgY29uZmlnOiB0cnVlICovXG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgY29uZmlnID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgU0tJTjogXCJza2luL1JWU2tpbi54bWxcIixcbiAgICBTVE9SQUdFX0VOVjogXCJwcm9kXCJcbiAgfTtcblxuICBpZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJsb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xuICB9XG59XG5cclxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBsb2FkVmlkZW9MaW5rRnJvbVhMU3VpdGUoY2FsbGJhY2spIHtcbiAgdmFyIGFwaUtleSA9IFwiMmFlNDVmYzItNzJiOS00NWNlLTk3NzEtY2FmMGZhYmY5Yzk3XCI7XG5cbiAgLy90b2RvOiBnZXQgZGlzcGxheSBrZXkgZnJvbSBzZXR0aW5nc1xuICB2YXIgZGlzcGxheUtleSA9IFwiMTIzNDVcIjtcblxuICAkLmFqYXgoe1xuICAgIHVybDogXCJodHRwczovL3JuLnhsc3VpdGUuY29tL2FkbWluL2FwaS9saXF1aWRzL2NhbGw/YXBpX2tleT1cIiArIGFwaUtleSArIFwiJnRhZz1sb2FkX3NjcmVlbiZkaXNwbGF5X2tleT1cIiArIGRpc3BsYXlLZXlcbiAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBjaGFuZWxVcmwgPSBkYXRhLnNjcmVlbi5jaGFubmVsX3VybDsgIC8vaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvdmlkZW9zZXJpZXM/bGlzdD1QTG41NlZieE9TNzdmZC1xYlp3MG12blMyUG1fX3R2U0haXG5cbiAgICAvL3RvZG86IHNhdmUgY2hhbm5lbCBVUkwgdG8gc29tZSBzZXR0aW5ncyAvIHZhcmlhYmxlXG4gICAgY29uc29sZS5sb2coXCJMb2FkZWQgY2hhbm5lbCBVUkxcIiwgY2hhbmVsVXJsKTtcblxuICAgIHZhciBmdWxsVXJsID0gY2hhbmVsVXJsICsgXCImYW1wO2F1dG9wbGF5PTEmYW1wO2NvbnRyb2xzPTAmYW1wO3Nob3dpbmZvPTAgZnJhbWVib3JkZXI9MFwiO1xuXG4gICAgY2FsbGJhY2soZnVsbFVybCk7XG5cbiAgICAvL215IC0gaHR0cHM6Ly93d3cueW91dHViZS5jb20vcGxheWxpc3Q/bGlzdD1QTDQ4Wkd3Q3B3UHlGVmlFTGdzbnZVa25Sekp5bzJnT2hBXG4gICAgLy9odHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC92aWRlb3Nlcmllcz9saXN0PVBMNDhaR3dDcHdQeUZWaUVMZ3NudlVrblJ6SnlvMmdPaEFcbiAgfSk7XG5cbn1cblxyXG4vKiBnbG9iYWwgZ2FkZ2V0cywgY29uZmlnICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSB7fTtcblxuUmlzZVZpc2lvbi5WaWRlbyA9IChmdW5jdGlvbiAoZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2FkZGl0aW9uYWxQYXJhbXM7XG5cbiAgdmFyIF9wcmVmcyA9IG51bGwsXG4gICAgX3N0b3JhZ2UgPSBudWxsLFxuICAgIF9tZXNzYWdlID0gbnVsbCxcbiAgICBfZnJhbWVDb250cm9sbGVyID0gbnVsbDtcblxuICB2YXIgX3BsYXliYWNrRXJyb3IgPSBmYWxzZSxcbiAgICBfaXNTdG9yYWdlRmlsZSA9IGZhbHNlLFxuICAgIF92aWV3ZXJQYXVzZWQgPSB0cnVlO1xuXG4gIHZhciBfY3VycmVudEZyYW1lID0gMDtcblxuICB2YXIgX3NlcGFyYXRvciA9IFwiXCIsXG4gICAgX2N1cnJlbnRGaWxlID0gXCJcIjtcblxuICB2YXIgX3JlZnJlc2hEdXJhdGlvbiA9IDkwMDAwMCwgIC8vIDE1IG1pbnV0ZXNcbiAgICBfcmVmcmVzaEludGVydmFsSWQgPSBudWxsO1xuXG4gIHZhciBfbm9GaWxlVGltZXIgPSBudWxsLFxuICAgIF9ub0ZpbGVGbGFnID0gZmFsc2U7XG5cbiAgdmFyIF9wbGF5bGlzdENoYW5nZVRpbWVyID0gbnVsbDtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfY2xlYXJOb0ZpbGVUaW1lcigpIHtcbiAgICBjbGVhclRpbWVvdXQoX25vRmlsZVRpbWVyKTtcbiAgICBfbm9GaWxlVGltZXIgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX2RvbmUoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfZG9uZVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIikpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVmcmVzaEludGVydmFsKGR1cmF0aW9uKSB7XG4gICAgX3JlZnJlc2hJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gdmlkZW9SZWZyZXNoKCkge1xuICAgICAgLy8gc2V0IG5ldyB2YWx1ZSBvZiBub24gcmlzZS1zdG9yYWdlIHVybCB3aXRoIGEgY2FjaGVidXN0ZXJcbiAgICAgIF9jdXJyZW50RmlsZSA9IF9hZGRpdGlvbmFsUGFyYW1zLnVybCArIF9zZXBhcmF0b3IgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgIC8vIGluIGNhc2UgcmVmcmVzaGVkIGZpbGUgZml4ZXMgYW4gZXJyb3Igd2l0aCBwcmV2aW91cyBmaWxlLCBlbnN1cmUgZmxhZyBpcyByZW1vdmVkIHNvIHBsYXliYWNrIGlzIGF0dGVtcHRlZCBhZ2FpblxuICAgICAgX3BsYXliYWNrRXJyb3IgPSBmYWxzZTtcblxuICAgIH0sIGR1cmF0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydE5vRmlsZVRpbWVyKCkge1xuICAgIF9jbGVhck5vRmlsZVRpbWVyKCk7XG5cbiAgICBfbm9GaWxlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIG5vdGlmeSBWaWV3ZXIgd2lkZ2V0IGlzIGRvbmVcbiAgICAgIF9kb25lKCk7XG4gICAgfSwgNTAwMCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIG5vU3RvcmFnZUZpbGUoKSB7XG4gICAgX25vRmlsZUZsYWcgPSB0cnVlO1xuICAgIF9jdXJyZW50RmlsZSA9IFwiXCI7XG5cbiAgICBfbWVzc2FnZS5zaG93KFwiVGhlIHNlbGVjdGVkIHZpZGVvIGRvZXMgbm90IGV4aXN0LlwiKTtcblxuICAgIF9mcmFtZUNvbnRyb2xsZXIucmVtb3ZlKF9jdXJyZW50RnJhbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIGlmIFdpZGdldCBpcyBwbGF5aW5nIHJpZ2h0IG5vdywgcnVuIHRoZSB0aW1lclxuICAgICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICAgIF9zdGFydE5vRmlsZVRpbWVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvblN0b3JhZ2VJbml0KHVybCkge1xuICAgIF9jdXJyZW50RmlsZSA9IHVybDtcblxuICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgIGlmICghX3ZpZXdlclBhdXNlZCkge1xuICAgICAgcGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU3RvcmFnZVJlZnJlc2godXJsKSB7XG4gICAgX2N1cnJlbnRGaWxlID0gdXJsO1xuXG4gICAgLy8gaW4gY2FzZSByZWZyZXNoZWQgZmlsZSBmaXhlcyBhbiBlcnJvciB3aXRoIHByZXZpb3VzIGZpbGUsIGVuc3VyZSBmbGFnIGlzIHJlbW92ZWQgc28gcGxheWJhY2sgaXMgYXR0ZW1wdGVkIGFnYWluXG4gICAgX3BsYXliYWNrRXJyb3IgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIHZhciBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICAgIGlmIChfbm9GaWxlRmxhZykge1xuICAgICAgX2NsZWFyTm9GaWxlVGltZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIGZyYW1lT2JqLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBjb25zb2xlLmxvZyhcIlBsYXkgZXZlbnQgXCIpO1xuICAgIHZhciBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICBfdmlld2VyUGF1c2VkID0gZmFsc2U7XG5cbiAgICBpZiAoX25vRmlsZUZsYWcpIHtcbiAgICAgIF9zdGFydE5vRmlsZVRpbWVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFfcGxheWJhY2tFcnJvcikge1xuICAgICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICAgIGZyYW1lT2JqLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgaWYgKF9jdXJyZW50RmlsZSAmJiBfY3VycmVudEZpbGUgIT09IFwiXCIpIHtcbiAgICAgICAgICAvLyBhZGQgZnJhbWUgYW5kIGNyZWF0ZSB0aGUgcGxheWVyXG4gICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5hZGQoMCk7XG4gICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5jcmVhdGVGcmFtZVBsYXllcigwLCBfYWRkaXRpb25hbFBhcmFtcywgX2N1cnJlbnRGaWxlLCBjb25maWcuU0tJTiwgXCJwbGF5ZXIuaHRtbFwiKTtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoaXMgZmxhZyBvbmx5IGdvdCBzZXQgdXBvbiBhIHJlZnJlc2ggb2YgaGlkZGVuIGZyYW1lIGFuZCB0aGVyZSB3YXMgYW4gZXJyb3IgaW4gc2V0dXAgb3IgdmlkZW9cbiAgICAgIC8vIFNlbmQgVmlld2VyIFwiZG9uZVwiXG4gICAgICBfZG9uZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllckVuZGVkKCkge1xuICAgIF9mcmFtZUNvbnRyb2xsZXIucmVtb3ZlKF9jdXJyZW50RnJhbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9kb25lKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJSZWFkeSgpIHtcbiAgICB2YXIgZnJhbWVPYmo7XG5cbiAgICAvLyBub24tc3RvcmFnZSwgY2hlY2sgaWYgcmVmcmVzaCBpbnRlcnZhbCBleGlzdHMgeWV0LCBzdGFydCBpdCBpZiBub3RcbiAgICBpZiAoIV9pc1N0b3JhZ2VGaWxlICYmIF9yZWZyZXNoSW50ZXJ2YWxJZCA9PT0gbnVsbCkge1xuICAgICAgX3JlZnJlc2hJbnRlcnZhbChfcmVmcmVzaER1cmF0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIGZyYW1lT2JqID0gX2ZyYW1lQ29udHJvbGxlci5nZXRGcmFtZU9iamVjdChfY3VycmVudEZyYW1lKTtcbiAgICAgIGZyYW1lT2JqLnBsYXkoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydFBsYXlsaXN0Q2hhbmdlVGltZXIoKSB7XG4gICAgY2xlYXJUaW1lb3V0KF9wbGF5bGlzdENoYW5nZVRpbWVyKTtcblxuICAgIF9wbGF5bGlzdENoYW5nZVRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgY29uc29sZS5sb2coXCJJbnRlcnZhbCBjaGVja1wiKTtcblxuICAgICAgbG9hZFZpZGVvTGlua0Zyb21YTFN1aXRlKGZ1bmN0aW9uICh2aWRlb1VybCkge1xuXG4gICAgICAgIHZpZGVvVXJsID0gXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC92aWRlb3Nlcmllcz9saXN0PVBMNDhaR3dDcHdQeUZWaUVMZ3NudlVrblJ6SnlvMmdPaEEmYW1wO2F1dG9wbGF5PTEmYW1wO2NvbnRyb2xzPTAmYW1wO3Nob3dpbmZvPTAgZnJhbWVib3JkZXI9MFwiO1xuXG4gICAgICAgIGlmICh2aWRlb1VybCAhPSBfY3VycmVudEZpbGUpIHtcbiAgICAgICAgICBfY3VycmVudEZpbGUgPSB2aWRlb1VybDtcbiAgICAgICAgICB2YXIgJG1haW5JZnJhbWUgPSAkKCcjbWFpbklmcmFtZScpO1xuICAgICAgICAgICRtYWluSWZyYW1lLmF0dHIoJ3NyYycsIF9jdXJyZW50RmlsZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgfSwgNTAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBZGRpdGlvbmFsUGFyYW1zKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICB2YXIgc3RyO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gSlNPTi5wYXJzZSh2YWx1ZXNbMF0pO1xuICAgICAgICBfcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9Db250YWluZXJcIikuc3R5bGUuaGVpZ2h0ID0gX3ByZWZzLmdldEludChcInJzSFwiKSArIFwicHhcIjtcblxuICAgICAgICBfYWRkaXRpb25hbFBhcmFtcy53aWR0aCA9IF9wcmVmcy5nZXRJbnQoXCJyc1dcIik7XG4gICAgICAgIF9hZGRpdGlvbmFsUGFyYW1zLmhlaWdodCA9IF9wcmVmcy5nZXRJbnQoXCJyc0hcIik7XG5cbiAgICAgICAgX2ZyYW1lQ29udHJvbGxlciA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5WaWRlby5GcmFtZUNvbnRyb2xsZXIoKTtcblxuICAgICAgICBfaXNTdG9yYWdlRmlsZSA9IGZhbHNlO1xuXG4gICAgICAgIHN0ciA9IF9hZGRpdGlvbmFsUGFyYW1zLnVybC5zcGxpdChcIj9cIik7XG5cbiAgICAgICAgLy8gc3RvcmUgdGhpcyBmb3IgdGhlIHJlZnJlc2ggdGltZXJcbiAgICAgICAgX3NlcGFyYXRvciA9IChzdHIubGVuZ3RoID09PSAxKSA/IFwiP1wiIDogXCImXCI7XG4gICAgICAgIF9jdXJyZW50RmlsZSA9IF9hZGRpdGlvbmFsUGFyYW1zLnVybDtcblxuICAgICAgICBsb2FkVmlkZW9MaW5rRnJvbVhMU3VpdGUoZnVuY3Rpb24gKHZpZGVvVXJsKSB7XG4gICAgICAgICAgX2N1cnJlbnRGaWxlID0gdmlkZW9Vcmw7XG5cbiAgICAgICAgICB2YXIgJG1haW5JZnJhbWUgPSAkKCcjbWFpbklmcmFtZScpO1xuICAgICAgICAgICRtYWluSWZyYW1lLmF0dHIoJ3NyYycsIF9jdXJyZW50RmlsZSk7XG4gICAgICAgICAgJG1haW5JZnJhbWUuYXR0cignd2lkdGgnLCBfYWRkaXRpb25hbFBhcmFtcy53aWR0aCk7XG4gICAgICAgICAgJG1haW5JZnJhbWUuYXR0cignaGVpZ2h0JywgX2FkZGl0aW9uYWxQYXJhbXMuaGVpZ2h0KTtcblxuICAgICAgICAgIHN0YXJ0UGxheWxpc3RDaGFuZ2VUaW1lcigpO1xuXG4gICAgICAgICAgX3JlYWR5KCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllckVycm9yKGVycm9yKSB7XG4gICAgY29uc29sZS5kZWJ1ZyhcInZpZGVvLWZvbGRlcjo6cGxheWVyRXJyb3IoKVwiLCBlcnJvcik7XG5cbiAgICAvLyBmbGFnIHRoZSB2aWRlbyBoYXMgYW4gZXJyb3JcbiAgICBfcGxheWJhY2tFcnJvciA9IHRydWU7XG5cbiAgICAvLyBhY3QgYXMgdGhvdWdoIHZpZGVvIGhhcyBlbmRlZFxuICAgIHBsYXllckVuZGVkKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIHBhdXNlKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwibm9TdG9yYWdlRmlsZVwiOiBub1N0b3JhZ2VGaWxlLFxuICAgIFwib25TdG9yYWdlSW5pdFwiOiBvblN0b3JhZ2VJbml0LFxuICAgIFwib25TdG9yYWdlUmVmcmVzaFwiOiBvblN0b3JhZ2VSZWZyZXNoLFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJzZXRBZGRpdGlvbmFsUGFyYW1zXCI6IHNldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJwbGF5ZXJFbmRlZFwiOiBwbGF5ZXJFbmRlZCxcbiAgICBcInBsYXllclJlYWR5XCI6IHBsYXllclJlYWR5LFxuICAgIFwicGxheWVyRXJyb3JcIjogcGxheWVyRXJyb3IsXG4gICAgXCJzdG9wXCI6IHN0b3BcbiAgfTtcblxufSkoZ2FkZ2V0cyk7XG5cclxuLyogZ2xvYmFsIGNvbmZpZyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIik7XG5cbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnVybCkge1xuXG4gICAgICAgIGlmIChfaW5pdGlhbExvYWQpIHtcbiAgICAgICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcblxuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25TdG9yYWdlSW5pdChlLmRldGFpbC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGNoZWNrIGZvciBcImNoYW5nZWRcIiBwcm9wZXJ0eSBhbmQgZW5zdXJlIGl0IGlzIHRydWVcbiAgICAgICAgICBpZiAoZS5kZXRhaWwuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VkXCIpICYmIGUuZGV0YWlsLmNoYW5nZWQpIHtcbiAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25TdG9yYWdlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZpbGVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLm5vU3RvcmFnZUZpbGUoKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuc3RvcmFnZS5mb2xkZXIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZU5hbWVcIiwgZGF0YS5zdG9yYWdlLmZpbGVOYW1lKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImNvbXBhbnlJZFwiLCBkYXRhLnN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cclxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xyXG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xyXG5cclxuUmlzZVZpc2lvbi5Db21tb24uVmlkZW8gPSBSaXNlVmlzaW9uLkNvbW1vbi5WaWRlbyB8fCB7fTtcclxuXHJcblJpc2VWaXNpb24uQ29tbW9uLlZpZGVvLkZyYW1lQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgdmFyIFBSRUZJWCA9IFwiaWZfXCI7XHJcblxyXG4gIGZ1bmN0aW9uIGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUFJFRklYICsgaW5kZXgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0RnJhbWVPYmplY3QoaW5kZXgpIHtcclxuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSxcclxuICAgICAgaWZyYW1lO1xyXG5cclxuICAgIGlmcmFtZSA9IGZyYW1lQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIik7XHJcblxyXG4gICAgaWYgKGlmcmFtZSkge1xyXG4gICAgICByZXR1cm4gKGlmcmFtZS5jb250ZW50V2luZG93KSA/IGlmcmFtZS5jb250ZW50V2luZG93IDpcclxuICAgICAgICAoaWZyYW1lLmNvbnRlbnREb2N1bWVudC5kb2N1bWVudCkgPyBpZnJhbWUuY29udGVudERvY3VtZW50LmRvY3VtZW50IDogaWZyYW1lLmNvbnRlbnREb2N1bWVudDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9jbGVhcihpbmRleCkge1xyXG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxyXG4gICAgICBmcmFtZU9iaiA9IGdldEZyYW1lT2JqZWN0KGluZGV4KSxcclxuICAgICAgaWZyYW1lO1xyXG5cclxuICAgIGlmIChmcmFtZU9iaikge1xyXG4gICAgICBpZnJhbWUgPSBmcmFtZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO1xyXG4gICAgICBmcmFtZU9iai5yZW1vdmUoKTtcclxuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImFib3V0OmJsYW5rXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkKGluZGV4KSB7XHJcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCksXHJcbiAgICAgIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XHJcblxyXG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcImFsbG93VHJhbnNwYXJlbmN5XCIsIHRydWUpO1xyXG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcImZyYW1lYm9yZGVyXCIsIFwiMFwiKTtcclxuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzY3JvbGxpbmdcIiwgXCJub1wiKTtcclxuXHJcbiAgICBmcmFtZUNvbnRhaW5lci5hcHBlbmRDaGlsZChpZnJhbWUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlRnJhbWVQbGF5ZXIoaW5kZXgsIHBhcmFtcywgZmlsZXMsIHNraW4sIHNyYykge1xyXG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxyXG4gICAgICBmcmFtZU9iaiA9IGdldEZyYW1lT2JqZWN0KGluZGV4KSxcclxuICAgICAgaWZyYW1lO1xyXG5cclxuICAgIGlmIChmcmFtZU9iaikge1xyXG4gICAgICBpZnJhbWUgPSBmcmFtZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO1xyXG5cclxuICAgICAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZnJhbWUub25sb2FkID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBhbmQgbG9hZCB0aGUgcGxheWVyIGluc2lkZSB0aGUgaWZyYW1lXHJcbiAgICAgICAgZnJhbWVPYmouaW5pdChwYXJhbXMsIGZpbGVzLCBza2luKTtcclxuICAgICAgICBmcmFtZU9iai5sb2FkKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIHNyYyk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGlkZShpbmRleCkge1xyXG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpO1xyXG5cclxuICAgIGZyYW1lQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlKGluZGV4LCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUFJFRklYICsgaW5kZXgpO1xyXG5cclxuICAgIF9jbGVhcihpbmRleCk7XHJcblxyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIC8vIHJlbW92ZSB0aGUgaWZyYW1lIGJ5IGNsZWFyaW5nIGFsbCBlbGVtZW50cyBpbnNpZGUgZGl2IGNvbnRhaW5lclxyXG4gICAgICB3aGlsZSAoZnJhbWVDb250YWluZXIuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgIGZyYW1lQ29udGFpbmVyLnJlbW92ZUNoaWxkKGZyYW1lQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICB9XHJcbiAgICB9LCAyMDApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2hvdyhpbmRleCkge1xyXG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpO1xyXG5cclxuICAgIGZyYW1lQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBhZGQ6IGFkZCxcclxuICAgIGNyZWF0ZUZyYW1lUGxheWVyOiBjcmVhdGVGcmFtZVBsYXllcixcclxuICAgIGdldEZyYW1lQ29udGFpbmVyOiBnZXRGcmFtZUNvbnRhaW5lcixcclxuICAgIGdldEZyYW1lT2JqZWN0OiBnZXRGcmFtZU9iamVjdCxcclxuICAgIGhpZGU6IGhpZGUsXHJcbiAgICByZW1vdmU6IHJlbW92ZSxcclxuICAgIHNob3c6IHNob3dcclxuICB9O1xyXG59O1xyXG5cclxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xyXG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xyXG5cclxuUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZSA9IGZ1bmN0aW9uIChtYWluQ29udGFpbmVyLCBtZXNzYWdlQ29udGFpbmVyKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gIHZhciBfYWN0aXZlID0gZmFsc2U7XHJcblxyXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtYWluQ29udGFpbmVyLnN0eWxlLmhlaWdodDtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS53YXJuKFwiQ2FuJ3QgaW5pdGlhbGl6ZSBNZXNzYWdlIC0gXCIsIGUubWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqICBQdWJsaWMgTWV0aG9kc1xyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGhpZGUoKSB7XHJcbiAgICBpZiAoX2FjdGl2ZSkge1xyXG4gICAgICAvLyBjbGVhciBjb250ZW50IG9mIG1lc3NhZ2UgY29udGFpbmVyXHJcbiAgICAgIHdoaWxlIChtZXNzYWdlQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLnJlbW92ZUNoaWxkKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGhpZGUgbWVzc2FnZSBjb250YWluZXJcclxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAvLyBzaG93IG1haW4gY29udGFpbmVyXHJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xyXG5cclxuICAgICAgX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2hvdyhtZXNzYWdlKSB7XHJcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXHJcbiAgICAgIHA7XHJcblxyXG4gICAgaWYgKCFfYWN0aXZlKSB7XHJcbiAgICAgIC8vIGhpZGUgbWFpbiBjb250YWluZXJcclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuXHJcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBtZXNzYWdlIGVsZW1lbnRcclxuICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XHJcbiAgICAgIHAuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtZXNzYWdlXCIpO1xyXG4gICAgICBwLnN0eWxlLmxpbmVIZWlnaHQgPSBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodDtcclxuXHJcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHApO1xyXG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcclxuXHJcbiAgICAgIF9hY3RpdmUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gbWVzc2FnZSBhbHJlYWR5IGJlaW5nIHNob3duLCB1cGRhdGUgbWVzc2FnZSB0ZXh0XHJcbiAgICAgIHAgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZVwiKTtcclxuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2luaXQoKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIFwiaGlkZVwiOiBoaWRlLFxyXG4gICAgXCJzaG93XCI6IHNob3dcclxuICB9O1xyXG59O1xyXG5cclxuLyogZ2xvYmFsIGdhZGdldHMsIFJpc2VWaXNpb24gKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnBsYXkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5zdG9wKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwb2x5bWVyUmVhZHkoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJXZWJDb21wb25lbnRzUmVhZHlcIiwgcG9seW1lclJlYWR5KTtcblxuICAgIGlmIChpZCAmJiBpZCAhPT0gXCJcIikge1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wbGF5X1wiICsgaWQsIHBsYXkpO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wYXVzZV9cIiArIGlkLCBwYXVzZSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCk7XG5cbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgUmlzZVZpc2lvbi5WaWRlby5zZXRBZGRpdGlvbmFsUGFyYW1zKTtcbiAgICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gICAgfVxuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJXZWJDb21wb25lbnRzUmVhZHlcIiwgcG9seW1lclJlYWR5KTtcblxufSkod2luZG93LCBnYWRnZXRzKTtcblxuXG5cclxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0yJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
